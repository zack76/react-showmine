{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from 'react';\nimport Colors from \"../../../constants/Colors\";\nimport JielongService from \"../../../service/JielongService\";\nimport ItemBanner from \"../ItemBanner\";\nimport ItemContent from \"../ItemContent\";\nimport JieLongChildrenList from \"./JieLongChildrenList\";\nimport JieLongRelatedProducts from \"./JieLongRelatedProducts\";\nimport JieLongButtonArea from \"./JieLongButtonArea\";\nimport JieLongPopUpMenu from \"./JieLongPopUpMenu\";\nimport { Cells, Cell, CellBody, CellFooter, Gallery } from 'react-weui';\n\nvar JieLongDetailComponent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(JieLongDetailComponent, _Component);\n\n  function JieLongDetailComponent(props) {\n    var _this;\n\n    _classCallCheck(this, JieLongDetailComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(JieLongDetailComponent).call(this, props));\n    _this.state = {\n      isLogin: _this.props.isLogin,\n      showVoucher: false,\n      item: _this.props.item\n    };\n    return _this;\n  }\n\n  _createClass(JieLongDetailComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.state.isLogin ? this.getAllJielong() : null;\n    }\n  }, {\n    key: \"getAllJielong\",\n    value: function getAllJielong() {\n      var _this2 = this;\n\n      var id = this.state.item.id;\n      JielongService.getAllJielong(id).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        var currentId = responseJson.length - 1;\n\n        _this2.setState({\n          allJielongInfo: responseJson,\n          processAllJieLong: true,\n          userJieLongInfo: responseJson[currentId]\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"showHideJieLongMenu\",\n    value: function showHideJieLongMenu() {\n      this.setState(function (prevState) {\n        return {\n          showMenu: !prevState.showMenu\n        };\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var item = this.state.item ? this.state.item : undefined;\n      var isLogin = this.state.isLogin;\n      var allJielongInfo = this.state.allJielongInfo ? this.state.allJielongInfo : undefined;\n      var showLoading = this.state.showLoading ? this.state.showLoading : false;\n      var userJieLongInfo = this.state.userJieLongInfo ? this.state.userJieLongInfo : '';\n      var loadingJieLong = this.state.processAllJieLong;\n      var showMenu = typeof this.state.showMenu !== 'undefined' ? this.state.showMenu : false;\n      return React.createElement(\"div\", {\n        className: \"App-body\",\n        key: item.id\n      }, React.createElement(ItemBanner, {\n        item: item\n      }), React.createElement(ItemContent, {\n        jieLongDetail: item\n      }), React.createElement(Cells, null, allJielongInfo ? allJielongInfo.map(function (jieLong) {\n        return React.createElement(\"div\", {\n          key: jieLong.id\n        }, React.createElement(Cell, {\n          href: undefined,\n          onClick: function onClick(e) {\n            return _this3.setState({\n              showVoucher: true\n            });\n          },\n          access: true\n        }, React.createElement(CellBody, null, jieLong && jieLong.is_paid && jieLong.voucher && jieLong.voucher.receipt && jieLong.voucher.receipt.amount && jieLong.voucher.refnum && jieLong.is_paid ? React.createElement(\"div\", {\n          className: \"allJielongInfo\"\n        }, React.createElement(\"div\", null, React.createElement(\"span\", {\n          className: \"paidAmount-icon\"\n        }, \"\\u5DF2\\u652F\\u4ED8\\uFF1A$\", jieLong.voucher.receipt.amount), \" \\u56DE\\u6267\\u7801\\uFF1A\", React.createElement(\"span\", {\n          className: \"Ref-num\"\n        }, jieLong.voucher.refnum))) : React.createElement(\"div\", {\n          className: \"isInJielong-row\"\n        }, jieLong.voucher && jieLong.voucher.refnum ? React.createElement(\"div\", null, React.createElement(\"span\", {\n          className: \"tag-icon\"\n        }, \"\\u53C2\\u52A0\\u6210\\u529F\"), \" \\u56DE\\u6267\\u7801\\uFF1A\", React.createElement(\"span\", {\n          className: \"Ref-num\"\n        }, jieLong.voucher.refnum)) : React.createElement(\"div\", null, \"\\u63D0\\u793A\\uFF1A\\u60A8\\u6709\\u8BA2\\u5355\\u672A\\u5B8C\\u6210\\uFF0C\\u8BF7\\u572830\\u5206\\u949F\\u5185\\u5B8C\\u6210\\u652F\\u4ED8\\u3002\"))), React.createElement(CellFooter, null)), React.createElement(Gallery, {\n          src: jieLong.voucher && jieLong.voucher.img_url ? jieLong.voucher.img_url : undefined,\n          show: _this3.state.showVoucher\n        }, React.createElement(\"div\", {\n          style: styles.galleryButton,\n          onClick: function onClick(e) {\n            return _this3.setState({\n              showVoucher: false\n            });\n          }\n        }, \"Cancel\")));\n      }) : null), React.createElement(JieLongChildrenList, {\n        children: item.children ? item.children : undefined\n      }), React.createElement(JieLongRelatedProducts, {\n        companyId: item.company_id\n      }), React.createElement(JieLongButtonArea, {\n        item: item,\n        isLogin: isLogin,\n        userJieLongInfo: userJieLongInfo,\n        loadingJieLong: loadingJieLong,\n        showHideJieLongMenu: function showHideJieLongMenu() {\n          return _this3.showHideJieLongMenu();\n        }\n      }), React.createElement(JieLongPopUpMenu, {\n        item: item,\n        showHideJieLongMenu: function showHideJieLongMenu() {\n          _this3.showHideJieLongMenu();\n        },\n        showLoading: showLoading,\n        showMenu: showMenu,\n        userJieLongInfo: userJieLongInfo\n      }));\n    }\n  }]);\n\n  return JieLongDetailComponent;\n}(Component);\n\nvar styles = {};\nexport default JieLongDetailComponent;","map":null,"metadata":{},"sourceType":"module"}