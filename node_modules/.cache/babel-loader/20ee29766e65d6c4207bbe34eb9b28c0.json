{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM_React/shm-react/my-app/components/ItemDetails/RegistrationDetails/RegistrationButtonArea.js\";\nimport React from 'react';\nimport { Button, ButtonArea } from \"react-weui\";\nimport Lang from '../../../lang/Lang';\nimport UtilsService from '../../../service/UtilsService';\nimport AuthService from \"../../../service/AuthService\";\nimport CartService from '../../../service/CartService';\nimport Colors from '../../../constants/Colors';\nimport JielongService from \"../../../service/JielongService\";\n\nvar RegistrationButtonArea =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(RegistrationButtonArea, _React$Component);\n\n  function RegistrationButtonArea(props) {\n    var _this;\n\n    _classCallCheck(this, RegistrationButtonArea);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RegistrationButtonArea).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"createJielongComment\", function () {\n      tmp.params = {\n        'config': modalCtrl.config,\n        'comments': modalCtrl.jieLongComment.comments,\n        'quantity': modalCtrl.jieLongComment.quantity,\n        'state_redirect_obj': $scope.stateRedirectObj,\n        'wechat_auth_url': WeChatService.getAuthPageUrl(),\n        'item_url': $state.href('mixAuth.itemDetails', {\n          'itemId': $scope.item.id\n        }, {\n          absolute: true\n        }),\n        'voucher_base_url': $state.href('mixAuth.voucherCheckIn', {\n          'voucherId': 'VOUCHERID'\n        }, {\n          absolute: true\n        }),\n        'is_private': modalCtrl.jieLongComment.is_private\n      };\n      var itemObj = {\n        item_id: _this.state.item.children[index].id,\n        quantity: _this.state.quantityOfChildren[index],\n        price: _this.state.priceOfChildren[index].toString()\n      };\n      var params = {\n        comments: _this.state.notes,\n        config: _JSON$stringify(configObj),\n        item_url: \"https://www.showmine66.com/ma/i/\" + _this.state.item.id,\n        location: _this.state.item.company.pickup_locations[_this.state.locationId].id,\n        is_private: false,\n        quantity: [],\n        state_redirect_obj: {\n          url: UtilsService.getWebAddress() // url: \"http://localhost:3000\",\n\n        },\n        voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n        wechat_auth_url: \"https://www.showmine66.com/a/wu?domain=https%253A%252F%252Fwww.showmine66.com&origurl=https%253A%252F%252Fwww.showmine66.com%252Fma%252Fi%252Fdbfcefa936b4cd6d5709953b5ea12673%2523app-top\"\n      };\n      JielongService.addJielong(params, id).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this.setState({\n          jielong: responseJson\n        });\n\n        if (_this.state.payment_method == \"NoPayment\") {\n          _this.generateVoucher();\n        }\n      }).catch(function (error) {\n        console.error(error);\n      }); // if (this.state.is_update) {\n      //     let id = this.props.url.query.jielongId;\n      //     JielongService.updateJielong(params, id)\n      //         .then((response) => response.json())\n      //         .then((responseJson) => {\n      //             this.setState({\n      //                 jielong: responseJson,\n      //             });\n      //             this.generateVoucher();\n      //         })\n      //         .catch((error) => {\n      //             console.error(error);\n      //         });\n      // }\n      // else {\n      // }\n    });\n\n    _this.state = {\n      item: _this.props.item,\n      isLogin: _this.props.isLogin,\n      formValues: _this.props.formValues\n    };\n    return _this;\n  }\n\n  _createClass(RegistrationButtonArea, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps, nextContext) {\n      this.setState({\n        item: nextProps.item,\n        isLogin: nextProps.address,\n        formValues: nextProps.formValues\n      });\n    } // weChatLogin() {\n    //     let origUrl = window.location.href;\n    //     let authUrl = UtilsService.getWebAddress() + \"AuthPage\";\n    //     AuthService.wechatLogin(origUrl, authUrl, {})\n    //         .then((response) => response.json())\n    //         .then((responseJson) => {\n    //             window.open(responseJson.auth_url, \"_self\");\n    //         })\n    //         .catch((error) => {\n    //             alert(error);\n    //         });\n    // }\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        style: styles.buttonGroupContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: function onClick() {\n          _this2.buyNow();\n        },\n        style: styles.btn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"\\u7ACB\\u523B\\u62A5\\u540D\"));\n    }\n  }]);\n\n  return RegistrationButtonArea;\n}(React.Component);\n\nvar styles = {\n  buttonGroupContainer: {\n    position: 'fixed',\n    left: 0,\n    bottom: 0,\n    width: '100%',\n    backgroundColor: '#fff',\n    color: '#fff',\n    textAlign: 'center'\n  },\n  btn: {\n    backgroundColor: Colors.appThemeColor,\n    color: Colors.fontColor,\n    fontWeight: 'bold'\n  }\n};\nexport default RegistrationButtonArea;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM_React/shm-react/my-app/components/ItemDetails/RegistrationDetails/RegistrationButtonArea.js"],"names":["React","Button","ButtonArea","Lang","UtilsService","AuthService","CartService","Colors","JielongService","RegistrationButtonArea","props","tmp","params","modalCtrl","config","jieLongComment","comments","quantity","$scope","stateRedirectObj","WeChatService","getAuthPageUrl","$state","href","item","id","absolute","is_private","itemObj","item_id","state","children","index","quantityOfChildren","price","priceOfChildren","toString","notes","configObj","item_url","location","company","pickup_locations","locationId","state_redirect_obj","url","getWebAddress","voucher_base_url","wechat_auth_url","addJielong","then","response","json","responseJson","setState","jielong","payment_method","generateVoucher","catch","error","console","isLogin","formValues","nextProps","nextContext","address","styles","buttonGroupContainer","buyNow","btn","Component","position","left","bottom","width","backgroundColor","color","textAlign","appThemeColor","fontColor","fontWeight"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Button, ButtonArea} from \"react-weui\";\nimport Lang from '../../../lang/Lang';\nimport UtilsService from '../../../service/UtilsService';\nimport AuthService from \"../../../service/AuthService\";\nimport CartService from '../../../service/CartService';\nimport Colors from '../../../constants/Colors';\nimport JielongService from \"../../../service/JielongService\";\n\nclass RegistrationButtonArea extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            item: this.props.item,\n            isLogin: this.props.isLogin,\n            formValues: this.props.formValues,\n        };\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        this.setState({\n            item: nextProps.item,\n            isLogin: nextProps.address,\n            formValues: nextProps.formValues\n        })\n    }\n\n    // weChatLogin() {\n    //     let origUrl = window.location.href;\n    //     let authUrl = UtilsService.getWebAddress() + \"AuthPage\";\n    //     AuthService.wechatLogin(origUrl, authUrl, {})\n    //         .then((response) => response.json())\n    //         .then((responseJson) => {\n    //             window.open(responseJson.auth_url, \"_self\");\n    //         })\n    //         .catch((error) => {\n    //             alert(error);\n    //         });\n    // }\n\n    createJielongComment = () => {\n        tmp.params = {\n            'config':modalCtrl.config ,\n            'comments': modalCtrl.jieLongComment.comments,\n            'quantity': modalCtrl.jieLongComment.quantity,\n            'state_redirect_obj': $scope.stateRedirectObj,\n            'wechat_auth_url': WeChatService.getAuthPageUrl(),\n            'item_url': $state.href('mixAuth.itemDetails', {'itemId': $scope.item.id}, {absolute: true}),\n            'voucher_base_url': $state.href('mixAuth.voucherCheckIn', {'voucherId': 'VOUCHERID'}, {absolute: true}),\n            'is_private': modalCtrl.jieLongComment.is_private\n        };\n\n        let itemObj = {\n            item_id: this.state.item.children[index].id,\n            quantity: this.state.quantityOfChildren[index],\n            price: this.state.priceOfChildren[index].toString(),\n        }\n\n        let params = {\n            comments:this.state.notes,\n            config: JSON.stringify(configObj),\n            item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n            location: this.state.item.company.pickup_locations[this.state.locationId].id,\n            is_private: false,\n            quantity: [],\n            state_redirect_obj: {\n                url: UtilsService.getWebAddress(),\n                // url: \"http://localhost:3000\",\n            },\n            voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n            wechat_auth_url: \"https://www.showmine66.com/a/wu?domain=https%253A%252F%252Fwww.showmine66.com&origurl=https%253A%252F%252Fwww.showmine66.com%252Fma%252Fi%252Fdbfcefa936b4cd6d5709953b5ea12673%2523app-top\"\n        };\n        JielongService.addJielong(params, id)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    jielong: responseJson,\n                });\n                if(this.state.payment_method == \"NoPayment\") {\n                    this.generateVoucher();\n                }\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n        // if (this.state.is_update) {\n        //     let id = this.props.url.query.jielongId;\n        //     JielongService.updateJielong(params, id)\n        //         .then((response) => response.json())\n        //         .then((responseJson) => {\n        //             this.setState({\n        //                 jielong: responseJson,\n        //             });\n        //             this.generateVoucher();\n        //         })\n        //         .catch((error) => {\n        //             console.error(error);\n        //         });\n        // }\n        // else {\n\n        // }\n    };\n\n    render(){\n        return (\n            <div style={ styles.buttonGroupContainer }>\n                <Button onClick={()=>{this.buyNow()}} style={styles.btn}>立刻报名</Button>\n            </div>\n        );\n    }\n}\n\n\nconst styles = {\n    buttonGroupContainer: {\n        position: 'fixed',\n        left: 0,\n        bottom: 0,\n        width: '100%',\n        backgroundColor: '#fff',\n        color: '#fff',\n        textAlign: 'center',\n    },\n    btn: {\n        backgroundColor: Colors.appThemeColor,\n        color: Colors.fontColor,\n        fontWeight: 'bold'\n    },\n};\n\n\nexport default RegistrationButtonArea;\n"]},"metadata":{},"sourceType":"module"}