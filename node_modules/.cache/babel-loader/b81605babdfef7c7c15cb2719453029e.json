{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/checkoutPage.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Button, TextArea, ActionSheet, Switch, Radio, Cells, CellsTitle, Cell, CellHeader, CellBody, CellFooter, Form, FormCell, Input, Label, LoadMore, Toast, Gallery } from 'react-weui';\nimport ItemService from '../service/ItemService';\nimport JielongService from '../service/JielongService';\nimport PaymentService from '../service/PaymentService';\nimport UtilsService from '../service/UtilsService';\nimport AuthService from \"../service/AuthService\"; //import styles\n\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css'; //import component\n\nimport { Config } from \"../Config\";\nimport Router from \"next/dist/client/router\";\nimport Footer from \"../components/Common/SiteFooter\";\nimport SiteHeader from \"../components/Common/SiteHeader\";\nimport { GiStrong } from \"react-icons/gi\";\n\nvar checkoutPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(checkoutPage, _Component);\n\n  function checkoutPage(props) {\n    var _this;\n\n    _classCallCheck(this, checkoutPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(checkoutPage).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"addJielong\", function () {\n      _this.setState({\n        showLoading: true\n      });\n\n      var id = _this.state.itemId;\n      var configObj = {};\n      var params = {\n        comments: _this.state.notes,\n        config: _JSON$stringify(configObj),\n        item_url: \"https://www.showmine66.com/ma/i/\" + _this.state.item.id,\n        location: _this.state.item.company.pickup_locations[_this.state.locationId].id,\n        is_private: _this.state.hideAvatar,\n        quantity: [],\n        state_redirect_obj: {\n          url: UtilsService.getWebAddress() // url: \"http://localhost:3000\",\n\n        },\n        voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n        wechat_auth_url: \"https://www.showmine66.com/a/wu?domain=https%253A%252F%252Fwww.showmine66.com&origurl=https%253A%252F%252Fwww.showmine66.com%252Fma%252Fi%252Fdbfcefa936b4cd6d5709953b5ea12673%2523app-top\"\n      };\n\n      for (var index = 0; index <= _this.state.quantityOfChildren.length; index++) {\n        if (_this.state.quantityOfChildren[index] !== null && _this.state.quantityOfChildren[index] !== undefined) {\n          params.quantity.push({\n            item_id: _this.state.item.children[index].id,\n            quantity: _this.state.quantityOfChildren[index],\n            price: _this.state.priceOfChildren[index].toString()\n          });\n        }\n      }\n\n      if (_this.state.is_update) {\n        var _id = _this.props.url.query.jielongId;\n        JielongService.updateJielong(params, _id).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          _this.setState({\n            jielong: responseJson\n          });\n\n          if (_this.state.payment_method == \"NoPayment\") {\n            _this.generateVoucher();\n          } else {\n            _this.processPayment();\n          }\n        }).catch(function (error) {\n          console.error(error);\n        });\n      } else {\n        JielongService.addJielong(params, id).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          _this.setState({\n            jielong: responseJson\n          });\n\n          if (_this.state.payment_method == \"NoPayment\") {\n            _this.generateVoucher();\n          } else {\n            _this.processPayment();\n          }\n        }).catch(function (error) {\n          console.error(error);\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"processPayment\", function () {\n      // \"redirectUrl\": UtilsService.getWebAddress() + \"index?itemId=\" + this.state.jielong.item_id\n      var configObj = {\n        \"source\": \"jielong_payment\",\n        \"item_comment_id\": _this.state.jielong.id,\n        \"item_id\": _this.state.jielong.item_id\n      };\n      var params = {\n        config: _JSON$stringify(configObj),\n        item_comment_id: _this.state.jielong.id,\n        payment_method: _this.state.payment_method,\n        redirectUrl: UtilsService.getWebAddress() + \"index?itemId=\" + _this.state.jielong.item_id\n      };\n      PaymentService.getToPay(params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this.setState({\n          payment: responseJson\n        });\n\n        window.open(responseJson.pay_url, \"_self\");\n\n        _this.setState({\n          showLoading: false\n        });\n      }).catch(function (error) {\n        console.error(error);\n        alert(error);\n      });\n    });\n\n    _this.state = {\n      jielong: 'none',\n      payment: 'none',\n      processPayment: false,\n      showLocation: false,\n      ios_show: false,\n      actions: [{\n        label: '取消',\n        onClick: _this.hide.bind(_assertThisInitialized(_this))\n      }],\n      quantity: 0,\n      itemId: '',\n      name: '',\n      contact_number: '',\n      address: '',\n      notes: '',\n      hideAvatar: true,\n      payment_method: null,\n      pickup_location: '',\n      quantityOfChildren: [],\n      priceOfChildren: [],\n      totalPrice: 0,\n      showLoading: false,\n      loadingTimer: null,\n      is_update: false,\n      showVoucher: false\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.switch = _this.switch.bind(_assertThisInitialized(_this));\n    _this.handlePayment = _this.handlePayment.bind(_assertThisInitialized(_this));\n    _this.handleQuantity = _this.handleQuantity.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(checkoutPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var isLogin = localStorage.getItem('isLogIn');\n\n      if (isLogin) {\n        var itemId = this.props.url.query.itemId;\n\n        if (this.props.url.query.is_update) {\n          this.setState({\n            is_update: this.props.url.query.is_update\n          });\n        }\n\n        ItemService.getItemDetail(itemId).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          _this2.setState({\n            item: responseJson,\n            itemId: responseJson.id\n          });\n        }).catch(function (error) {\n          console.error(error);\n        });\n      } else {\n        this.weChatLogin();\n      }\n    }\n  }, {\n    key: \"weChatLogin\",\n    value: function weChatLogin() {\n      // let origUrl = 'showmine66.com';\n      // let origUrl = this.state.item.id;\n      var origUrl = window.location.href;\n      var authUrl = \"react.showmine66.com/AuthPage\"; // let authUrl = 'http://showmine66.com/' + \"AuthPage\";\n\n      AuthService.wechatLogin(origUrl, authUrl, {}).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        window.open(responseJson.auth_url, \"_self\");\n      }).catch(function (error) {\n        alert(error);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.state.loadingTimer && clearTimeout(this.state.loadingTimer);\n    }\n  }, {\n    key: \"placeOrder\",\n    value: function placeOrder() {\n      this.setState({\n        processPayment: true\n      });\n    }\n  }, {\n    key: \"generateVoucher\",\n    value: function generateVoucher() {\n      var _this3 = this;\n\n      var id = this.state.jielong.id;\n      var params = {\n        is_update: this.state.is_update,\n        item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n        voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\"\n      };\n      JielongService.generateVoucher(params, id).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this3.setState({\n          voucher: responseJson,\n          showLoading: false,\n          showVoucher: true\n        }); // window.open(responseJson.url,\"_self\");\n\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState(_defineProperty({}, event.target.name, event.target.value));\n    }\n  }, {\n    key: \"handleTotalPrice\",\n    value: function handleTotalPrice() {\n      this.state.totalPrice = 0;\n\n      for (var index = 0; index <= this.state.priceOfChildren.length; index++) {\n        if (this.state.priceOfChildren[index]) {\n          this.state.totalPrice = this.state.totalPrice + this.state.priceOfChildren[index];\n        }\n      }\n\n      this.setState({\n        totalPrice: this.state.totalPrice\n      });\n    }\n  }, {\n    key: \"handleQuantity\",\n    value: function handleQuantity(event) {\n      this.state.quantityOfChildren[event.target.name] = Number(event.target.value);\n      this.state.priceOfChildren[event.target.name] = this.state.quantityOfChildren[event.target.name] * this.state.item.children[event.target.name].price;\n      this.setState({\n        quantityOfChildren: this.state.quantityOfChildren,\n        priceOfChildren: this.state.priceOfChildren\n      });\n      this.handleTotalPrice();\n    }\n  }, {\n    key: \"minus\",\n    value: function minus(index) {\n      if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index] === null || this.state.quantityOfChildren[index] === undefined || this.state.quantityOfChildren[index] === 0) {\n        console.log('Cannot minus');\n      } else {\n        this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] - 1;\n        this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n        this.setState({\n          quantityOfChildren: this.state.quantityOfChildren,\n          priceOfChildren: this.state.priceOfChildren\n        });\n        this.handleTotalPrice();\n      }\n    }\n  }, {\n    key: \"plus\",\n    value: function plus(index) {\n      if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index] === null || this.state.quantityOfChildren[index] === undefined) {\n        this.state.quantityOfChildren[index] = 0;\n      }\n\n      this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] + 1;\n      this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n      this.setState({\n        quantityOfChildren: this.state.quantityOfChildren,\n        priceOfChildren: this.state.priceOfChildren\n      });\n      this.handleTotalPrice();\n    }\n  }, {\n    key: \"handlePayment\",\n    value: function handlePayment(event) {\n      this.setState({\n        payment_method: event.target.value,\n        payment_name: event.target.title\n      });\n    }\n  }, {\n    key: \"switch\",\n    value: function _switch() {\n      this.setState({\n        hideAvatar: !this.state.hideAvatar\n      });\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.setState({\n        ios_show: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      /**\n       * Display the pickup locations list\n       */\n      var locationsList = null;\n\n      if (this.state.item && this.state.item.company && this.state.item.company.pickup_locations) {\n        locationsList = this.state.item.company.pickup_locations.map(function (location, index) {\n          return React.createElement(ActionSheet, {\n            key: location.id,\n            menus: [{\n              label: location.title,\n              onClick: function onClick() {\n                _this4.setState({\n                  locationId: index,\n                  showLocation: true\n                });\n\n                _this4.hide();\n              }\n            }],\n            actions: _this4.state.actions,\n            show: _this4.state.ios_show,\n            type: \"ios\",\n            onRequestClose: function onRequestClose(e) {\n              return _this4.setState({\n                ios_show: false\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 318\n            },\n            __self: this\n          });\n        });\n      }\n      /**\n       * Display children & handle the quantity for each one\n       */\n\n\n      var listItems = null;\n\n      if (this.state.item && this.state.item.children) {\n        listItems = this.state.item.children.map(function (item, index) {\n          return React.createElement(\"div\", {\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 348\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"checkout-info\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 349\n            },\n            __self: this\n          }, item.images[0] ? React.createElement(\"div\", {\n            className: \"checkout-img\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 351\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            height: 150,\n            width: 150,\n            src: item.images[0].url,\n            role: \"presentation\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 352\n            },\n            __self: this\n          })) : null, React.createElement(\"div\", {\n            className: \"checkout-content\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 357\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"checkout-subtitle\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 358\n            },\n            __self: this\n          }, item.title), React.createElement(\"div\", {\n            className: \"checkout-price\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 359\n            },\n            __self: this\n          }, \"$\", item.price), React.createElement(\"div\", {\n            className: \"Number-Picker\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 360\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            style: styles.pickerButton,\n            onClick: function onClick() {\n              _this4.minus(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 361\n            },\n            __self: this\n          }, \" \\uFF0D \"), React.createElement(\"input\", {\n            style: styles.picker,\n            type: \"number\",\n            min: \"0\",\n            max: \"1000\",\n            name: index,\n            value: _this4.state.quantityOfChildren[index] ? _this4.state.quantityOfChildren[index] : 0,\n            onChange: _this4.handleQuantity,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 362\n            },\n            __self: this\n          }), React.createElement(\"button\", {\n            style: styles.pickerButton,\n            onClick: function onClick() {\n              _this4.plus(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 365\n            },\n            __self: this\n          }, \" \\uFF0B \")))), React.createElement(\"div\", {\n            className: \"location-tag\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 369\n            },\n            __self: this\n          }, item.locations[0].title), React.createElement(\"div\", {\n            className: \"divider\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 370\n            },\n            __self: this\n          }));\n        });\n      }\n      /**\n       * Display children & quantity for the checkout\n       */\n\n\n      var checkoutLists = null;\n\n      if (this.state.item && this.state.item.children) {\n        checkoutLists = this.state.item.children.map(function (item, index) {\n          return React.createElement(\"div\", {\n            key: item.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 383\n            },\n            __self: this\n          }, _this4.state.quantityOfChildren[index] && _this4.state.quantityOfChildren[index] !== 0 ? React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 385\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 386\n            },\n            __self: this\n          }, item.title, \" \\xD7 \", _this4.state.quantityOfChildren[index]), React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 387\n            },\n            __self: this\n          }, \"\\u5546\\u54C1\\u603B\\u989D\\uFF1A$\", _this4.state.priceOfChildren[index])) : null);\n        });\n      }\n      /**\n       * The page content\n       */\n\n\n      if (this.state.item) {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 404\n          },\n          __self: this\n        }, React.createElement(SiteHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 405\n          },\n          __self: this\n        }), this.state.processPayment ? React.createElement(\"div\", {\n          className: \"App-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 407\n          },\n          __self: this\n        }, React.createElement(Gallery, {\n          src: this.state.voucher && this.state.voucher.url ? this.state.voucher.url : undefined,\n          show: this.state.showVoucher,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 408\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: styles.galleryButton,\n          onClick: function onClick(e) {\n            _this4.setState({\n              showVoucher: false,\n              showLoading: true\n            });\n\n            Router.push({\n              pathname: '/index',\n              query: _this4.state.itemId\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 409\n          },\n          __self: this\n        }, \"Cancel\")), React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 422\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 423\n          },\n          __self: this\n        }, \"\\u652F\\u4ED8\\u91D1\\u989D\", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 424\n          },\n          __self: this\n        }, \"\\u603B\\u8BA1\\uFF1A$\", this.state.totalPrice)), React.createElement(\"div\", {\n          className: \"payment-block-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 426\n          },\n          __self: this\n        }, checkoutLists, React.createElement(\"div\", {\n          style: {\n            fontSize: 24\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 428\n          },\n          __self: this\n        }, \"\\u603B\\u8BA1:\", React.createElement(\"span\", {\n          style: {\n            color: 'red'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 428\n          },\n          __self: this\n        }, \" $\", this.state.totalPrice)))), React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 432\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 433\n          },\n          __self: this\n        }, \"\\u8BF7\\u9009\\u62E9\\u652F\\u4ED8\\u65B9\\u5F0F:\"), React.createElement(Form, {\n          style: {\n            fontSize: 16\n          },\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 434\n          },\n          __self: this\n        }, this.state.item && this.state.item.online_payment == true ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 437\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 438\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 439\n          },\n          __self: this\n        }, \"\\u5FAE\\u4FE1\\u652F\\u4ED8\"), React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 440\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio1\",\n          value: \"OMIPAY_WECHAT\",\n          title: \"\\u5FAE\\u4FE1\\u652F\\u4ED8\",\n          onChange: this.handlePayment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 441\n          },\n          __self: this\n        })))) : React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 458\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 459\n          },\n          __self: this\n        }, \"\\u5230\\u5E97\\u652F\\u4ED8\"), React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 460\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio1\",\n          value: \"NoPayment\",\n          title: \"NoPayment\",\n          onChange: this.handlePayment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 461\n          },\n          __self: this\n        }))), this.state.payment_method == \"NoPayment\" ? React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 467\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 468\n          },\n          __self: this\n        }, \"\\u8BA2\\u5355\\u5DF2\\u786E\\u8BA4\\uFF0C\\u8BF7\\u5230\\u5E97\\u652F\\u4ED8\\u3002\")) : this.state.payment_name ? React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 472\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 473\n          },\n          __self: this\n        }, \"\\u4F7F\\u7528\", React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 473\n          },\n          __self: this\n        }, this.state.payment_name), \"\\u5B8C\\u6210\\u4EA4\\u6613\\u3002\\uFF08\\u63D0\\u793A\\uFF1A\\u8BF7\\u5728\", React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 473\n          },\n          __self: this\n        }, \"30\\u5206\\u949F\"), \"\\u5185\\u5B8C\\u6210\\u652F\\u4ED8\\uFF0C\\u5426\\u5219\\u8BA2\\u5355\\u4F1A\\u64A4\\u9500\\uFF09\")) : null)), this.state.showLocation ? React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 481\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 482\n          },\n          __self: this\n        }, \"\\u53D6\\u8D27\\u5730\\u70B9\"), React.createElement(Form, {\n          style: {\n            fontSize: 16\n          },\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 483\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 484\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 485\n          },\n          __self: this\n        }, this.state.item.children[0].locations[this.state.locationId].title), React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 486\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio2\",\n          defaultChecked: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 487\n          },\n          __self: this\n        }))))) : null, this.state.notes ? React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 496\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 497\n          },\n          __self: this\n        }, \"\\u5907\\u6CE8\"), React.createElement(\"div\", {\n          className: \"payment-block-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 498\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 499\n          },\n          __self: this\n        }, this.state.notes))) : null, React.createElement(\"div\", {\n          className: \"checkout-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 505\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"primary\",\n          onClick: function onClick() {\n            _this4.addJielong();\n          },\n          disabled: this.state.payment_method && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 506\n          },\n          __self: this\n        }, \"\\u786E\\u8BA4\\u8BA2\\u5355\"), React.createElement(Button, {\n          type: \"warn\",\n          onClick: function onClick() {\n            _this4.setState({\n              processPayment: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 512\n          },\n          __self: this\n        }, \"\\u53D6\\u6D88\"), React.createElement(Toast, {\n          icon: \"loading\",\n          show: this.state.showLoading,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 515\n          },\n          __self: this\n        }, \"Loading...\"))) : React.createElement(\"div\", {\n          className: \"App-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 518\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"checkout-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 519\n          },\n          __self: this\n        }, this.state.item.title), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 520\n          },\n          __self: this\n        }, React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 521\n          },\n          __self: this\n        }, \"\\u9009\\u62E9\\u4EA7\\u54C1\"), listItems, React.createElement(\"div\", {\n          className: \"total-price\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 523\n          },\n          __self: this\n        }, \"\\u603B\\u8BA1\\uFF1A\", React.createElement(\"span\", {\n          className: \"price-number\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 523\n          },\n          __self: this\n        }, \"$\", this.state.totalPrice))), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 525\n          },\n          __self: this\n        }, React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 526\n          },\n          __self: this\n        }, \"\\u53D6\\u8D27\\u5730\\u70B9* \"), React.createElement(Cells, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 527\n          },\n          __self: this\n        }, React.createElement(Cell, {\n          href: \"javascript:;\",\n          access: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 528\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          onClick: function onClick(e) {\n            return _this4.setState({\n              ios_show: true\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 529\n          },\n          __self: this\n        }, \"\\u5F53\\u524D\\u9009\\u62E9:\"), locationsList, React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 533\n          },\n          __self: this\n        })), this.state.showLocation ? React.createElement(\"div\", {\n          className: \"location\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 537\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"location-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 538\n          },\n          __self: this\n        }, \"\\u540D\\u79F0\\uFF1A\", this.state.item.company.pickup_locations[this.state.locationId].title), React.createElement(\"div\", {\n          className: \"location-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 540\n          },\n          __self: this\n        }, \"\\u4F4D\\u7F6E\\uFF1A\", this.state.item.company.pickup_locations[this.state.locationId].address.street), React.createElement(\"div\", {\n          className: \"location-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 542\n          },\n          __self: this\n        }, \"\\u63CF\\u8FF0\\uFF1A\", this.state.item.company.pickup_locations[this.state.locationId].description)) : null), React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 549\n          },\n          __self: this\n        }, \"\\u8054\\u7CFB\\u65B9\\u5F0F* \"), React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 550\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 551\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 552\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 553\n          },\n          __self: this\n        }, \"\\u59D3\\u540D\")), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 555\n          },\n          __self: this\n        }, React.createElement(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u59D3\\u540D\",\n          name: \"name\",\n          value: this.state.name,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 556\n          },\n          __self: this\n        }))), React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 560\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 561\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 562\n          },\n          __self: this\n        }, \"\\u8054\\u7CFB\\u65B9\\u5F0F\")), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 564\n          },\n          __self: this\n        }, React.createElement(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\",\n          name: \"contact_number\",\n          value: this.state.contact_number,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 565\n          },\n          __self: this\n        }))), React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 569\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 570\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 571\n          },\n          __self: this\n        }, \"\\u5730\\u5740\")), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 573\n          },\n          __self: this\n        }, React.createElement(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u5730\\u5740\",\n          name: \"address\",\n          value: this.state.address,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 574\n          },\n          __self: this\n        })))), React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 579\n          },\n          __self: this\n        }, \"\\u5907\\u6CE8\"), React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 580\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 581\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 582\n          },\n          __self: this\n        }, React.createElement(TextArea, {\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u6587\\u672C\",\n          rows: \"5\",\n          name: \"notes\",\n          value: this.state.notes,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 583\n          },\n          __self: this\n        })))), React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 588\n          },\n          __self: this\n        }, \"\\u79C1\\u5BC6\\u53C2\\u52A0\"), React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 589\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 590\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 591\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          switch: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 592\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 593\n          },\n          __self: this\n        }, \"\\u5F00\\u542F\\u540E\\u5C06\\u9690\\u85CF\\u60A8\\u7684\\u5934\\u50CF\"), React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 594\n          },\n          __self: this\n        }, React.createElement(Switch, {\n          onClick: this.switch,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 595\n          },\n          __self: this\n        })))))), React.createElement(\"div\", {\n          className: \"checkout-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 601\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"primary\",\n          onClick: function onClick() {\n            _this4.placeOrder();\n          },\n          disabled: this.state.totalPrice !== 0 && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 602\n          },\n          __self: this\n        }, \"\\u6211\\u8981\\u4E0B\\u5355\")))));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 615\n          },\n          __self: this\n        }, React.createElement(SiteHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 616\n          },\n          __self: this\n        }), React.createElement(LoadMore, {\n          loading: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 617\n          },\n          __self: this\n        }));\n      }\n    }\n  }]);\n\n  return checkoutPage;\n}(Component);\n\nvar styles = {\n  galleryButton: {\n    color: 'white',\n    fontWeight: 'bold',\n    padding: '0'\n  },\n  picker: {\n    textAlign: 'center',\n    fontSize: '18px',\n    height: '28px',\n    width: '60px',\n    borderRadius: '0',\n    border: 'none'\n  },\n  pickerButton: {\n    fontSize: '18px',\n    backgroundColor: '#efc929',\n    border: 'none',\n    width: '28px',\n    height: '28px',\n    borderRadius: '0'\n  }\n};\nexport default checkoutPage;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/checkoutPage.js"],"names":["React","Component","Button","TextArea","ActionSheet","Switch","Radio","Cells","CellsTitle","Cell","CellHeader","CellBody","CellFooter","Form","FormCell","Input","Label","LoadMore","Toast","Gallery","ItemService","JielongService","PaymentService","UtilsService","AuthService","Config","Router","Footer","SiteHeader","GiStrong","checkoutPage","props","setState","showLoading","id","state","itemId","configObj","params","comments","notes","config","item_url","item","location","company","pickup_locations","locationId","is_private","hideAvatar","quantity","state_redirect_obj","url","getWebAddress","voucher_base_url","wechat_auth_url","index","quantityOfChildren","length","undefined","push","item_id","children","price","priceOfChildren","toString","is_update","query","jielongId","updateJielong","then","response","json","responseJson","jielong","payment_method","generateVoucher","processPayment","catch","error","console","addJielong","item_comment_id","redirectUrl","getToPay","payment","window","open","pay_url","alert","showLocation","ios_show","actions","label","onClick","hide","bind","name","contact_number","address","pickup_location","totalPrice","loadingTimer","showVoucher","handleChange","switch","handlePayment","handleQuantity","isLogin","localStorage","getItem","getItemDetail","weChatLogin","origUrl","href","authUrl","wechatLogin","auth_url","clearTimeout","voucher","event","target","value","Number","handleTotalPrice","log","payment_name","title","locationsList","map","e","listItems","images","styles","pickerButton","minus","picker","plus","locations","checkoutLists","galleryButton","pathname","fontSize","color","online_payment","street","description","placeOrder","fontWeight","padding","textAlign","height","width","borderRadius","border","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport {Button, TextArea, ActionSheet, Switch, Radio, Cells, CellsTitle, Cell, CellHeader, CellBody, CellFooter, Form, FormCell, Input, Label, LoadMore, Toast, Gallery} from 'react-weui';\nimport ItemService from '../service/ItemService';\nimport JielongService from '../service/JielongService';\nimport PaymentService from '../service/PaymentService'\nimport UtilsService from '../service/UtilsService'\nimport AuthService from \"../service/AuthService\";\n\n\n//import styles\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css';\n\n\n//import component\nimport {Config} from \"../Config\";\nimport Router from \"next/dist/client/router\";\nimport Footer from \"../components/Common/SiteFooter\";\nimport SiteHeader from \"../components/Common/SiteHeader\";\nimport {GiStrong} from \"react-icons/gi\";\n\n\n\nclass checkoutPage extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            jielong: 'none',\n            payment: 'none',\n            processPayment: false,\n            showLocation: false,\n            ios_show: false,\n            actions: [\n                {\n                    label: '取消',\n                    onClick: this.hide.bind(this)\n                }\n            ],\n            quantity: 0,\n            itemId: '',\n            name:'',\n            contact_number: '',\n            address: '',\n            notes: '',\n            hideAvatar: true,\n            payment_method: null,\n            pickup_location: '',\n            quantityOfChildren: [],\n            priceOfChildren: [],\n            totalPrice: 0,\n            showLoading: false,\n            loadingTimer: null,\n            is_update: false,\n            showVoucher: false,\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.switch = this.switch.bind(this);\n        this.handlePayment = this.handlePayment.bind(this);\n        this.handleQuantity = this.handleQuantity.bind(this);\n    }\n\n    componentDidMount() {\n        const isLogin = localStorage.getItem('isLogIn');\n        if (isLogin) {\n            let itemId = this.props.url.query.itemId;\n            if (this.props.url.query.is_update) {\n                this.setState({\n                    is_update: this.props.url.query.is_update,\n                });\n            }\n            ItemService.getItemDetail(itemId)\n                .then((response) => response.json())\n                .then((responseJson) => {\n                    this.setState({\n                        item: responseJson,\n                        itemId: responseJson.id,\n                    });\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        }\n        else {\n            this.weChatLogin();\n        }\n    }\n\n    weChatLogin() {\n        // let origUrl = 'showmine66.com';\n        // let origUrl = this.state.item.id;\n        let origUrl = window.location.href;\n        let authUrl = \"react.showmine66.com/AuthPage\";\n        // let authUrl = 'http://showmine66.com/' + \"AuthPage\";\n\n        AuthService.wechatLogin(origUrl, authUrl, {})\n            .then((response) => response.json())\n            .then((responseJson) => {\n                window.open(responseJson.auth_url, \"_self\");\n            })\n            .catch((error) => {\n                alert(error);\n            });\n    }\n\n\n    componentWillUnmount() {\n        this.state.loadingTimer && clearTimeout(this.state.loadingTimer);\n    }\n\n    placeOrder() {\n        this.setState({\n            processPayment: true,\n        });\n    }\n\n    addJielong = () => {\n        this.setState({showLoading: true});\n        let id  = this.state.itemId;\n        let configObj = {};\n        let params = {\n            comments:this.state.notes,\n            config: JSON.stringify(configObj),\n            item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n            location: this.state.item.company.pickup_locations[this.state.locationId].id,\n            is_private: this.state.hideAvatar,\n            quantity: [\n            ],\n            state_redirect_obj: {\n                url: UtilsService.getWebAddress(),\n                // url: \"http://localhost:3000\",\n            },\n            voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n            wechat_auth_url: \"https://www.showmine66.com/a/wu?domain=https%253A%252F%252Fwww.showmine66.com&origurl=https%253A%252F%252Fwww.showmine66.com%252Fma%252Fi%252Fdbfcefa936b4cd6d5709953b5ea12673%2523app-top\"\n        };\n        for (let index = 0; index <= this.state.quantityOfChildren.length; index++) {\n            if (this.state.quantityOfChildren[index]!==null && this.state.quantityOfChildren[index]!== undefined) {\n                params.quantity.push({\n                    item_id: this.state.item.children[index].id,\n                    quantity: this.state.quantityOfChildren[index],\n                    price: this.state.priceOfChildren[index].toString(),\n                });\n            }\n        }\n        if (this.state.is_update) {\n            let id = this.props.url.query.jielongId;\n            JielongService.updateJielong(params, id)\n                .then((response) => response.json())\n                .then((responseJson) => {\n                    this.setState({\n                        jielong: responseJson,\n                    });\n                    if(this.state.payment_method == \"NoPayment\") {\n                        this.generateVoucher();\n                    }\n                    else {\n                        this.processPayment();\n                    }\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        }\n        else {\n            JielongService.addJielong(params, id)\n                .then((response) => response.json())\n                .then((responseJson) => {\n                    this.setState({\n                        jielong: responseJson,\n                    });\n                    if(this.state.payment_method == \"NoPayment\") {\n                        this.generateVoucher();\n                    }\n                    else {\n                        this.processPayment();\n                    }\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        }\n    };\n\n    processPayment= () => {\n        // \"redirectUrl\": UtilsService.getWebAddress() + \"index?itemId=\" + this.state.jielong.item_id\n        let configObj = {\"source\":\"jielong_payment\", \"item_comment_id\": this.state.jielong.id, \"item_id\": this.state.jielong.item_id};\n        let params = {\n            config: JSON.stringify(configObj),\n            item_comment_id: this.state.jielong.id,\n            payment_method: this.state.payment_method,\n            redirectUrl: UtilsService.getWebAddress() + \"index?itemId=\" + this.state.jielong.item_id\n        };\n        PaymentService.getToPay(params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    payment: responseJson,\n                });\n                window.open(responseJson.pay_url,\"_self\");\n                this.setState({showLoading: false});\n            })\n            .catch((error) => {\n                console.error(error);\n                alert(error);\n            });\n    };\n\n    generateVoucher() {\n        let id = this.state.jielong.id;\n        let params = {\n            is_update: this.state.is_update,\n            item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n            voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n        };\n        JielongService.generateVoucher(params, id)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    voucher: responseJson,\n                    showLoading: false,\n                    showVoucher: true\n                });\n                // window.open(responseJson.url,\"_self\");\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n\n\n    handleChange(event) {\n        this.setState({[event.target.name]: event.target.value});\n    }\n\n    handleTotalPrice() {\n        this.state.totalPrice = 0;\n        for(var index = 0; index <= this.state.priceOfChildren.length; index++) {\n            if (this.state.priceOfChildren[index]) {\n                this.state.totalPrice = this.state.totalPrice + this.state.priceOfChildren[index];\n            }\n        }\n        this.setState({\n            totalPrice: this.state.totalPrice,\n        })\n    }\n\n    handleQuantity(event) {\n        this.state.quantityOfChildren[event.target.name] = Number(event.target.value);\n        this.state.priceOfChildren[event.target.name] = this.state.quantityOfChildren[event.target.name] * this.state.item.children[event.target.name].price;\n        this.setState({\n            quantityOfChildren: this.state.quantityOfChildren,\n            priceOfChildren: this.state.priceOfChildren,\n        })\n        this.handleTotalPrice();\n\n    }\n\n    minus(index) {\n        if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index]===null || this.state.quantityOfChildren[index]===undefined || this.state.quantityOfChildren[index]===0 )\n        {\n            console.log('Cannot minus');\n        } else {\n            this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] - 1;\n            this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n            this.setState({\n                quantityOfChildren: this.state.quantityOfChildren,\n                priceOfChildren: this.state.priceOfChildren,\n            })\n            this.handleTotalPrice();\n\n        }\n    }\n\n    plus(index) {\n        if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index]===null || this.state.quantityOfChildren[index]===undefined)\n        {\n            this.state.quantityOfChildren[index] = 0;\n        }\n        this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] + 1;\n        this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n        this.setState({\n            quantityOfChildren: this.state.quantityOfChildren,\n            priceOfChildren: this.state.priceOfChildren,\n        })\n        this.handleTotalPrice();\n\n    }\n\n    handlePayment(event) {\n        this.setState({\n            payment_method: event.target.value,\n            payment_name: event.target.title,\n        })\n    }\n\n    switch(){\n        this.setState({hideAvatar: !this.state.hideAvatar});\n    }\n\n    hide(){\n        this.setState({\n            ios_show: false,\n        });\n    }\n\n\n\n    render() {\n\n        /**\n         * Display the pickup locations list\n         */\n\n        let locationsList = null;\n        if (this.state.item && this.state.item.company && this.state.item.company.pickup_locations) {\n            locationsList = this.state.item.company.pickup_locations.map((location, index) =>\n                <ActionSheet\n                    key={location.id}\n                    menus={\n                        [{\n                            label: location.title,\n                            onClick: ()=> {\n                                this.setState({\n                                        locationId: index,\n                                        showLocation: true,\n                                    }\n                                );\n                                this.hide();\n                            }\n                        },]\n                    }\n                    actions={this.state.actions}\n                    show={this.state.ios_show}\n                    type=\"ios\"\n                    onRequestClose={e=>this.setState({ios_show: false})}\n                />\n            );\n        }\n\n        /**\n         * Display children & handle the quantity for each one\n         */\n        let listItems = null;\n        if (this.state.item && this.state.item.children)\n        {\n            listItems = this.state.item.children.map((item, index) =>\n                <div key={index}>\n                    <div className='checkout-info'>\n                        {item.images[0] ?\n                            ( <div className='checkout-img'>\n                                <img height={150} width={150} src={item.images[0].url} role=\"presentation\"/>\n                            </div>)\n                            :\n                            null}\n\n                        <div className='checkout-content'>\n                            <div className='checkout-subtitle'>{item.title}</div>\n                            <div className='checkout-price'>${item.price}</div>\n                            <div className=\"Number-Picker\">\n                                <button style={styles.pickerButton} onClick={() => {this.minus(index);}}> － </button>\n                                <input style={styles.picker} type=\"number\" min=\"0\" max=\"1000\" name={index}\n                                       value={this.state.quantityOfChildren[index]?this.state.quantityOfChildren[index]:0}\n                                       onChange={this.handleQuantity}/>\n                                <button style={styles.pickerButton} onClick={() => {this.plus(index);}}> ＋ </button>\n                            </div>\n                        </div>\n                    </div>\n                    <div className='location-tag'>{item.locations[0].title}</div>\n                    <div className='divider'/>\n                </div>\n\n            );\n        }\n\n        /**\n         * Display children & quantity for the checkout\n         */\n        let checkoutLists = null;\n        if (this.state.item && this.state.item.children)\n        {\n            checkoutLists = this.state.item.children.map((item, index) =>\n                <div key={item.id}>\n                    {this.state.quantityOfChildren[index] && this.state.quantityOfChildren[index] !== 0 ?\n                        <div>\n                            <div>{item.title} × {this.state.quantityOfChildren[index]}</div>\n                            <div>商品总额：${this.state.priceOfChildren[index]}</div>\n                        </div>\n                        :\n                        null\n                    }\n\n                </div>\n            );\n        }\n\n        /**\n         * The page content\n         */\n\n\n        if (this.state.item) {\n            return (\n                <div className=\"App\">\n                    <SiteHeader/>\n                    {this.state.processPayment ?\n                        <div className='App-body'>\n                            <Gallery src={this.state.voucher && this.state.voucher.url ? this.state.voucher.url : undefined} show={this.state.showVoucher}>\n                                <div\n                                    style={styles.galleryButton}\n                                    onClick={e=>{\n                                        this.setState({ showVoucher: false, showLoading: true});\n                                        Router.push({\n                                            pathname: '/index',\n                                            query: this.state.itemId,\n                                        });\n                                    }}\n                                >\n                                    Cancel\n                                </div>\n                            </Gallery>\n                            <div className='payment-block'>\n                                <div\n                                    className='payment-block-title'>支付金额<span>总计：${this.state.totalPrice}</span>\n                                </div>\n                                <div className='payment-block-content'>\n                                    {checkoutLists}\n                                    <div style={{fontSize: 24}}>总计:<span style={{color: 'red'}}> ${this.state.totalPrice}</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className='payment-block'>\n                                <div className='payment-block-title'>请选择支付方式:</div>\n                                <Form style={{fontSize: 16}} radio>\n\n                                    {this.state.item && this.state.item.online_payment == true ?\n                                        (<div>\n                                            <FormCell radio>\n                                                <CellBody>微信支付</CellBody>\n                                                <CellFooter>\n                                                    <Radio name='radio1' value=\"OMIPAY_WECHAT\" title=\"微信支付\" onChange={this.handlePayment}/>\n                                                </CellFooter>\n                                            </FormCell>\n                                            {/*<FormCell radio>*/}\n                                            {/*    <CellBody>银行卡支付</CellBody>*/}\n                                            {/*    <CellFooter>*/}\n                                            {/*        <Radio name=\"radio1\" value=\"银行卡支付\" title=\"银行卡支付\" onChange={this.handlePayment}/>*/}\n                                            {/*    </CellFooter>*/}\n                                            {/*</FormCell>*/}\n                                            {/*<FormCell radio>*/}\n                                            {/*    <CellBody>PayPal支付</CellBody>*/}\n                                            {/*    <CellFooter>*/}\n                                            {/*        <Radio name=\"radio1\" value=\"PayPal支付\" title=\"PayPal支付\" onChange={this.handlePayment}/>*/}\n                                            {/*    </CellFooter>*/}\n                                            {/*</FormCell>*/}\n                                        </div>)\n                                        :\n                                        <FormCell radio>\n                                            <CellBody>到店支付</CellBody>\n                                            <CellFooter>\n                                                <Radio name=\"radio1\" value=\"NoPayment\" title=\"NoPayment\" onChange={this.handlePayment}/>\n                                            </CellFooter>\n                                        </FormCell>\n                                    }\n\n                                    {this.state.payment_method == \"NoPayment\" ?\n                                        <FormCell>\n                                            <CellBody>订单已确认，请到店支付。</CellBody>\n                                        </FormCell>\n                                        :\n                                        this.state.payment_name ?\n                                            <FormCell>\n                                                <CellBody>使用<strong>{this.state.payment_name}</strong>完成交易。（提示：请在<strong>30分钟</strong>内完成支付，否则订单会撤销）</CellBody>\n                                            </FormCell>\n                                            : null\n                                    }\n\n                                </Form>\n                            </div>\n                            {this.state.showLocation ?\n                                <div className='payment-block'>\n                                    <div className='payment-block-title'>取货地点</div>\n                                    <Form style={{fontSize: 16}} radio>\n                                        <FormCell radio>\n                                            <CellBody>{this.state.item.children[0].locations[this.state.locationId].title}</CellBody>\n                                            <CellFooter>\n                                                <Radio name=\"radio2\" defaultChecked/>\n                                            </CellFooter>\n                                        </FormCell>\n                                    </Form>\n                                </div>\n                                :\n                                null\n                            }\n                            {this.state.notes ?\n                                <div className='payment-block'>\n                                    <div className='payment-block-title'>备注</div>\n                                    <div className='payment-block-content'>\n                                        <p>{this.state.notes}</p>\n                                    </div>\n                                </div>\n                                :\n                                null\n                            }\n                            <div className='checkout-button'>\n                                <Button type=\"primary\" onClick={() => {\n                                    this.addJielong();\n                                }}\n                                        disabled={this.state.payment_method && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true}>\n                                    确认订单\n                                </Button>\n                                <Button type=\"warn\" onClick={() => {this.setState({processPayment: false})}}>\n                                    取消\n                                </Button>\n                                <Toast icon=\"loading\" show={this.state.showLoading}>Loading...</Toast>\n                            </div>\n                        </div> :\n                        <div className='App-body'>\n                            <div className='checkout-title'>{this.state.item.title}</div>\n                            <div>\n                                <CellsTitle>选择产品</CellsTitle>\n                                {listItems}\n                                <div className='total-price'>总计：<span className='price-number'>${this.state.totalPrice}</span></div>\n                            </div>\n                            <div>\n                                <CellsTitle>取货地点* </CellsTitle>\n                                <Cells>\n                                    <Cell href=\"javascript:;\" access>\n                                        <CellBody onClick={e => this.setState({ios_show: true})}>\n                                            当前选择:\n                                        </CellBody>\n                                        {locationsList}\n                                        <CellFooter/>\n                                    </Cell>\n                                    {\n                                        this.state.showLocation ?\n                                            <div className='location'>\n                                                <div\n                                                    className='location-label'>名称：{this.state.item.company.pickup_locations[this.state.locationId].title}</div>\n                                                <div\n                                                    className='location-label'>位置：{this.state.item.company.pickup_locations[this.state.locationId].address.street}</div>\n                                                <div\n                                                    className='location-label'>描述：{this.state.item.company.pickup_locations[this.state.locationId].description}</div>\n                                            </div>\n                                            :\n                                            null\n                                    }\n                                </Cells>\n                                <CellsTitle>联系方式* </CellsTitle>\n                                <Form>\n                                    <FormCell>\n                                        <CellHeader>\n                                            <Label>姓名</Label>\n                                        </CellHeader>\n                                        <CellBody>\n                                            <Input type=\"text\" placeholder=\"请输入姓名\" name='name' value={this.state.name}\n                                                   onChange={this.handleChange}/>\n                                        </CellBody>\n                                    </FormCell>\n                                    <FormCell>\n                                        <CellHeader>\n                                            <Label>联系方式</Label>\n                                        </CellHeader>\n                                        <CellBody>\n                                            <Input type=\"text\" placeholder=\"请输入手机号\" name='contact_number'\n                                                   value={this.state.contact_number} onChange={this.handleChange}/>\n                                        </CellBody>\n                                    </FormCell>\n                                    <FormCell>\n                                        <CellHeader>\n                                            <Label>地址</Label>\n                                        </CellHeader>\n                                        <CellBody>\n                                            <Input type=\"text\" placeholder=\"请输入地址\" name='address'\n                                                   value={this.state.address} onChange={this.handleChange}/>\n                                        </CellBody>\n                                    </FormCell>\n                                </Form>\n                                <CellsTitle>备注</CellsTitle>\n                                <Form>\n                                    <FormCell>\n                                        <CellBody>\n                                            <TextArea placeholder=\"请输入文本\" rows=\"5\" name='notes' value={this.state.notes}\n                                                      onChange={this.handleChange}></TextArea>\n                                        </CellBody>\n                                    </FormCell>\n                                </Form>\n                                <CellsTitle>私密参加</CellsTitle>\n                                <Form>\n                                    <FormCell>\n                                        <CellBody>\n                                            <FormCell switch>\n                                                <CellBody>开启后将隐藏您的头像</CellBody>\n                                                <CellFooter>\n                                                    <Switch onClick={this.switch}/>\n                                                </CellFooter>\n                                            </FormCell>\n                                        </CellBody>\n                                    </FormCell>\n                                </Form>\n                                <div className='checkout-button'>\n                                    <Button type=\"primary\" onClick={() => {this.placeOrder();}}\n                                            disabled={this.state.totalPrice !== 0 && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true}>\n                                        我要下单\n                                    </Button>\n                                </div>\n                            </div>\n                        </div>\n                    }\n                </div>\n            );\n        }\n        else {\n            return (\n                <div className=\"App\">\n                    <SiteHeader/>\n                    <LoadMore loading></LoadMore>\n                </div>\n            );\n        }\n    }\n}\n\nconst styles = {\n    galleryButton: {\n        color: 'white',\n        fontWeight:'bold',\n        padding: '0',\n    },\n    picker:{\n        textAlign: 'center',\n        fontSize: '18px',\n        height: '28px',\n        width: '60px',\n        borderRadius: '0',\n        border: 'none',\n    },\n    pickerButton: {\n        fontSize: '18px',\n        backgroundColor: '#efc929',\n        border: 'none',\n        width: '28px',\n        height: '28px',\n        borderRadius: '0',\n    }\n}\n\nexport default checkoutPage;\n"]},"metadata":{},"sourceType":"module"}