{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from 'react';\nimport { ActionSheet, Toast } from \"react-weui\";\nimport Lang from '../../../lang/Lang';\nimport Router from \"next/dist/client/router\";\nimport JielongService from \"../../../service/JielongService\";\n\nvar JieLongPopUpMenu =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(JieLongPopUpMenu, _React$Component);\n\n  function JieLongPopUpMenu(props) {\n    var _this;\n\n    _classCallCheck(this, JieLongPopUpMenu);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(JieLongPopUpMenu).call(this, props));\n    _this.state = {\n      item: _this.props.item,\n      showHideMenu: _this.props.showHideMenu,\n      showLoading: _this.props.showLoading,\n      showMenu: _this.props.showMenu,\n      userJieLongInfo: _this.props.userJieLongInfo\n    };\n    return _this;\n  }\n\n  _createClass(JieLongPopUpMenu, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(object, nextProps) {\n      this.setState({\n        showLoading: object.showLoading,\n        item: object.item,\n        showMenu: object.showMenu,\n        userJieLongInfo: object.userJieLongInfo\n      });\n    }\n  }, {\n    key: \"updateJielong\",\n    value: function updateJielong() {\n      this.state.showHideMenu();\n      var params = {\n        itemId: this.state.item.id,\n        is_update: true,\n        jielongId: this.state.userJieLongInfo.id\n      };\n      Router.push({\n        pathname: '/checkoutPage',\n        query: params\n      });\n    }\n  }, {\n    key: \"cancelJielong\",\n    value: function cancelJielong() {\n      var _this2 = this;\n\n      this.state.showHideMenu();\n      this.setState({\n        showLoading: true\n      });\n      var id = this.state.userJieLongInfo.id;\n      var url = \"https://www.showmine66.com/ma/i/\" + this.state.item.id;\n      JielongService.cancelJielong(id, url, {}).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this2.setState({\n          showLoading: false\n        });\n\n        window.location.reload();\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var showLoading = this.state.showLoading;\n      var actions = [{\n        label: Lang.translate('CANCEL'),\n        onClick: function onClick() {\n          _this3.state.showHideMenu();\n        }\n      }];\n      return React.createElement(\"div\", null, React.createElement(ActionSheet, {\n        menus: [{\n          label: Lang.translate('ITEM.EDIT.JIELONG'),\n          onClick: function onClick() {\n            _this3.updateJielong();\n          }\n        }, {\n          label: Lang.translate('ITEM.CANCEL.JIELONG'),\n          onClick: function onClick() {\n            _this3.cancelJielong();\n          }\n        }],\n        actions: actions,\n        show: this.state.showMenu === true,\n        type: \"ios\",\n        onRequestClose: function onRequestClose() {\n          _this3.state.showHideMenu();\n        },\n        style: styles.menuFont\n      }), React.createElement(Toast, {\n        icon: \"loading\",\n        show: showLoading\n      }, Lang.translate('LOADING'), \"...\"));\n    }\n  }]);\n\n  return JieLongPopUpMenu;\n}(React.Component);\n\nvar styles = {\n  menuFont: {\n    color: '#000'\n  }\n};\nexport default JieLongPopUpMenu;","map":null,"metadata":{},"sourceType":"module"}