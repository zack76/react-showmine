{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/checkoutPage.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Button, TextArea, ActionSheet, Switch, Radio, Cells, CellsTitle, Cell, CellHeader, CellBody, CellFooter, Form, FormCell, Input, Label, LoadMore, Toast, Gallery } from 'react-weui';\nimport ItemService from '../service/ItemService';\nimport JielongService from '../service/JielongService';\nimport PaymentService from '../service/PaymentService'; //import styles\n\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css'; //import component\n\nimport Head from \"../components/head\";\nimport { Config } from \"../Config\";\nimport Router from \"next/dist/client/router\";\nimport Footer from \"../components/Footer\";\nimport SiteHeader from \"../components/Common/SiteHeader\";\nimport { GiStrong } from \"react-icons/gi\";\n\nvar checkoutPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(checkoutPage, _Component);\n\n  function checkoutPage(props) {\n    var _this;\n\n    _classCallCheck(this, checkoutPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(checkoutPage).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"addJielong\", function () {\n      _this.setState({\n        showLoading: true\n      });\n\n      var id = _this.state.itemId;\n      var configObj = {};\n      var params = {\n        comments: _this.state.notes,\n        config: _JSON$stringify(configObj),\n        item_url: \"https://www.showmine66.com/ma/i/\" + _this.state.item.id,\n        location: _this.state.item.company.pickup_locations[_this.state.locationId].id,\n        is_private: _this.state.hideAvatar,\n        quantity: [],\n        state_redirect_obj: {\n          url: Config.webAddress // url: \"http://localhost:3000\",\n\n        },\n        voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n        wechat_auth_url: \"https://www.showmine66.com/a/wu?domain=https%253A%252F%252Fwww.showmine66.com&origurl=https%253A%252F%252Fwww.showmine66.com%252Fma%252Fi%252Fdbfcefa936b4cd6d5709953b5ea12673%2523app-top\"\n      };\n\n      for (var index = 0; index <= _this.state.quantityOfChildren.length; index++) {\n        if (_this.state.quantityOfChildren[index] !== null && _this.state.quantityOfChildren[index] !== undefined) {\n          params.quantity.push({\n            item_id: _this.state.item.children[index].id,\n            quantity: _this.state.quantityOfChildren[index],\n            price: _this.state.priceOfChildren[index].toString()\n          });\n        }\n      }\n\n      if (_this.state.is_update) {\n        alert('params');\n        alert(_JSON$stringify(params));\n        var jieLongId = _this.state.userJieLongInfo.currentUserJieLong.id;\n        alert('id');\n        alert(jieLongId);\n        JielongService.updateJielong(params, jieLongId).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          _this.setState({\n            jielong: responseJson\n          });\n\n          if (_this.state.payment_method == \"NoPayment\") {\n            _this.generateVoucher();\n          } else {\n            _this.processPayment();\n          }\n        }).catch(function (error) {\n          console.error(error);\n        });\n      } else {\n        JielongService.addJielong(params, id).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          _this.setState({\n            jielong: responseJson\n          });\n\n          if (_this.state.payment_method == \"NoPayment\") {\n            _this.generateVoucher();\n          } else {\n            _this.processPayment();\n          }\n        }).catch(function (error) {\n          console.error(error);\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"processPayment\", function () {\n      // \"redirectUrl\": Config.webAddress + \"index?itemId=\" + this.state.jielong.item_id\n      var configObj = {\n        \"source\": \"jielong_payment\",\n        \"item_comment_id\": _this.state.jielong.id,\n        \"item_id\": _this.state.jielong.item_id\n      };\n      var params = {\n        config: _JSON$stringify(configObj),\n        item_comment_id: _this.state.jielong.id,\n        payment_method: _this.state.payment_method,\n        redirectUrl: Config.webAddress + \"index?itemId=\" + _this.state.jielong.item_id\n      };\n      PaymentService.getToPay(params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this.setState({\n          payment: responseJson\n        });\n\n        window.open(responseJson.pay_url, \"_self\");\n\n        _this.setState({\n          showLoading: false\n        });\n      }).catch(function (error) {\n        console.error(error);\n        alert(error);\n      });\n    });\n\n    _this.state = {\n      jielong: 'none',\n      payment: 'none',\n      processPayment: false,\n      showLocation: false,\n      ios_show: false,\n      actions: [{\n        label: '取消',\n        onClick: _this.hide.bind(_assertThisInitialized(_this))\n      }],\n      quantity: 0,\n      itemId: '',\n      name: '',\n      contact_number: '',\n      address: '',\n      notes: '',\n      hideAvatar: true,\n      payment_method: null,\n      pickup_location: '',\n      quantityOfChildren: [],\n      priceOfChildren: [],\n      totalPrice: 0,\n      showLoading: false,\n      loadingTimer: null,\n      is_update: false,\n      showVoucher: false\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.switch = _this.switch.bind(_assertThisInitialized(_this));\n    _this.handlePayment = _this.handlePayment.bind(_assertThisInitialized(_this));\n    _this.handleQuantity = _this.handleQuantity.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(checkoutPage, [{\n    key: \"placeOrder\",\n    value: function placeOrder() {\n      this.setState({\n        processPayment: true\n      });\n    }\n  }, {\n    key: \"generateVoucher\",\n    value: function generateVoucher() {\n      var _this2 = this;\n\n      var id = this.state.jielong.id;\n      var params = {\n        is_update: this.state.is_update,\n        item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n        voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\"\n      };\n      JielongService.generateVoucher(params, id).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this2.setState({\n          voucher: responseJson,\n          showLoading: false,\n          showVoucher: true\n        }); // window.open(responseJson.url,\"_self\");\n\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"getIsInCurrentJieLong\",\n    value: function getIsInCurrentJieLong() {\n      var _this3 = this;\n\n      var id = this.state.itemId;\n      JielongService.getIsInCurrentJieLong(id).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this3.setState({\n          userJieLongInfo: responseJson\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState(_defineProperty({}, event.target.name, event.target.value));\n    }\n  }, {\n    key: \"handleTotalPrice\",\n    value: function handleTotalPrice() {\n      this.state.totalPrice = 0;\n\n      for (var index = 0; index <= this.state.priceOfChildren.length; index++) {\n        if (this.state.priceOfChildren[index]) {\n          this.state.totalPrice = this.state.totalPrice + this.state.priceOfChildren[index];\n        }\n      }\n\n      this.setState({\n        totalPrice: this.state.totalPrice\n      });\n    }\n  }, {\n    key: \"handleQuantity\",\n    value: function handleQuantity(event) {\n      this.state.quantityOfChildren[event.target.name] = Number(event.target.value);\n      this.state.priceOfChildren[event.target.name] = this.state.quantityOfChildren[event.target.name] * this.state.item.children[event.target.name].price;\n      this.setState({\n        quantityOfChildren: this.state.quantityOfChildren,\n        priceOfChildren: this.state.priceOfChildren\n      });\n      this.handleTotalPrice();\n    }\n  }, {\n    key: \"minus\",\n    value: function minus(index) {\n      if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index] === null || this.state.quantityOfChildren[index] === undefined || this.state.quantityOfChildren[index] === 0) {\n        console.log('Cannot minus');\n      } else {\n        this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] - 1;\n        this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n        this.setState({\n          quantityOfChildren: this.state.quantityOfChildren,\n          priceOfChildren: this.state.priceOfChildren\n        });\n        this.handleTotalPrice();\n      }\n    }\n  }, {\n    key: \"plus\",\n    value: function plus(index) {\n      if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index] === null || this.state.quantityOfChildren[index] === undefined) {\n        this.state.quantityOfChildren[index] = 0;\n      }\n\n      this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] + 1;\n      this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n      this.setState({\n        quantityOfChildren: this.state.quantityOfChildren,\n        priceOfChildren: this.state.priceOfChildren\n      });\n      this.handleTotalPrice();\n    }\n  }, {\n    key: \"handlePayment\",\n    value: function handlePayment(event) {\n      this.setState({\n        payment_method: event.target.value,\n        payment_name: event.target.title\n      });\n    }\n  }, {\n    key: \"switch\",\n    value: function _switch() {\n      this.setState({\n        hideAvatar: !this.state.hideAvatar\n      });\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.setState({\n        ios_show: false\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this4 = this;\n\n      var params = this.props.url.query.itemId;\n\n      if (this.props.url.query.is_update) {\n        this.setState({\n          is_update: this.props.url.query.is_update\n        });\n        this.getIsInCurrentJieLong();\n      }\n\n      ItemService.getItemDetail(params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this4.setState({\n          item: responseJson,\n          itemId: responseJson.id\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.state.loadingTimer && clearTimeout(this.state.loadingTimer);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      /**\n       * Display the pickup locations list\n       */\n      var locationsList = null;\n\n      if (this.state.item) {\n        locationsList = this.state.item.company.pickup_locations.map(function (location, index) {\n          return React.createElement(ActionSheet, {\n            key: location.id,\n            menus: [{\n              label: location.title,\n              onClick: function onClick() {\n                _this5.setState({\n                  locationId: index,\n                  showLocation: true\n                });\n\n                _this5.hide();\n              }\n            }],\n            actions: _this5.state.actions,\n            show: _this5.state.ios_show,\n            type: \"ios\",\n            onRequestClose: function onRequestClose(e) {\n              return _this5.setState({\n                ios_show: false\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 307\n            },\n            __self: this\n          });\n        });\n      }\n      /**\n       * Display children & handle the quantity for each one\n       */\n\n\n      var listItems = null;\n\n      if (this.state.item) {\n        listItems = this.state.item.children.map(function (item, index) {\n          return React.createElement(\"div\", {\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 337\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"checkout-info\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 338\n            },\n            __self: this\n          }, item.images[0] ? React.createElement(\"div\", {\n            className: \"checkout-img\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 340\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            height: 150,\n            width: 150,\n            src: item.images[0].url,\n            role: \"presentation\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 341\n            },\n            __self: this\n          })) : null, React.createElement(\"div\", {\n            className: \"checkout-content\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 346\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"checkout-subtitle\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 347\n            },\n            __self: this\n          }, item.title), React.createElement(\"div\", {\n            className: \"checkout-price\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 348\n            },\n            __self: this\n          }, \"$\", item.price), React.createElement(\"div\", {\n            className: \"Number-Picker\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 349\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            style: styles.pickerButton,\n            onClick: function onClick() {\n              _this5.minus(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 350\n            },\n            __self: this\n          }, \" \\uFF0D \"), React.createElement(\"input\", {\n            style: styles.picker,\n            type: \"number\",\n            min: \"0\",\n            max: \"1000\",\n            name: index,\n            value: _this5.state.quantityOfChildren[index] ? _this5.state.quantityOfChildren[index] : 0,\n            onChange: _this5.handleQuantity,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 351\n            },\n            __self: this\n          }), React.createElement(\"button\", {\n            style: styles.pickerButton,\n            onClick: function onClick() {\n              _this5.plus(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 354\n            },\n            __self: this\n          }, \" \\uFF0B \")))), React.createElement(\"div\", {\n            className: \"location-tag\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 358\n            },\n            __self: this\n          }, item.locations[0].title), React.createElement(\"div\", {\n            className: \"divider\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 359\n            },\n            __self: this\n          }));\n        });\n      }\n      /**\n       * Display children & quantity for the checkout\n       */\n\n\n      var checkoutLists = null;\n\n      if (this.state.item) {\n        checkoutLists = this.state.item.children.map(function (item, index) {\n          return React.createElement(\"div\", {\n            key: item.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 372\n            },\n            __self: this\n          }, _this5.state.quantityOfChildren[index] && _this5.state.quantityOfChildren[index] !== 0 ? React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 374\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 375\n            },\n            __self: this\n          }, item.title, \" \\xD7 \", _this5.state.quantityOfChildren[index]), React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 376\n            },\n            __self: this\n          }, \"\\u5546\\u54C1\\u603B\\u989D\\uFF1A$\", _this5.state.priceOfChildren[index])) : null);\n        });\n      }\n      /**\n       * The page content\n       */\n\n\n      if (this.state.item) {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 392\n          },\n          __self: this\n        }, React.createElement(SiteHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 393\n          },\n          __self: this\n        }), this.state.processPayment ? React.createElement(\"div\", {\n          className: \"App-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 395\n          },\n          __self: this\n        }, React.createElement(Gallery, {\n          src: this.state.voucher && this.state.voucher.url ? this.state.voucher.url : undefined,\n          show: this.state.showVoucher,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 396\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: styles.galleryButton,\n          onClick: function onClick(e) {\n            _this5.setState({\n              showVoucher: false\n            });\n\n            Router.push({\n              pathname: '/index',\n              query: _this5.state.itemId\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 397\n          },\n          __self: this\n        }, \"Cancel\")), React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 410\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 411\n          },\n          __self: this\n        }, \"\\u652F\\u4ED8\\u91D1\\u989D\", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 412\n          },\n          __self: this\n        }, \"\\u603B\\u8BA1\\uFF1A$\", this.state.totalPrice)), React.createElement(\"div\", {\n          className: \"payment-block-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 414\n          },\n          __self: this\n        }, checkoutLists, React.createElement(\"div\", {\n          style: {\n            fontSize: 24\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 416\n          },\n          __self: this\n        }, \"\\u603B\\u8BA1:\", React.createElement(\"span\", {\n          style: {\n            color: 'red'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 416\n          },\n          __self: this\n        }, \" $\", this.state.totalPrice)))), React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 420\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 421\n          },\n          __self: this\n        }, \"\\u8BF7\\u9009\\u62E9\\u652F\\u4ED8\\u65B9\\u5F0F:\"), React.createElement(Form, {\n          style: {\n            fontSize: 16\n          },\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 422\n          },\n          __self: this\n        }, this.state.item && this.state.item.online_payment == true ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 425\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 426\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 427\n          },\n          __self: this\n        }, \"\\u5FAE\\u4FE1\\u652F\\u4ED8\"), React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 428\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio1\",\n          value: \"OMIPAY_WECHAT\",\n          title: \"\\u5FAE\\u4FE1\\u652F\\u4ED8\",\n          onChange: this.handlePayment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 429\n          },\n          __self: this\n        })))) : React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 446\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 447\n          },\n          __self: this\n        }, \"\\u5230\\u5E97\\u652F\\u4ED8\"), React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 448\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio1\",\n          value: \"NoPayment\",\n          title: \"NoPayment\",\n          onChange: this.handlePayment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 449\n          },\n          __self: this\n        }))), this.state.payment_method == \"NoPayment\" ? React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 455\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 456\n          },\n          __self: this\n        }, \"\\u8BA2\\u5355\\u5DF2\\u786E\\u8BA4\\uFF0C\\u8BF7\\u5230\\u5E97\\u652F\\u4ED8\\u3002\")) : this.state.payment_name ? React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 460\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 461\n          },\n          __self: this\n        }, \"\\u4F7F\\u7528\", React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 461\n          },\n          __self: this\n        }, this.state.payment_name), \"\\u5B8C\\u6210\\u4EA4\\u6613\\u3002\\uFF08\\u63D0\\u793A\\uFF1A\\u8BF7\\u5728\", React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 461\n          },\n          __self: this\n        }, \"30\\u5206\\u949F\"), \"\\u5185\\u5B8C\\u6210\\u652F\\u4ED8\\uFF0C\\u5426\\u5219\\u8BA2\\u5355\\u4F1A\\u64A4\\u9500\\uFF09\")) : null)), this.state.showLocation ? React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 469\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 470\n          },\n          __self: this\n        }, \"\\u53D6\\u8D27\\u5730\\u70B9\"), React.createElement(Form, {\n          style: {\n            fontSize: 16\n          },\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 471\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 472\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 473\n          },\n          __self: this\n        }, this.state.item.children[0].locations[this.state.locationId].title), React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 474\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio2\",\n          defaultChecked: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 475\n          },\n          __self: this\n        }))))) : null, this.state.notes ? React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 484\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 485\n          },\n          __self: this\n        }, \"\\u5907\\u6CE8\"), React.createElement(\"div\", {\n          className: \"payment-block-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 486\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 487\n          },\n          __self: this\n        }, this.state.notes))) : null, React.createElement(\"div\", {\n          className: \"checkout-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 493\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"primary\",\n          onClick: function onClick() {\n            _this5.addJielong();\n          },\n          disabled: this.state.payment_method && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 494\n          },\n          __self: this\n        }, \"\\u786E\\u8BA4\\u8BA2\\u5355\"), React.createElement(Button, {\n          type: \"warn\",\n          onClick: function onClick() {\n            _this5.setState({\n              processPayment: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 500\n          },\n          __self: this\n        }, \"\\u53D6\\u6D88\"), React.createElement(Toast, {\n          icon: \"loading\",\n          show: this.state.showLoading,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 503\n          },\n          __self: this\n        }, \"Loading...\"))) : React.createElement(\"div\", {\n          className: \"App-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 506\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"checkout-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 507\n          },\n          __self: this\n        }, this.state.item.title), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 508\n          },\n          __self: this\n        }, React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 509\n          },\n          __self: this\n        }, \"\\u9009\\u62E9\\u4EA7\\u54C1\"), listItems, React.createElement(\"div\", {\n          className: \"total-price\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 511\n          },\n          __self: this\n        }, \"\\u603B\\u8BA1\\uFF1A\", React.createElement(\"span\", {\n          className: \"price-number\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 511\n          },\n          __self: this\n        }, \"$\", this.state.totalPrice))), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 513\n          },\n          __self: this\n        }, React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 514\n          },\n          __self: this\n        }, \"\\u53D6\\u8D27\\u5730\\u70B9* \"), React.createElement(Cells, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 515\n          },\n          __self: this\n        }, React.createElement(Cell, {\n          href: \"javascript:;\",\n          access: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 516\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          onClick: function onClick(e) {\n            return _this5.setState({\n              ios_show: true\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 517\n          },\n          __self: this\n        }, \"\\u5F53\\u524D\\u9009\\u62E9:\"), locationsList, React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 521\n          },\n          __self: this\n        })), this.state.showLocation ? React.createElement(\"div\", {\n          className: \"location\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 525\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"location-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 526\n          },\n          __self: this\n        }, \"\\u540D\\u79F0\\uFF1A\", this.state.item.company.pickup_locations[this.state.locationId].title), React.createElement(\"div\", {\n          className: \"location-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 528\n          },\n          __self: this\n        }, \"\\u4F4D\\u7F6E\\uFF1A\", this.state.item.company.pickup_locations[this.state.locationId].address.street), React.createElement(\"div\", {\n          className: \"location-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 530\n          },\n          __self: this\n        }, \"\\u63CF\\u8FF0\\uFF1A\", this.state.item.company.pickup_locations[this.state.locationId].description)) : null), React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 537\n          },\n          __self: this\n        }, \"\\u8054\\u7CFB\\u65B9\\u5F0F* \"), React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 538\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 539\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 540\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 541\n          },\n          __self: this\n        }, \"\\u59D3\\u540D\")), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 543\n          },\n          __self: this\n        }, React.createElement(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u59D3\\u540D\",\n          name: \"name\",\n          value: this.state.name,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 544\n          },\n          __self: this\n        }))), React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 548\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 549\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 550\n          },\n          __self: this\n        }, \"\\u8054\\u7CFB\\u65B9\\u5F0F\")), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 552\n          },\n          __self: this\n        }, React.createElement(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\",\n          name: \"contact_number\",\n          value: this.state.contact_number,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 553\n          },\n          __self: this\n        }))), React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 557\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 558\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 559\n          },\n          __self: this\n        }, \"\\u5730\\u5740\")), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 561\n          },\n          __self: this\n        }, React.createElement(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u5730\\u5740\",\n          name: \"address\",\n          value: this.state.address,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 562\n          },\n          __self: this\n        })))), React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 567\n          },\n          __self: this\n        }, \"\\u5907\\u6CE8\"), React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 568\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 569\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 570\n          },\n          __self: this\n        }, React.createElement(TextArea, {\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u6587\\u672C\",\n          rows: \"5\",\n          name: \"notes\",\n          value: this.state.notes,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 571\n          },\n          __self: this\n        })))), React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 576\n          },\n          __self: this\n        }, \"\\u79C1\\u5BC6\\u53C2\\u52A0\"), React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 577\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 578\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 579\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          switch: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 580\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 581\n          },\n          __self: this\n        }, \"\\u5F00\\u542F\\u540E\\u5C06\\u9690\\u85CF\\u60A8\\u7684\\u5934\\u50CF\"), React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 582\n          },\n          __self: this\n        }, React.createElement(Switch, {\n          onClick: this.switch,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 583\n          },\n          __self: this\n        })))))), React.createElement(\"div\", {\n          className: \"checkout-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 589\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"primary\",\n          onClick: function onClick() {\n            _this5.placeOrder();\n          },\n          disabled: this.state.totalPrice !== 0 && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 590\n          },\n          __self: this\n        }, \"\\u6211\\u8981\\u4E0B\\u5355\")))));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 603\n          },\n          __self: this\n        }, React.createElement(SiteHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 604\n          },\n          __self: this\n        }), React.createElement(LoadMore, {\n          loading: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 605\n          },\n          __self: this\n        }));\n      }\n    }\n  }]);\n\n  return checkoutPage;\n}(Component);\n\nvar styles = {\n  galleryButton: {\n    color: 'white',\n    fontWeight: 'bold',\n    padding: '0'\n  },\n  picker: {\n    textAlign: 'center',\n    fontSize: '18px',\n    height: '28px',\n    width: '60px',\n    borderRadius: '0',\n    border: 'none'\n  },\n  pickerButton: {\n    fontSize: '18px',\n    backgroundColor: '#efc929',\n    border: 'none',\n    width: '28px',\n    height: '28px',\n    borderRadius: '0'\n  }\n};\nexport default checkoutPage;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/checkoutPage.js"],"names":["React","Component","Button","TextArea","ActionSheet","Switch","Radio","Cells","CellsTitle","Cell","CellHeader","CellBody","CellFooter","Form","FormCell","Input","Label","LoadMore","Toast","Gallery","ItemService","JielongService","PaymentService","Head","Config","Router","Footer","SiteHeader","GiStrong","checkoutPage","props","setState","showLoading","id","state","itemId","configObj","params","comments","notes","config","item_url","item","location","company","pickup_locations","locationId","is_private","hideAvatar","quantity","state_redirect_obj","url","webAddress","voucher_base_url","wechat_auth_url","index","quantityOfChildren","length","undefined","push","item_id","children","price","priceOfChildren","toString","is_update","alert","jieLongId","userJieLongInfo","currentUserJieLong","updateJielong","then","response","json","responseJson","jielong","payment_method","generateVoucher","processPayment","catch","error","console","addJielong","item_comment_id","redirectUrl","getToPay","payment","window","open","pay_url","showLocation","ios_show","actions","label","onClick","hide","bind","name","contact_number","address","pickup_location","totalPrice","loadingTimer","showVoucher","handleChange","switch","handlePayment","handleQuantity","voucher","getIsInCurrentJieLong","event","target","value","Number","handleTotalPrice","log","payment_name","title","query","getItemDetail","clearTimeout","locationsList","map","e","listItems","images","styles","pickerButton","minus","picker","plus","locations","checkoutLists","galleryButton","pathname","fontSize","color","online_payment","street","description","placeOrder","fontWeight","padding","textAlign","height","width","borderRadius","border","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport {Button, TextArea, ActionSheet, Switch, Radio, Cells, CellsTitle, Cell, CellHeader, CellBody, CellFooter, Form, FormCell, Input, Label, LoadMore, Toast, Gallery} from 'react-weui';\nimport ItemService from '../service/ItemService';\nimport JielongService from '../service/JielongService';\nimport PaymentService from '../service/PaymentService'\n\n\n//import styles\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css';\n\n\n//import component\nimport Head from \"../components/head\";\nimport {Config} from \"../Config\";\nimport Router from \"next/dist/client/router\";\nimport Footer from \"../components/Footer\";\nimport SiteHeader from \"../components/Common/SiteHeader\";\nimport {GiStrong} from \"react-icons/gi\";\n\n\n\nclass checkoutPage extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            jielong: 'none',\n            payment: 'none',\n            processPayment: false,\n            showLocation: false,\n            ios_show: false,\n            actions: [\n                {\n                    label: '取消',\n                    onClick: this.hide.bind(this)\n                }\n            ],\n            quantity: 0,\n            itemId: '',\n            name:'',\n            contact_number: '',\n            address: '',\n            notes: '',\n            hideAvatar: true,\n            payment_method: null,\n            pickup_location: '',\n            quantityOfChildren: [],\n            priceOfChildren: [],\n            totalPrice: 0,\n            showLoading: false,\n            loadingTimer: null,\n            is_update: false,\n            showVoucher: false,\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.switch = this.switch.bind(this);\n        this.handlePayment = this.handlePayment.bind(this);\n        this.handleQuantity = this.handleQuantity.bind(this);\n    }\n\n    placeOrder() {\n        this.setState({\n            processPayment: true,\n        });\n    }\n\n    addJielong = () => {\n        this.setState({showLoading: true});\n        let id  = this.state.itemId;\n        let configObj = {};\n        let params = {\n            comments:this.state.notes,\n            config: JSON.stringify(configObj),\n            item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n            location: this.state.item.company.pickup_locations[this.state.locationId].id,\n            is_private: this.state.hideAvatar,\n            quantity: [\n            ],\n            state_redirect_obj: {\n                url: Config.webAddress,\n                // url: \"http://localhost:3000\",\n            },\n            voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n            wechat_auth_url: \"https://www.showmine66.com/a/wu?domain=https%253A%252F%252Fwww.showmine66.com&origurl=https%253A%252F%252Fwww.showmine66.com%252Fma%252Fi%252Fdbfcefa936b4cd6d5709953b5ea12673%2523app-top\"\n        };\n        for (let index = 0; index <= this.state.quantityOfChildren.length; index++) {\n            if (this.state.quantityOfChildren[index]!==null && this.state.quantityOfChildren[index]!== undefined) {\n                params.quantity.push({\n                    item_id: this.state.item.children[index].id,\n                    quantity: this.state.quantityOfChildren[index],\n                    price: this.state.priceOfChildren[index].toString(),\n                });\n            }\n        }\n        if (this.state.is_update) {\n            alert('params');\n            alert(JSON.stringify(params));\n            let jieLongId = this.state.userJieLongInfo.currentUserJieLong.id;\n            alert('id');\n            alert(jieLongId);\n            JielongService.updateJielong(params, jieLongId)\n                .then((response) => response.json())\n                .then((responseJson) => {\n                    this.setState({\n                        jielong: responseJson,\n                    });\n                    if(this.state.payment_method == \"NoPayment\") {\n                        this.generateVoucher();\n                    }\n                    else {\n                        this.processPayment();\n                    }\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        }\n        else {\n            JielongService.addJielong(params, id)\n                .then((response) => response.json())\n                .then((responseJson) => {\n                    this.setState({\n                        jielong: responseJson,\n                    });\n                    if(this.state.payment_method == \"NoPayment\") {\n                        this.generateVoucher();\n                    }\n                    else {\n                        this.processPayment();\n                    }\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        }\n    };\n\n    processPayment= () => {\n        // \"redirectUrl\": Config.webAddress + \"index?itemId=\" + this.state.jielong.item_id\n        let configObj = {\"source\":\"jielong_payment\", \"item_comment_id\": this.state.jielong.id, \"item_id\": this.state.jielong.item_id};\n        let params = {\n            config: JSON.stringify(configObj),\n            item_comment_id: this.state.jielong.id,\n            payment_method: this.state.payment_method,\n            redirectUrl: Config.webAddress + \"index?itemId=\" + this.state.jielong.item_id\n        };\n        PaymentService.getToPay(params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    payment: responseJson,\n                });\n                window.open(responseJson.pay_url,\"_self\");\n                this.setState({showLoading: false});\n            })\n            .catch((error) => {\n                console.error(error);\n                alert(error);\n            });\n    };\n\n    generateVoucher() {\n        let id = this.state.jielong.id;\n        let params = {\n            is_update: this.state.is_update,\n            item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n            voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n        };\n        JielongService.generateVoucher(params, id)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    voucher: responseJson,\n                    showLoading: false,\n                    showVoucher: true\n                });\n                // window.open(responseJson.url,\"_self\");\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    getIsInCurrentJieLong() {\n        let id = this.state.itemId;\n        JielongService.getIsInCurrentJieLong(id)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    userJieLongInfo: responseJson,\n                });\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    handleChange(event) {\n        this.setState({[event.target.name]: event.target.value});\n    }\n\n    handleTotalPrice() {\n        this.state.totalPrice = 0;\n        for(var index = 0; index <= this.state.priceOfChildren.length; index++) {\n            if (this.state.priceOfChildren[index]) {\n                this.state.totalPrice = this.state.totalPrice + this.state.priceOfChildren[index];\n            }\n        }\n        this.setState({\n            totalPrice: this.state.totalPrice,\n        })\n    }\n\n    handleQuantity(event) {\n        this.state.quantityOfChildren[event.target.name] = Number(event.target.value);\n        this.state.priceOfChildren[event.target.name] = this.state.quantityOfChildren[event.target.name] * this.state.item.children[event.target.name].price;\n        this.setState({\n            quantityOfChildren: this.state.quantityOfChildren,\n            priceOfChildren: this.state.priceOfChildren,\n        })\n        this.handleTotalPrice();\n\n    }\n\n    minus(index) {\n        if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index]===null || this.state.quantityOfChildren[index]===undefined || this.state.quantityOfChildren[index]===0 )\n        {\n            console.log('Cannot minus');\n        } else {\n            this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] - 1;\n            this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n            this.setState({\n                quantityOfChildren: this.state.quantityOfChildren,\n                priceOfChildren: this.state.priceOfChildren,\n            })\n            this.handleTotalPrice();\n\n        }\n    }\n\n    plus(index) {\n        if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index]===null || this.state.quantityOfChildren[index]===undefined)\n        {\n            this.state.quantityOfChildren[index] = 0;\n        }\n        this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] + 1;\n        this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n        this.setState({\n            quantityOfChildren: this.state.quantityOfChildren,\n            priceOfChildren: this.state.priceOfChildren,\n        })\n        this.handleTotalPrice();\n\n    }\n\n    handlePayment(event) {\n        this.setState({\n            payment_method: event.target.value,\n            payment_name: event.target.title,\n        })\n    }\n\n    switch(){\n        this.setState({hideAvatar: !this.state.hideAvatar});\n    }\n\n    hide(){\n        this.setState({\n            ios_show: false,\n        });\n    }\n\n    componentDidMount() {\n        let params = this.props.url.query.itemId;\n        if (this.props.url.query.is_update) {\n            this.setState({\n                is_update: this.props.url.query.is_update,\n            });\n            this.getIsInCurrentJieLong();\n        }\n        ItemService.getItemDetail(params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    item: responseJson,\n                    itemId: responseJson.id,\n                });\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    componentWillUnmount() {\n        this.state.loadingTimer && clearTimeout(this.state.loadingTimer);\n    }\n\n    render() {\n        /**\n         * Display the pickup locations list\n         */\n\n        let locationsList = null;\n        if (this.state.item) {\n            locationsList = this.state.item.company.pickup_locations.map((location, index) =>\n                <ActionSheet\n                    key={location.id}\n                    menus={\n                        [{\n                            label: location.title,\n                            onClick: ()=> {\n                                this.setState({\n                                        locationId: index,\n                                        showLocation: true,\n                                    }\n                                );\n                                this.hide();\n                            }\n                        },]\n                    }\n                    actions={this.state.actions}\n                    show={this.state.ios_show}\n                    type=\"ios\"\n                    onRequestClose={e=>this.setState({ios_show: false})}\n                />\n            );\n        }\n\n        /**\n         * Display children & handle the quantity for each one\n         */\n        let listItems = null;\n        if (this.state.item)\n        {\n            listItems = this.state.item.children.map((item, index) =>\n                <div key={index}>\n                    <div className='checkout-info'>\n                        {item.images[0] ?\n                            ( <div className='checkout-img'>\n                                <img height={150} width={150} src={item.images[0].url} role=\"presentation\"/>\n                            </div>)\n                            :\n                            null}\n\n                        <div className='checkout-content'>\n                            <div className='checkout-subtitle'>{item.title}</div>\n                            <div className='checkout-price'>${item.price}</div>\n                            <div className=\"Number-Picker\">\n                                <button style={styles.pickerButton} onClick={() => {this.minus(index);}}> － </button>\n                                <input style={styles.picker} type=\"number\" min=\"0\" max=\"1000\" name={index}\n                                       value={this.state.quantityOfChildren[index]?this.state.quantityOfChildren[index]:0}\n                                       onChange={this.handleQuantity}/>\n                                <button style={styles.pickerButton} onClick={() => {this.plus(index);}}> ＋ </button>\n                            </div>\n                        </div>\n                    </div>\n                    <div className='location-tag'>{item.locations[0].title}</div>\n                    <div className='divider'/>\n                </div>\n\n            );\n        }\n\n        /**\n         * Display children & quantity for the checkout\n         */\n        let checkoutLists = null;\n        if (this.state.item)\n        {\n            checkoutLists = this.state.item.children.map((item, index) =>\n                <div key={item.id}>\n                    {this.state.quantityOfChildren[index] && this.state.quantityOfChildren[index] !== 0 ?\n                        <div>\n                            <div>{item.title} × {this.state.quantityOfChildren[index]}</div>\n                            <div>商品总额：${this.state.priceOfChildren[index]}</div>\n                        </div>\n                        :\n                        null\n                    }\n\n                </div>\n            );\n        }\n\n        /**\n         * The page content\n         */\n\n        if (this.state.item) {\n            return (\n                <div className=\"App\">\n                    <SiteHeader/>\n                    {this.state.processPayment ?\n                        <div className='App-body'>\n                            <Gallery src={this.state.voucher && this.state.voucher.url ? this.state.voucher.url : undefined} show={this.state.showVoucher}>\n                                <div\n                                    style={styles.galleryButton}\n                                    onClick={e=>{\n                                        this.setState({ showVoucher: false});\n                                        Router.push({\n                                            pathname: '/index',\n                                            query: this.state.itemId,\n                                        });\n                                    }}\n                                >\n                                    Cancel\n                                </div>\n                            </Gallery>\n                            <div className='payment-block'>\n                                <div\n                                    className='payment-block-title'>支付金额<span>总计：${this.state.totalPrice}</span>\n                                </div>\n                                <div className='payment-block-content'>\n                                    {checkoutLists}\n                                    <div style={{fontSize: 24}}>总计:<span style={{color: 'red'}}> ${this.state.totalPrice}</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className='payment-block'>\n                                <div className='payment-block-title'>请选择支付方式:</div>\n                                <Form style={{fontSize: 16}} radio>\n\n                                    {this.state.item && this.state.item.online_payment == true ?\n                                        (<div>\n                                            <FormCell radio>\n                                                <CellBody>微信支付</CellBody>\n                                                <CellFooter>\n                                                    <Radio name='radio1' value=\"OMIPAY_WECHAT\" title=\"微信支付\" onChange={this.handlePayment}/>\n                                                </CellFooter>\n                                            </FormCell>\n                                            {/*<FormCell radio>*/}\n                                            {/*    <CellBody>银行卡支付</CellBody>*/}\n                                            {/*    <CellFooter>*/}\n                                            {/*        <Radio name=\"radio1\" value=\"银行卡支付\" title=\"银行卡支付\" onChange={this.handlePayment}/>*/}\n                                            {/*    </CellFooter>*/}\n                                            {/*</FormCell>*/}\n                                            {/*<FormCell radio>*/}\n                                            {/*    <CellBody>PayPal支付</CellBody>*/}\n                                            {/*    <CellFooter>*/}\n                                            {/*        <Radio name=\"radio1\" value=\"PayPal支付\" title=\"PayPal支付\" onChange={this.handlePayment}/>*/}\n                                            {/*    </CellFooter>*/}\n                                            {/*</FormCell>*/}\n                                        </div>)\n                                        :\n                                        <FormCell radio>\n                                            <CellBody>到店支付</CellBody>\n                                            <CellFooter>\n                                                <Radio name=\"radio1\" value=\"NoPayment\" title=\"NoPayment\" onChange={this.handlePayment}/>\n                                            </CellFooter>\n                                        </FormCell>\n                                    }\n\n                                    {this.state.payment_method == \"NoPayment\" ?\n                                        <FormCell>\n                                            <CellBody>订单已确认，请到店支付。</CellBody>\n                                        </FormCell>\n                                        :\n                                        this.state.payment_name ?\n                                            <FormCell>\n                                                <CellBody>使用<strong>{this.state.payment_name}</strong>完成交易。（提示：请在<strong>30分钟</strong>内完成支付，否则订单会撤销）</CellBody>\n                                            </FormCell>\n                                            : null\n                                    }\n\n                                </Form>\n                            </div>\n                            {this.state.showLocation ?\n                                <div className='payment-block'>\n                                    <div className='payment-block-title'>取货地点</div>\n                                    <Form style={{fontSize: 16}} radio>\n                                        <FormCell radio>\n                                            <CellBody>{this.state.item.children[0].locations[this.state.locationId].title}</CellBody>\n                                            <CellFooter>\n                                                <Radio name=\"radio2\" defaultChecked/>\n                                            </CellFooter>\n                                        </FormCell>\n                                    </Form>\n                                </div>\n                                :\n                                null\n                            }\n                            {this.state.notes ?\n                                <div className='payment-block'>\n                                    <div className='payment-block-title'>备注</div>\n                                    <div className='payment-block-content'>\n                                        <p>{this.state.notes}</p>\n                                    </div>\n                                </div>\n                                :\n                                null\n                            }\n                            <div className='checkout-button'>\n                                <Button type=\"primary\" onClick={() => {\n                                    this.addJielong();\n                                }}\n                                        disabled={this.state.payment_method && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true}>\n                                    确认订单\n                                </Button>\n                                <Button type=\"warn\" onClick={() => {this.setState({processPayment: false})}}>\n                                    取消\n                                </Button>\n                                <Toast icon=\"loading\" show={this.state.showLoading}>Loading...</Toast>\n                            </div>\n                        </div> :\n                        <div className='App-body'>\n                            <div className='checkout-title'>{this.state.item.title}</div>\n                            <div>\n                                <CellsTitle>选择产品</CellsTitle>\n                                {listItems}\n                                <div className='total-price'>总计：<span className='price-number'>${this.state.totalPrice}</span></div>\n                            </div>\n                            <div>\n                                <CellsTitle>取货地点* </CellsTitle>\n                                <Cells>\n                                    <Cell href=\"javascript:;\" access>\n                                        <CellBody onClick={e => this.setState({ios_show: true})}>\n                                            当前选择:\n                                        </CellBody>\n                                        {locationsList}\n                                        <CellFooter/>\n                                    </Cell>\n                                    {\n                                        this.state.showLocation ?\n                                            <div className='location'>\n                                                <div\n                                                    className='location-label'>名称：{this.state.item.company.pickup_locations[this.state.locationId].title}</div>\n                                                <div\n                                                    className='location-label'>位置：{this.state.item.company.pickup_locations[this.state.locationId].address.street}</div>\n                                                <div\n                                                    className='location-label'>描述：{this.state.item.company.pickup_locations[this.state.locationId].description}</div>\n                                            </div>\n                                            :\n                                            null\n                                    }\n                                </Cells>\n                                <CellsTitle>联系方式* </CellsTitle>\n                                <Form>\n                                    <FormCell>\n                                        <CellHeader>\n                                            <Label>姓名</Label>\n                                        </CellHeader>\n                                        <CellBody>\n                                            <Input type=\"text\" placeholder=\"请输入姓名\" name='name' value={this.state.name}\n                                                   onChange={this.handleChange}/>\n                                        </CellBody>\n                                    </FormCell>\n                                    <FormCell>\n                                        <CellHeader>\n                                            <Label>联系方式</Label>\n                                        </CellHeader>\n                                        <CellBody>\n                                            <Input type=\"text\" placeholder=\"请输入手机号\" name='contact_number'\n                                                   value={this.state.contact_number} onChange={this.handleChange}/>\n                                        </CellBody>\n                                    </FormCell>\n                                    <FormCell>\n                                        <CellHeader>\n                                            <Label>地址</Label>\n                                        </CellHeader>\n                                        <CellBody>\n                                            <Input type=\"text\" placeholder=\"请输入地址\" name='address'\n                                                   value={this.state.address} onChange={this.handleChange}/>\n                                        </CellBody>\n                                    </FormCell>\n                                </Form>\n                                <CellsTitle>备注</CellsTitle>\n                                <Form>\n                                    <FormCell>\n                                        <CellBody>\n                                            <TextArea placeholder=\"请输入文本\" rows=\"5\" name='notes' value={this.state.notes}\n                                                      onChange={this.handleChange}></TextArea>\n                                        </CellBody>\n                                    </FormCell>\n                                </Form>\n                                <CellsTitle>私密参加</CellsTitle>\n                                <Form>\n                                    <FormCell>\n                                        <CellBody>\n                                            <FormCell switch>\n                                                <CellBody>开启后将隐藏您的头像</CellBody>\n                                                <CellFooter>\n                                                    <Switch onClick={this.switch}/>\n                                                </CellFooter>\n                                            </FormCell>\n                                        </CellBody>\n                                    </FormCell>\n                                </Form>\n                                <div className='checkout-button'>\n                                    <Button type=\"primary\" onClick={() => {this.placeOrder();}}\n                                            disabled={this.state.totalPrice !== 0 && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true}>\n                                        我要下单\n                                    </Button>\n                                </div>\n                            </div>\n                        </div>\n                    }\n                </div>\n            );\n        }\n        else {\n            return (\n                <div className=\"App\">\n                    <SiteHeader/>\n                    <LoadMore loading></LoadMore>\n                </div>\n            );\n        }\n    }\n}\n\nconst styles = {\n    galleryButton: {\n        color: 'white',\n        fontWeight:'bold',\n        padding: '0',\n    },\n    picker:{\n        textAlign: 'center',\n        fontSize: '18px',\n        height: '28px',\n        width: '60px',\n        borderRadius: '0',\n        border: 'none',\n    },\n    pickerButton: {\n        fontSize: '18px',\n        backgroundColor: '#efc929',\n        border: 'none',\n        width: '28px',\n        height: '28px',\n        borderRadius: '0',\n    }\n}\n\nexport default checkoutPage;\n"]},"metadata":{},"sourceType":"module"}