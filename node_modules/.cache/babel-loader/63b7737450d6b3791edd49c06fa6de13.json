{"ast":null,"code":"import _Object$values from \"@babel/runtime-corejs2/core-js/object/values\";\nimport _getIterator from \"@babel/runtime-corejs2/core-js/get-iterator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM_React/shm-react/my-app/components/ItemDetails/RegistrationDetails/RegistrationFields.js\";\nimport React, { Component } from 'react';\nimport Colors from \"../../../constants/Colors\";\nimport { Button, TextArea, ActionSheet, Switch, Radio, Cells, CellsTitle, Cell, CellHeader, CellBody, CellFooter, Form, FormCell, Input, Label } from 'react-weui';\n\nvar RegistrationFields =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RegistrationFields, _Component);\n\n  function RegistrationFields(props) {\n    var _this;\n\n    _classCallCheck(this, RegistrationFields);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RegistrationFields).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"initFormTemplate\", function () {\n      var tmpConfig = JSON.parse(_this.state.config);\n      var tmpFormValues = {};\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = _getIterator(tmpConfig.inputFields), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var field = _step.value;\n          tmpFormValues[field.title] = _defineProperty({}, field.title, '');\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      _this.setState({\n        formValues: tmpFormValues\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"extractFieldsFromConfig\", function () {\n      var tmpConfig = JSON.parse(_this.state.config);\n\n      _this.setState({\n        inputFields: tmpConfig.inputFields ? tmpConfig.inputFields : undefined\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (event) {\n      var formValues = _this.state.formValues;\n      formValues[event.target.name] = _defineProperty({}, event.target.name, event.target.value);\n\n      _this.setState({\n        formArray: _Object$values(formValues)\n      }, function () {\n        _this.state.callbackUpdateForm(_this.state.formArray);\n      });\n    });\n\n    _this.state = {\n      callbackUpdateForm: _this.props.callbackUpdateForm,\n      config: _this.props.item.config,\n      isParticipated: _this.props.isParticipated,\n      formValues: {},\n      formArray: []\n    };\n    return _this;\n  }\n\n  _createClass(RegistrationFields, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.extractFieldsFromConfig();\n      this.initFormTemplate();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps, nextContext) {\n      this.setState({\n        isParticipated: nextProps.isParticipated\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          inputFields = _this$state.inputFields,\n          isParticipated = _this$state.isParticipated;\n\n      if (inputFields && inputFields.length > 0 && isParticipated) {\n        return React.createElement(\"div\", {\n          style: styles.formWrapper,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, inputFields.map(function (field, index) {\n          var type = field.type,\n              title = field.title;\n          return React.createElement(\"div\", {\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 65\n            },\n            __self: this\n          }, React.createElement(CellsTitle, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 66\n            },\n            __self: this\n          }, field.title), React.createElement(Form, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67\n            },\n            __self: this\n          }, React.createElement(FormCell, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 68\n            },\n            __self: this\n          }, React.createElement(CellBody, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 69\n            },\n            __self: this\n          }, type === 'input' ? React.createElement(Input, {\n            type: \"text\",\n            name: title,\n            onChange: _this2.handleChange,\n            placeholder: '请输入' + title,\n            style: styles.inputField,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72\n            },\n            __self: this\n          }) : React.createElement(TextArea, {\n            rows: \"3\",\n            name: title,\n            style: styles.inputField,\n            onChange: _this2.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79\n            },\n            __self: this\n          })))));\n        }));\n      } else return null;\n    }\n  }]);\n\n  return RegistrationFields;\n}(Component);\n\nvar styles = {\n  formWrapper: {\n    backgroundColor: Colors.formBackground\n  },\n  inputField: {\n    fontSize: '14px'\n  }\n};\nexport default RegistrationFields;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM_React/shm-react/my-app/components/ItemDetails/RegistrationDetails/RegistrationFields.js"],"names":["React","Component","Colors","Button","TextArea","ActionSheet","Switch","Radio","Cells","CellsTitle","Cell","CellHeader","CellBody","CellFooter","Form","FormCell","Input","Label","RegistrationFields","props","tmpConfig","JSON","parse","state","config","tmpFormValues","inputFields","field","title","setState","formValues","undefined","event","target","name","value","formArray","callbackUpdateForm","item","isParticipated","extractFieldsFromConfig","initFormTemplate","nextProps","nextContext","length","styles","formWrapper","map","index","type","handleChange","inputField","backgroundColor","formBackground","fontSize"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,2BAAnB;AACA,SAASC,MAAT,EAAiBC,QAAjB,EAA2BC,WAA3B,EAAwCC,MAAxC,EAAgDC,KAAhD,EAAuDC,KAAvD,EAA8DC,UAA9D,EAA0EC,IAA1E,EAAgFC,UAAhF,EAA4FC,QAA5F,EAAsGC,UAAtG,EAAkHC,IAAlH,EAAwHC,QAAxH,EAAkIC,KAAlI,EAAyIC,KAAzI,QAAsJ,YAAtJ;;IAEMC,kB;;;;;AACF,8BAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,4FAAMA,KAAN;;AADc,uEAsBC,YAAM;AACrB,UAAIC,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAW,MAAKC,KAAL,CAAWC,MAAtB,CAAhB;AACA,UAAIC,aAAa,GAAG,EAApB;AAFqB;AAAA;AAAA;;AAAA;AAGrB,0CAAkBL,SAAS,CAACM,WAA5B,4GAAyC;AAAA,cAAhCC,KAAgC;AACrCF,UAAAA,aAAa,CAACE,KAAK,CAACC,KAAP,CAAb,uBAAgCD,KAAK,CAACC,KAAtC,EAA8C,EAA9C;AACH;AALoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMrB,YAAKC,QAAL,CAAc;AACVC,QAAAA,UAAU,EAAEL;AADF,OAAd;AAGH,KA/BiB;;AAAA,8EAiCQ,YAAM;AAC5B,UAAIL,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAW,MAAKC,KAAL,CAAWC,MAAtB,CAAhB;;AACA,YAAKK,QAAL,CAAc;AACVH,QAAAA,WAAW,EAAEN,SAAS,CAACM,WAAV,GAAwBN,SAAS,CAACM,WAAlC,GAAgDK;AADnD,OAAd;AAGH,KAtCiB;;AAAA,mEAwCH,UAAAC,KAAK,EAAI;AAAA,UACdF,UADc,GACC,MAAKP,KADN,CACdO,UADc;AAEpBA,MAAAA,UAAU,CAACE,KAAK,CAACC,MAAN,CAAaC,IAAd,CAAV,uBAAmCF,KAAK,CAACC,MAAN,CAAaC,IAAhD,EAAuDF,KAAK,CAACC,MAAN,CAAaE,KAApE;;AACA,YAAKN,QAAL,CAAc;AACVO,QAAAA,SAAS,EAAE,eAAcN,UAAd;AADD,OAAd,EAEG,YAAI;AAAE,cAAKP,KAAL,CAAWc,kBAAX,CAA8B,MAAKd,KAAL,CAAWa,SAAzC;AACR,OAHD;AAIH,KA/CiB;;AAEd,UAAKb,KAAL,GAAa;AACTc,MAAAA,kBAAkB,EAAE,MAAKlB,KAAL,CAAWkB,kBADtB;AAETb,MAAAA,MAAM,EAAE,MAAKL,KAAL,CAAWmB,IAAX,CAAgBd,MAFf;AAGTe,MAAAA,cAAc,EAAE,MAAKpB,KAAL,CAAWoB,cAHlB;AAITT,MAAAA,UAAU,EAAE,EAJH;AAKTM,MAAAA,SAAS,EAAE;AALF,KAAb;AAFc;AASjB;;;;wCAEmB;AAChB,WAAKI,uBAAL;AACA,WAAKC,gBAAL;AACH;;;8CAEyBC,S,EAAWC,W,EAAa;AAC9C,WAAKd,QAAL,CAAc;AACVU,QAAAA,cAAc,EAAEG,SAAS,CAACH;AADhB,OAAd;AAGH;;;6BA8BO;AAAA;;AAAA,wBACoC,KAAKhB,KADzC;AAAA,UACIG,WADJ,eACIA,WADJ;AAAA,UACiBa,cADjB,eACiBA,cADjB;;AAEJ,UAAIb,WAAW,IAAIA,WAAW,CAACkB,MAAZ,GAAqB,CAApC,IAAyCL,cAA7C,EAA6D;AACzD,eACI;AAAK,UAAA,KAAK,EAAEM,MAAM,CAACC,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAEQpB,WAAW,CAACqB,GAAZ,CAAgB,UAACpB,KAAD,EAAQqB,KAAR,EAAkB;AAAA,cACxBC,IADwB,GACRtB,KADQ,CACxBsB,IADwB;AAAA,cAClBrB,KADkB,GACRD,KADQ,CAClBC,KADkB;AAE9B,iBACI;AAAK,YAAA,GAAG,EAAGoB,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAcrB,KAAK,CAACC,KAApB,CADJ,EAEI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAEQqB,IAAI,KAAK,OAAT,GACI,oBAAC,KAAD;AACI,YAAA,IAAI,EAAC,MADT;AAEI,YAAA,IAAI,EAAGrB,KAFX;AAGI,YAAA,QAAQ,EAAG,MAAI,CAACsB,YAHpB;AAII,YAAA,WAAW,EAAG,QAAQtB,KAJ1B;AAKI,YAAA,KAAK,EAAGiB,MAAM,CAACM,UALnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,GAQI,oBAAC,QAAD;AAAU,YAAA,IAAI,EAAC,GAAf;AACU,YAAA,IAAI,EAAGvB,KADjB;AAEU,YAAA,KAAK,EAAGiB,MAAM,CAACM,UAFzB;AAGU,YAAA,QAAQ,EAAG,MAAI,CAACD,YAH1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAVZ,CADJ,CADJ,CAFJ,CADJ;AAyBH,SA3BD,CAFR,CADJ;AAkCH,OAnCD,MAoCK,OAAO,IAAP;AACR;;;;EA1F4BjD,S;;AA6FjC,IAAM4C,MAAM,GAAG;AACXC,EAAAA,WAAW,EAAE;AACTM,IAAAA,eAAe,EAAElD,MAAM,CAACmD;AADf,GADF;AAIXF,EAAAA,UAAU,EAAE;AACRG,IAAAA,QAAQ,EAAE;AADF;AAJD,CAAf;AASA,eAAepC,kBAAf","sourcesContent":["import React, { Component } from 'react'\nimport Colors from \"../../../constants/Colors\"\nimport { Button, TextArea, ActionSheet, Switch, Radio, Cells, CellsTitle, Cell, CellHeader, CellBody, CellFooter, Form, FormCell, Input, Label } from 'react-weui'\n\nclass RegistrationFields extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            callbackUpdateForm: this.props.callbackUpdateForm,\n            config: this.props.item.config,\n            isParticipated: this.props.isParticipated,\n            formValues: {},\n            formArray: []\n        }\n    }\n\n    componentDidMount() {\n        this.extractFieldsFromConfig()\n        this.initFormTemplate()\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        this.setState({\n            isParticipated: nextProps.isParticipated\n        })\n    }\n\n    initFormTemplate = () => {\n        let tmpConfig = JSON.parse(this.state.config)\n        let tmpFormValues = {}\n        for (let field of tmpConfig.inputFields) {\n            tmpFormValues[field.title] = { [field.title]: '' }\n        }\n        this.setState({\n            formValues: tmpFormValues\n        })\n    }\n\n    extractFieldsFromConfig = () => {\n        let tmpConfig = JSON.parse(this.state.config)\n        this.setState({\n            inputFields: tmpConfig.inputFields ? tmpConfig.inputFields : undefined\n        })\n    }\n\n    handleChange = event => {\n        let { formValues } = this.state\n        formValues[event.target.name] = { [event.target.name]: event.target.value }\n        this.setState({\n            formArray: Object.values(formValues)\n        }, ()=>{ this.state.callbackUpdateForm(this.state.formArray)\n        })\n    }\n\n\n    render(){\n        const { inputFields, isParticipated } = this.state\n        if (inputFields && inputFields.length > 0 && isParticipated) {\n            return (\n                <div style={styles.formWrapper}>\n                    {\n                        inputFields.map((field, index) => {\n                            let { type, title } = field\n                            return (\n                                <div key={ index } >\n                                    <CellsTitle>{ field.title }</CellsTitle>\n                                    <Form>\n                                        <FormCell>\n                                            <CellBody>\n                                                {\n                                                    type === 'input' ?\n                                                        <Input\n                                                            type=\"text\"\n                                                            name={ title }\n                                                            onChange={ this.handleChange }\n                                                            placeholder={ '请输入' + title }\n                                                            style={ styles.inputField }/>\n                                                        :\n                                                        <TextArea rows=\"3\"\n                                                                  name={ title }\n                                                                  style={ styles.inputField }\n                                                                  onChange={ this.handleChange }/>\n                                                }\n                                            </CellBody>\n                                        </FormCell>\n                                    </Form>\n                                </div>\n                            )\n                        })\n                    }\n                </div>\n            )\n        }\n        else return null\n    }\n}\n\nconst styles = {\n    formWrapper: {\n        backgroundColor: Colors.formBackground\n    },\n    inputField: {\n        fontSize: '14px'\n    }\n}\n\nexport default RegistrationFields\n\n"]},"metadata":{},"sourceType":"module"}