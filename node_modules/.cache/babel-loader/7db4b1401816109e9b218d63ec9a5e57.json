{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/loginPage.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Button, CellHeader, CellBody, Form, FormCell, Input, Label } from 'react-weui';\nimport Router from 'next/router';\nimport Map from '../components/Map'; //import styles\n\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css'; //import component\n\nimport Head from \"../components/head\";\nimport AuthService from \"../service/AuthService\";\n\nvar loginPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(loginPage, _Component);\n\n  function loginPage(props) {\n    var _this;\n\n    _classCallCheck(this, loginPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(loginPage).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"login\", function () {\n      // localStorage.setItem('userToken', '365eeb8f4f860fbcd7bd64958fd76168');\n      localStorage.setItem('userToken', 'a8fae072e4c86bfa035486847bebc257');\n\n      _this.getMe(); // Router.push({\n      //     pathname: '/index?companyId=fe89709d0cc71bcede3c41448f9baa3c',\n      // });\n\n    });\n\n    _this.state = {\n      email: '',\n      password: ''\n    };\n    return _this;\n  }\n\n  _createClass(loginPage, [{\n    key: \"wechatlogin\",\n    value: function wechatlogin() {\n      var origUrl = \"http://localhost:3000/index\";\n      var authUrl = \"http://localhost:3000/AuthPage\";\n      var params = {};\n      AuthService.wechatLogin(origUrl, authUrl, params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        console.log(responseJson);\n        window.open(responseJson.auth_url, \"_self\");\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"showVoucher\",\n    value: function showVoucher() {\n      this.getMe();\n    }\n  }, {\n    key: \"getMe\",\n    value: function getMe() {\n      var params = {};\n      AuthService.getMe(params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        console.log(responseJson);\n        localStorage.setItem('userObject', response);\n        console.log(_JSON$stringify(localStorage.getItem('userObject')));\n      }) // .then(() => {\n      //     alert(this.props.url.query.origUrl);\n      //     window.open('www.google.com');\n      // })\n      .catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"App-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(Head, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"meta\", {\n        name: \"viewport\",\n        content: \"initial-scale=1.0, width=device-width\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      })), React.createElement(\"header\", {\n        className: \"App-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"ShowMine\")), React.createElement(\"div\", {\n        className: \"App-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          padding: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"\\u5FAE\\u4FE1\\u767B\\u5F55\"), React.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        height: 300,\n        src: \"../static/assets/qrcode-new.jpg\",\n        role: \"presentation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })), React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(FormCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(CellHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Email\")), React.createElement(CellBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"email\",\n        placeholder: \"username@abc.com\",\n        onClick: function onClick(text) {\n          _this2.handleEmail(text);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }))), React.createElement(FormCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(CellHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Password\")), React.createElement(CellBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"password\",\n        placeholder: \"123456\",\n        onClick: function onClick(text) {\n          _this2.handlePsw(text);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      })))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }), React.createElement(Button, {\n        type: \"primary\",\n        className: \"button\",\n        onClick: function onClick() {\n          _this2.login();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Log in\"), React.createElement(Button, {\n        type: \"primary\",\n        className: \"button\",\n        onClick: function onClick() {\n          _this2.wechatlogin();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Wechat Login\"), React.createElement(Button, {\n        plain: true,\n        className: \"button\",\n        style: styles.test,\n        onClick: function onClick() {\n          _this2.showVoucher();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Show Voucher\")), React.createElement(Map, {\n        address: \"Factory 108/45 Gilby Rd, Mount Waverley VIC 3149\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return loginPage;\n}(Component);\n\nvar styles = {\n  test: {\n    color: 'red',\n    border: 'solid',\n    borderWidth: '1px',\n    borderColor: 'red'\n  },\n  img: {\n    width: '100%',\n    height: '30vw',\n    objectFit: 'cover'\n  }\n};\nexport default loginPage;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/loginPage.js"],"names":["React","Component","Button","CellHeader","CellBody","Form","FormCell","Input","Label","Router","Map","Head","AuthService","loginPage","props","localStorage","setItem","getMe","state","email","password","origUrl","authUrl","params","wechatLogin","then","response","json","responseJson","console","log","window","open","auth_url","catch","error","getItem","padding","textAlign","text","handleEmail","handlePsw","login","wechatlogin","styles","test","showVoucher","color","border","borderWidth","borderColor","img","width","height","objectFit"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport { Button, CellHeader, CellBody, Form, FormCell, Input, Label} from'react-weui';\nimport Router from 'next/router';\nimport Map from '../components/Map';\n\n\n\n//import styles\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css';\n\n\n//import component\nimport Head from \"../components/head\";\nimport AuthService from \"../service/AuthService\";\n\n\n\nclass loginPage extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            email: '',\n            password: '',\n        };\n    }\n\n    login = () => {\n        // localStorage.setItem('userToken', '365eeb8f4f860fbcd7bd64958fd76168');\n        localStorage.setItem('userToken', 'a8fae072e4c86bfa035486847bebc257');\n        this.getMe();\n        // Router.push({\n        //     pathname: '/index?companyId=fe89709d0cc71bcede3c41448f9baa3c',\n        // });\n    };\n\n    wechatlogin() {\n        let origUrl =\"http://localhost:3000/index\";\n        let authUrl =\"http://localhost:3000/AuthPage\";\n\n        let params ={};\n        AuthService.wechatLogin(origUrl, authUrl, params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                console.log(responseJson);\n                window.open(responseJson.auth_url, \"_self\");\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n\n\n    showVoucher() {\n        this.getMe();\n    }\n\n    getMe() {\n        let params = {};\n        AuthService.getMe(params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                console.log(responseJson);\n                localStorage.setItem('userObject', response);\n                console.log(JSON.stringify(localStorage.getItem('userObject')));\n            })\n            // .then(() => {\n            //     alert(this.props.url.query.origUrl);\n            //     window.open('www.google.com');\n            // })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n\n\n\n    render() {\n\n        return (\n            <div className=\"App-body\">\n                <Head>\n                    <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\" />\n                </Head>\n                <header className=\"App-header\">\n                    <div>\n                        ShowMine\n                    </div>\n                </header>\n                <div className='App-body'>\n                    <div style={{padding: 20}}>\n                        <h1 style={{textAlign: 'center'}}>微信登录</h1>\n                        <div style={{textAlign: 'center'}}>\n                            <img height={300} src='../static/assets/qrcode-new.jpg' role=\"presentation\" />\n                        </div>\n                        <Form>\n                            <FormCell>\n                                <CellHeader>\n                                    <Label>Email</Label>\n                                </CellHeader>\n                                <CellBody>\n                                    <Input type=\"email\" placeholder=\"username@abc.com\" onClick={(text)=>{this.handleEmail(text)}}/>\n                                </CellBody>\n                            </FormCell>\n                            <FormCell>\n                                <CellHeader>\n                                    <Label>Password</Label>\n                                </CellHeader>\n                                <CellBody>\n                                    <Input type=\"password\" placeholder=\"123456\" onClick={(text)=>{this.handlePsw(text)}}/>\n                                </CellBody>\n                            </FormCell>\n                        </Form>\n                        <br/>\n                        <Button type=\"primary\" className='button' onClick={()=>{this.login();}}>Log in</Button>\n                        <Button type=\"primary\" className='button' onClick={()=>{this.wechatlogin();}}>Wechat Login</Button>\n                        <Button plain className='button' style={styles.test} onClick={()=>{this.showVoucher();}}>Show Voucher</Button>\n                    </div>\n                    <Map address='Factory 108/45 Gilby Rd, Mount Waverley VIC 3149'/>\n                </div>\n            </div>\n\n        );\n    }\n}const styles = {\n    test: {\n        color: 'red',\n        border: 'solid',\n        borderWidth: '1px',\n        borderColor: 'red'\n    },\n    img: {\n        width: '100%',\n        height: '30vw',\n        objectFit: 'cover'\n    },\n};\n\nexport default loginPage;\n\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}