{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM/react/shm-react/my-app/components/ItemDetails/ArticleDetails/ArticleContent.js\";\nimport React, { Component } from 'react';\nimport Colors from '../../../constants/Colors';\nimport { LoadMore } from 'react-weui';\nimport Link from 'next/link';\nimport moment from 'moment';\nimport $ from 'jquery';\nimport { Helmet } from 'react-helmet';\nimport SubscribeBtn from '../../Common/SubscribeBtn';\n\nvar ArticleContent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ArticleContent, _Component);\n\n  _createClass(ArticleContent, [{\n    key: \"formatRawContent\",\n    get: function get() {\n      return this._formatRawContent;\n    }\n  }]);\n\n  function ArticleContent(props) {\n    var _this;\n\n    _classCallCheck(this, ArticleContent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ArticleContent).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"_formatRawContent\", function (content) {\n      return content.replace(/<img([^>]*)\\ssrc=['\"]([^\"\\s]+)['\"]([^>]*)>/g, \"<img width=\\\"100%\\\" src='$2' style=\\\"margin: 15px 0px -5px 0px\\\" />\");\n    });\n\n    return _this;\n  }\n\n  _createClass(ArticleContent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var component = this;\n      var adImage = JSON.parse(component.props.articleDetail.company.config).defaultContact;\n      $('img').click(function (event) {\n        var targetImage = event.target.src;\n        var urls = [];\n        var match = undefined;\n        var regex = /<img([^>]*)\\ssrc=['\"]([^\"\\s]+)['\"]([^>]*)>/g;\n\n        while (match = regex.exec(component.props.articleDetail.description + adImage)) {\n          urls.push(match[2]);\n        }\n\n        wx.previewImage({\n          current: event.target.src,\n          // 当前显示图片的http链接\n          urls: urls // 需要预览的图片http链接列表\n\n        });\n      });\n    }\n  }, {\n    key: \"handleClick\",\n    //redirect to author link\n    value: function handleClick() {\n      var articleDetail = this.props.articleDetail ? this.props.articleDetail : undefined;\n      var formattedConfig = articleDetail && articleDetail.config ? JSON.parse(articleDetail.config) : {};\n      var authorLink = formattedConfig && formattedConfig.authorLinks ? formattedConfig.authorLinks : undefined;\n      var url = authorLink.trim();\n\n      if (url.substr(0, 7).toLowerCase() == \"http://\" || url.substr(0, 8).toLowerCase() == \"https://\") {\n        url = url;\n      } else {\n        url = \"http://\" + url;\n      }\n\n      window.location.assign(url);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var articleDetail = this.props.articleDetail ? this.props.articleDetail : undefined;\n      var isLogin = this.props.isLogin ? this.props.isLogin : undefined;\n      var formattedConfig = articleDetail && articleDetail.config ? JSON.parse(articleDetail.config) : {};\n      var author = articleDetail.author && articleDetail.author > '' ? articleDetail.author : undefined;\n      var writer = formattedConfig.writer && formattedConfig.writer > '' ? formattedConfig.writer : undefined;\n      var formattedContent = articleDetail && articleDetail.description ? this._formatRawContent(articleDetail.description) : '';\n      var localDateCreated = moment(moment.utc(articleDetail.date_publish)).local().format(\"YYYY-MM-DD HH:mm\");\n      var defaultContact = formattedConfig.ifShowCompanyContact && JSON.parse(articleDetail.company.config).defaultContact > '' ? JSON.parse(articleDetail.company.config).defaultContact : {};\n      var formattedCompanyContact = formattedConfig.ifShowCompanyContact && JSON.parse(articleDetail.company.config).defaultContact > '' ? this._formatRawContent(defaultContact) : '';\n      var authorLink = formattedConfig && formattedConfig.authorLinks ? formattedConfig.authorLinks : undefined;\n\n      if (articleDetail) {\n        return React.createElement(\"div\", {\n          style: styles.contentWrapper,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, React.createElement(Helmet, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, React.createElement(\"title\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, articleDetail.company.name)), React.createElement(\"div\", {\n          style: styles.descriptionWrapper,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          style: styles.articleTitle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, articleDetail.title), React.createElement(\"div\", {\n          style: styles.subTitle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, author && authorLink ? React.createElement(\"div\", {\n          style: styles.author,\n          onClick: this.handleClick.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, author) : React.createElement(\"div\", {\n          style: styles.author,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, author), writer ? React.createElement(\"div\", {\n          style: styles.writer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, writer) : null, React.createElement(\"div\", {\n          style: styles.productInfo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: styles.publishDate,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, localDateCreated), React.createElement(\"div\", {\n          style: styles.visitTime,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, \"\\u9605\\u8BFB \", articleDetail.visit_times)), React.createElement(SubscribeBtn, {\n          item: articleDetail,\n          company: articleDetail.company,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          style: styles.descriptionBackground,\n          className: \"article-desc\",\n          dangerouslySetInnerHTML: {\n            __html: formattedContent\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }), React.createElement(LoadMore, {\n          showLine: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, \" The End \"), React.createElement(\"div\", {\n          style: styles.productInfo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: styles.visitTimes,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, \"\\u9605\\u8BFB \", articleDetail.visit_times), React.createElement(Link, {\n          href: {\n            pathname: '/index',\n            query: {\n              companyId: articleDetail.company_id\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          style: styles.footerCompanyName,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, articleDetail.company.name)))), React.createElement(\"div\", {\n          style: styles.descriptionBackground,\n          dangerouslySetInnerHTML: {\n            __html: formattedCompanyContact\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        })));\n      } else return null;\n    }\n  }]);\n\n  return ArticleContent;\n}(Component);\n\nvar styles = {\n  contentWrapper: {\n    backgroundColor: '#fff',\n    color: Colors.fontColor,\n    padding: '4vmin'\n  },\n  descriptionWrapper: {},\n  articleTitle: {\n    fontSize: '22px'\n  },\n  subTitle: {\n    paddingTop: '2vw',\n    paddingBottom: '2vw',\n    fontSize: '14px',\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'flex-start'\n  },\n  author: {\n    cursor: 'pointer',\n    color: Colors.fontColorLink,\n    marginRight: '3vw'\n  },\n  companyName: {\n    color: Colors.fontColorLink,\n    paddingRight: '3vw'\n  },\n  footerCompanyName: {\n    color: Colors.fontColorLink,\n    paddingRight: '3vw',\n    textAlign: 'end'\n  },\n  publishDate: {\n    color: Colors.fontColorGray\n  },\n  descriptionBackground: {\n    backgroundColor: '#fff',\n    // padding: '2.5vw',\n    // paddingBottom: '0',\n    lineHeight: '1.5',\n    fontSize: 16\n  },\n  productInfo: {\n    display: 'flex',\n    color: Colors.fontColorGray,\n    fontSize: '14px',\n    flex: '0 0 100%'\n  },\n  visitTimes: {\n    flex: 1,\n    textAlign: 'start'\n  },\n  // writer: {\n  //     flex: 3,\n  //     textAlign: 'end'\n  // }\n  writer: {\n    color: Colors.fontColorGray,\n    paddingRight: '3vw'\n  },\n  visitTime: {\n    flex: 1,\n    textAlign: 'end'\n  }\n};\nexport default ArticleContent;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM/react/shm-react/my-app/components/ItemDetails/ArticleDetails/ArticleContent.js"],"names":["React","Component","Colors","LoadMore","Link","moment","$","Helmet","SubscribeBtn","ArticleContent","_formatRawContent","props","content","replace","component","adImage","JSON","parse","articleDetail","company","config","defaultContact","click","event","targetImage","target","src","urls","match","undefined","regex","exec","description","push","wx","previewImage","current","formattedConfig","authorLink","authorLinks","url","trim","substr","toLowerCase","window","location","assign","isLogin","author","writer","formattedContent","localDateCreated","utc","date_publish","local","format","ifShowCompanyContact","formattedCompanyContact","styles","contentWrapper","name","descriptionWrapper","articleTitle","title","subTitle","handleClick","bind","productInfo","publishDate","visitTime","visit_times","descriptionBackground","__html","visitTimes","pathname","query","companyId","company_id","footerCompanyName","backgroundColor","color","fontColor","padding","fontSize","paddingTop","paddingBottom","display","flexDirection","flexWrap","justifyContent","cursor","fontColorLink","marginRight","companyName","paddingRight","textAlign","fontColorGray","lineHeight","flex"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Colors from '../../../constants/Colors';\nimport { LoadMore } from 'react-weui';\nimport Link from 'next/link';\nimport moment from 'moment';\nimport $ from 'jquery';\nimport { Helmet } from 'react-helmet';\nimport SubscribeBtn from '../../Common/SubscribeBtn'\n\n\nclass ArticleContent extends Component {\n    get formatRawContent() {\n        return this._formatRawContent;\n    }\n    constructor(props){\n        super(props);\n    }\n\n    componentDidMount() {\n      let component = this;\n      let adImage = JSON.parse(component.props.articleDetail.company.config).defaultContact;\n      $('img').click(function(event){\n        const targetImage = event.target.src\n        let urls = []\n        let match = undefined\n        const regex = /<img([^>]*)\\ssrc=['\"]([^\"\\s]+)['\"]([^>]*)>/g\n        while (match = regex.exec((component.props.articleDetail.description + adImage))) {\n            urls.push(match[2]);\n        }\n        wx.previewImage({\n            current: event.target.src, // 当前显示图片的http链接\n            urls: urls // 需要预览的图片http链接列表\n        });\n      })\n    }\n\n    _formatRawContent = (content => {\n        return content.replace(/<img([^>]*)\\ssrc=['\"]([^\"\\s]+)['\"]([^>]*)>/g, \"<img width=\\\"100%\\\" src='$2' style=\\\"margin: 15px 0px -5px 0px\\\" />\");\n    });\n    //redirect to author link\n    handleClick(){\n        const articleDetail = this.props.articleDetail ? this.props.articleDetail : undefined;\n        const formattedConfig = articleDetail && articleDetail.config ? JSON.parse(articleDetail.config) : {};\n        const authorLink = formattedConfig && formattedConfig.authorLinks ? formattedConfig.authorLinks : undefined;\n        let url = authorLink.trim();\n        if(url.substr(0,7).toLowerCase() == \"http://\" || url.substr(0,8).toLowerCase() == \"https://\")\n        {\n            url = url\n        }\n        else\n        {\n            url = \"http://\" + url\n        }\n        window.location.assign(url);\n    }\n    render(){\n        const articleDetail = this.props.articleDetail ? this.props.articleDetail : undefined;\n        const isLogin = this.props.isLogin ? this.props.isLogin : undefined;\n        const formattedConfig = articleDetail && articleDetail.config ? JSON.parse(articleDetail.config) : {};\n        const author = articleDetail.author && articleDetail.author > '' ? articleDetail.author : undefined;\n        const writer = formattedConfig .writer && formattedConfig .writer > '' ? formattedConfig .writer : undefined;\n        const formattedContent = articleDetail && articleDetail.description ? this._formatRawContent(articleDetail.description) : '';\n        const localDateCreated = moment(moment.utc(articleDetail.date_publish)).local().format(\"YYYY-MM-DD HH:mm\");\n        const defaultContact = formattedConfig.ifShowCompanyContact && (JSON.parse(articleDetail.company.config).defaultContact) > '' ? JSON.parse(articleDetail.company.config).defaultContact : {};\n        const formattedCompanyContact = formattedConfig.ifShowCompanyContact && (JSON.parse(articleDetail.company.config).defaultContact) > '' ? this._formatRawContent(defaultContact) : '';\n        const authorLink = formattedConfig && formattedConfig.authorLinks ? formattedConfig.authorLinks : undefined;\n    if (articleDetail) {\n            return (\n                <div style={styles.contentWrapper}>\n                    <Helmet>\n                        <title>{articleDetail.company.name}</title>\n                    </Helmet>\n                    <div style={styles.descriptionWrapper}>\n                        <div className=\"row\">\n                        <h2 style={styles.articleTitle}>{articleDetail.title}</h2>\n                        <div style={styles.subTitle} >\n                            {author && authorLink ? (<div style={styles.author} onClick={this.handleClick.bind(this)}>{author}</div>):(<div style={styles.author}>{author}</div>)}\n                            {writer ? (<div style={styles.writer}>{writer}</div>):null}\n                            <div style={styles.productInfo}>\n                                <div style={styles.publishDate}>{localDateCreated}</div>\n                                <div style={styles.visitTime}>阅读 {articleDetail.visit_times}</div>\n                            </div>\n                            <SubscribeBtn item={articleDetail} company={articleDetail.company}/>\n                        </div>\n                        </div>\n                        <div style={styles.descriptionBackground} className=\"article-desc\" dangerouslySetInnerHTML={{__html: formattedContent}} />\n                        <LoadMore showLine> The End </LoadMore>\n                        <div style={styles.productInfo}>\n                            <div style={styles.visitTimes}>阅读 {articleDetail.visit_times}</div>\n                            <Link href={{ pathname: '/index', query: { companyId: articleDetail.company_id} }}>\n                                <p>\n                                    <span style={styles.footerCompanyName}>{articleDetail.company.name}</span>\n                                </p>\n                            </Link>\n                        </div>\n                        <div style={styles.descriptionBackground}dangerouslySetInnerHTML={{__html: formattedCompanyContact}} />\n                    </div>\n                </div>\n            );\n        }\n        else return null;\n    }\n}\n\nconst styles = {\n    contentWrapper: {\n        backgroundColor: '#fff',\n        color: Colors.fontColor,\n        padding: '4vmin'\n    },\n    descriptionWrapper: {\n    },\n    articleTitle: {\n        fontSize: '22px'\n    },\n    subTitle: {\n        paddingTop: '2vw',\n        paddingBottom: '2vw',\n        fontSize: '14px',\n        display: 'flex',\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        justifyContent: 'flex-start'\n    },\n    author: {\n        cursor: 'pointer',\n        color: Colors.fontColorLink,\n        marginRight:'3vw'\n    },\n    companyName: {\n        color: Colors.fontColorLink,\n        paddingRight: '3vw'\n    },\n    footerCompanyName:{\n        color: Colors.fontColorLink,\n        paddingRight: '3vw',\n        textAlign: 'end'\n    },\n    publishDate: {\n        color: Colors.fontColorGray,\n    },\n    descriptionBackground: {\n        backgroundColor: '#fff',\n        // padding: '2.5vw',\n        // paddingBottom: '0',\n        lineHeight: '1.5',\n        fontSize: 16\n    },\n    productInfo: {\n        display: 'flex',\n        color: Colors.fontColorGray,\n        fontSize: '14px',\n        flex: '0 0 100%',\n    },\n    visitTimes: {\n        flex: 1,\n        textAlign: 'start',\n    },\n    // writer: {\n    //     flex: 3,\n    //     textAlign: 'end'\n    // }\n    writer:{\n        color: Colors.fontColorGray,\n        paddingRight: '3vw',\n    },\n    visitTime:{\n        flex: 1,\n        textAlign: 'end'\n    }\n\n};\n\nexport default ArticleContent;\n"]},"metadata":{},"sourceType":"module"}