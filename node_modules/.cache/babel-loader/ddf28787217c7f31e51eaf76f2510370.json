{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/index.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Button, Cells, Cell, CellBody, CellFooter, ActionSheet, Toast } from 'react-weui';\nimport DetailService from '../service/DetailService';\nimport JielongService from '../service/JielongService';\nimport AuthService from \"../service/AuthService\";\nimport Router from 'next/router';\nimport { Config } from '../Config'; //import styles\n\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css'; //import component\n\nimport Swipe from '../components/Swipe';\nimport Head from \"../components/head\";\nimport ProductCard from \"../components/ProductCard\";\nimport Footer from \"../components/Footer\";\nimport PaymentService from \"../service/PaymentService\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      item: _this.props.item,\n      product: null,\n      showLoading: false,\n      isInJielong: '',\n      isLogin: false,\n      ios_show: false,\n      actions: [{\n        label: '取消',\n        onClick: _this.hide.bind(_assertThisInitialized(_this))\n      }]\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"hide\",\n    value: function hide() {\n      this.setState({\n        ios_show: false\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      localStorage.getItem('userToken');\n      localStorage.getItem('userId');\n      localStorage.getItem('user');\n      localStorage.getItem('isLogIn');\n      this.isInJielong();\n      this.getRelatedProducts();\n      this.setState({\n        isLogin: localStorage.getItem('isLogIn')\n      });\n      console.log(this.state.item);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(object, nextProps) {\n      this.setState({\n        item: object.item\n      });\n    }\n  }, {\n    key: \"getRelatedProducts\",\n    value: function getRelatedProducts() {\n      var _this2 = this;\n\n      var params = this.state.item.company_id + '?is_draft=0&is_sync_to_market=1&page=1&page-size=6';\n      DetailService.getRelatedProducts(params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this2.setState({\n          product: responseJson\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      if (this.state !== nextProps) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"isInJielong\",\n    value: function isInJielong() {\n      var _this3 = this;\n\n      var id = this.state.item.id;\n      JielongService.isInJielong(id).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this3.setState({\n          isInJielong: responseJson\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"cancelJielong\",\n    value: function cancelJielong() {\n      var _this4 = this;\n\n      this.hide();\n      this.setState({\n        showLoading: true\n      });\n      var id = this.state.isInJielong.currentUserJieLong.id;\n      var url = \"https://www.showmine66.com/ma/i/\" + this.state.item.id;\n      var params = {};\n      JielongService.cancelJielong(id, url, params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this4.setState({\n          showLoading: false\n        });\n\n        window.location.reload();\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"updateJielong\",\n    value: function updateJielong() {\n      var itemId = {\n        itemId: this.state.item.id,\n        is_update: true,\n        jielongId: this.state.isInJielong.currentUserJieLong.id\n      };\n      Router.push({\n        pathname: '/checkoutPage',\n        query: itemId\n      });\n    }\n  }, {\n    key: \"checkLoginStatus\",\n    value: function checkLoginStatus() {\n      var itemId = {\n        itemId: this.state.item.id\n      };\n      var login = localStorage.getItem('isLogIn');\n\n      if (login) {\n        Router.push({\n          pathname: '/checkoutPage',\n          query: itemId\n        });\n      } else {\n        this.wechatlogin();\n      }\n    }\n  }, {\n    key: \"wechatlogin\",\n    value: function wechatlogin() {\n      var origUrl = this.state.item.id; // let authUrl =\"http://localhost:3000/AuthPage\";\n\n      var authUrl = Config.webAddress + \"AuthPage\";\n      var params = {};\n      AuthService.wechatLogin(origUrl, authUrl, params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        console.log('1');\n        window.open(responseJson.auth_url, \"_self\");\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var listItems = null;\n\n      if (this.state.item.children) {\n        listItems = this.state.item.children.map(function (item) {\n          return React.createElement(\"div\", {\n            key: item.id,\n            className: \"article-row\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 190\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"children-img\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191\n            },\n            __self: this\n          }, item.images.map(function (item2) {\n            return React.createElement(\"img\", {\n              height: 100,\n              width: 90,\n              key: item2.url,\n              src: item2.url,\n              role: \"presentation\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 193\n              },\n              __self: this\n            });\n          })), React.createElement(\"div\", {\n            className: \"children-content\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196\n            },\n            __self: this\n          }, React.createElement(\"p\", {\n            className: \"children-title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 197\n            },\n            __self: this\n          }, item.title), React.createElement(\"p\", {\n            className: \"children-price\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 198\n            },\n            __self: this\n          }, \"$\", item.price), React.createElement(\"span\", {\n            className: \"children-desc\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199\n            },\n            __self: this\n          }, \"\\u62A5\\u540D\\u603B\\u6570 \", React.createElement(\"strong\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199\n            },\n            __self: this\n          }, item.participator_num !== null ? item.participator_num : 0, \"  \")), React.createElement(\"span\", {\n            className: \"children-desc\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 200\n            },\n            __self: this\n          }, \"\\u5DF2\\u7B7E\\u5230\\u6570 \", React.createElement(\"strong\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 200\n            },\n            __self: this\n          }, item.fav_count), React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 200\n            },\n            __self: this\n          })), React.createElement(\"span\", {\n            className: \"children-desc\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 201\n            },\n            __self: this\n          }, \"\\u53D6\\u8D27\\u5730\\u70B9\", React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 201\n            },\n            __self: this\n          }), item.locations[0].title)));\n        });\n      }\n\n      var productsList = null;\n\n      if (this.state.product && this.state.product.data) {\n        productsList = this.state.product.data.map(function (product) {\n          return React.createElement(\"div\", {\n            key: product.id,\n            className: \"product-card\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 211\n            },\n            __self: this\n          }, React.createElement(ProductCard, {\n            product: product,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 212\n            },\n            __self: this\n          }));\n        });\n      }\n\n      var content = null;\n\n      if (this.state.item.description) {\n        content = this.state.item.description.replace(/<img([^>]*)\\ssrc=['\"]([^\"\\s]+)['\"]([^>]*)>/g, \"<img width=\\\"100%\\\" src='$2'/>\");\n      }\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(Head, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(\"meta\", {\n        name: \"viewport\",\n        content: \"initial-scale=1.0, width=device-width\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      })), React.createElement(\"header\", {\n        className: \"App-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: function onClick() {\n          return Router.push('/loginPage');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"ShowMine\")), React.createElement(\"div\", {\n        className: \"App-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, this.state.item.images ? React.createElement(\"div\", {\n        key: this.state.item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(Swipe, {\n        image: this.state.item.images,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      })) : null, React.createElement(\"div\", {\n        className: \"product-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"day-count\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"visit-times\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, \"\\u8BBF\\u95EE\\u6B21\\u6570\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }), this.state.item.visit_times)), React.createElement(\"div\", {\n        className: \"details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, this.state.item.title), React.createElement(\"div\", {\n        className: \"content\",\n        dangerouslySetInnerHTML: {\n          __html: content\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }))), this.state.isLogin ? this.state.isInJielong && this.state.isInJielong.currentUserJieLong && this.state.isInJielong.currentUserJieLong.voucher && this.state.isInJielong.currentUserJieLong.voucher.refnum ? React.createElement(Cells, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, React.createElement(Cell, {\n        href: this.state.isInJielong.currentUserJieLong.voucher.img_url,\n        access: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(CellBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"isInJielong-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"tag-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, \"\\u53C2\\u52A0\\u6210\\u529F\"), \" \\u60A8\\u7684\\u56DE\\u6267\\u7801\\uFF1A\", React.createElement(\"span\", {\n        className: \"Ref-num\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, this.state.isInJielong.currentUserJieLong.voucher.refnum)))), React.createElement(CellFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }))) : null : null, listItems, this.state.item.company ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"company-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"company-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        height: 100,\n        src: this.state.item.company.logo_img.url,\n        role: \"presentation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"company-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"company-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, this.state.item.company.name), React.createElement(\"div\", {\n        className: \"company-followers\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, \"\\u5173\\u6CE8\\u91CF\\uFF1A\", this.state.item.company.followers))), React.createElement(\"div\", {\n        className: \"divider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      })) : null, React.createElement(\"div\", {\n        className: \"related-product\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, productsList), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"button-area\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, this.state.isLogin ? this.state.isInJielong && this.state.isInJielong.currentUserJieLong && this.state.isInJielong.currentUserJieLong.voucher && this.state.isInJielong.currentUserJieLong.voucher.refnum ? React.createElement(\"div\", {\n        style: {\n          color: 'black'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        onClick: function onClick(e) {\n          return _this5.setState({\n            ios_show: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, \"\\u4FEE\\u6539\\u8BA2\\u5355\"), React.createElement(ActionSheet, {\n        menus: [{\n          label: '修改团购',\n          onClick: function onClick() {\n            _this5.updateJielong();\n          }\n        }, {\n          label: '取消团购',\n          onClick: function onClick() {\n            _this5.cancelJielong();\n          }\n        }],\n        actions: this.state.actions,\n        show: this.state.ios_show,\n        type: \"ios\",\n        onRequestClose: function onRequestClose(e) {\n          return _this5.setState({\n            ios_show: false\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }), React.createElement(Toast, {\n        icon: \"loading\",\n        show: this.state.showLoading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, \"Loading...\")) : React.createElement(Button, {\n        type: \"primary\",\n        className: \"button\",\n        onClick: function onClick() {\n          _this5.checkLoginStatus();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, \"\\u9A6C\\u4E0A\\u4E0B\\u5355\") : React.createElement(Button, {\n        type: \"primary\",\n        className: \"button\",\n        onClick: function onClick() {\n          _this5.checkLoginStatus();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, \"\\u9A6C\\u4E0A\\u4E0B\\u5355\"))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\n_defineProperty(App, \"getInitialProps\",\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(_ref) {\n    var req, query, res, json;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            req = _ref.req, query = _ref.query;\n            // let res = await DetailService.getDetail('412dc463ed77002df6b9d5527a292146');\n            //Production item\n            res = '';\n\n            if (!query.itemId) {\n              _context.next = 8;\n              break;\n            }\n\n            _context.next = 5;\n            return DetailService.getDetail(query.itemId);\n\n          case 5:\n            res = _context.sent;\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.next = 10;\n            return DetailService.getDetail('a3067bcbd7521b4965ef8b43394aa011');\n\n          case 10:\n            res = _context.sent;\n\n          case 11:\n            _context.next = 13;\n            return res.json();\n\n          case 13:\n            json = _context.sent;\n            return _context.abrupt(\"return\", {\n              item: json\n            });\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\nexport default App;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/index.js"],"names":["React","Component","Button","Cells","Cell","CellBody","CellFooter","ActionSheet","Toast","DetailService","JielongService","AuthService","Router","Config","Swipe","Head","ProductCard","Footer","PaymentService","App","props","state","item","product","showLoading","isInJielong","isLogin","ios_show","actions","label","onClick","hide","bind","setState","localStorage","getItem","getRelatedProducts","console","log","object","nextProps","params","company_id","then","response","json","responseJson","catch","error","id","currentUserJieLong","url","cancelJielong","window","location","reload","itemId","is_update","jielongId","push","pathname","query","login","wechatlogin","origUrl","authUrl","webAddress","wechatLogin","open","auth_url","listItems","children","map","images","item2","title","price","participator_num","fav_count","locations","productsList","data","content","description","replace","visit_times","__html","voucher","refnum","img_url","company","logo_img","name","followers","color","e","updateJielong","checkLoginStatus","req","res","getDetail"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport {Button, Cells, Cell, CellBody, CellFooter, ActionSheet, Toast} from 'react-weui';\nimport DetailService from '../service/DetailService';\nimport JielongService from '../service/JielongService';\nimport AuthService from \"../service/AuthService\";\nimport Router from 'next/router';\nimport {Config} from '../Config';\n\n\n\n\n//import styles\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css';\n\n\n//import component\nimport Swipe from '../components/Swipe'\nimport Head from \"../components/head\";\nimport ProductCard from \"../components/ProductCard\";\nimport Footer from \"../components/Footer\";\nimport PaymentService from \"../service/PaymentService\";\n\n\n\nclass App extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            item: this.props.item,\n            product: null,\n            showLoading: false,\n            isInJielong: '',\n            isLogin: false,\n            ios_show: false,\n            actions: [\n                {\n                    label: '取消',\n                    onClick: this.hide.bind(this)\n                }\n            ],\n        };\n    }\n\n    hide(){\n        this.setState({\n            ios_show: false,\n        });\n    }\n\n    static  getInitialProps = async({ req, query }) => {\n        // let res = await DetailService.getDetail('412dc463ed77002df6b9d5527a292146');\n        //Production item\n\n        let res = '';\n        if (query.itemId) {\n            res = await DetailService.getDetail(query.itemId);\n        }\n        else {\n            res = await DetailService.getDetail('a3067bcbd7521b4965ef8b43394aa011');\n            // res = await DetailService.getDetail('0f95b4d63b1afa75c3a9e2b3fae27cdf');\n        }\n        const json = await res.json();\n        // let res2 = await DetailService.getRelatedProducts('8e26b6edb2ce7416f71a82ed78e08984?is_draft=0&is_sync_to_market=1&page=1&page-size=6');\n        // const json2 = await res2.json();\n        // return { item: json , product: json2};\n        return { item: json };\n    }\n\n\n    componentDidMount() {\n        localStorage.getItem('userToken');\n        localStorage.getItem('userId');\n        localStorage.getItem('user');\n        localStorage.getItem('isLogIn');\n        this.isInJielong();\n        this.getRelatedProducts();\n        this.setState({\n            isLogin: localStorage.getItem('isLogIn'),\n        })\n        console.log(this.state.item);\n    }\n\n    componentWillReceiveProps(object, nextProps) {\n        this.setState({\n            item: object.item\n        })\n    }\n\n    getRelatedProducts() {\n        let params = this.state.item.company_id + '?is_draft=0&is_sync_to_market=1&page=1&page-size=6';\n        DetailService.getRelatedProducts(params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    product: responseJson\n                });\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n\n    }\n\n    shouldComponentUpdate(nextProps) {\n        if (this.state !== nextProps) {\n            return true;\n        }\n        return false;\n    }\n\n\n    isInJielong() {\n        let id = this.state.item.id;\n        JielongService.isInJielong(id)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    isInJielong: responseJson,\n                });\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    cancelJielong() {\n        this.hide();\n        this.setState({showLoading: true});\n        let id = this.state.isInJielong.currentUserJieLong.id;\n        let url = \"https://www.showmine66.com/ma/i/\" + this.state.item.id;\n        let params ={};\n        JielongService.cancelJielong(id, url, params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({showLoading: false});\n                window.location.reload();\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    updateJielong() {\n        let itemId = { itemId: this.state.item.id, is_update: true, jielongId: this.state.isInJielong.currentUserJieLong.id};\n        Router.push({\n            pathname: '/checkoutPage',\n            query: itemId,\n        });\n\n    }\n\n    checkLoginStatus() {\n        let itemId = { itemId: this.state.item.id};\n        let login = localStorage.getItem('isLogIn');\n        if (login) {\n            Router.push({\n                pathname: '/checkoutPage',\n                query: itemId,\n            });\n        }\n        else {\n            this.wechatlogin();\n        }\n    }\n\n    wechatlogin() {\n        let origUrl =this.state.item.id;\n        // let authUrl =\"http://localhost:3000/AuthPage\";\n        let authUrl =Config.webAddress + \"AuthPage\";\n\n        let params ={};\n        AuthService.wechatLogin(origUrl, authUrl, params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                console.log('1');\n                window.open(responseJson.auth_url, \"_self\");\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    render() {\n        let listItems = null;\n        if (this.state.item.children)\n        {\n            listItems = this.state.item.children.map((item) =>\n                <div key={item.id} className='article-row'>\n                    <div className='children-img'>\n                        {item.images.map((item2) =>\n                            <img height={100} width={90} key={item2.url} src={item2.url} role=\"presentation\" />\n                        )}\n                    </div>\n                    <div className='children-content'>\n                        <p className='children-title'>{item.title}</p>\n                        <p className='children-price'>${item.price}</p>\n                        <span className='children-desc'>报名总数 <strong>{(item.participator_num !== null ? item.participator_num : 0)}  </strong></span>\n                        <span className='children-desc'>已签到数 <strong>{item.fav_count}</strong><br/></span>\n                        <span className='children-desc'>取货地点<br/>{item.locations[0].title}</span>\n                    </div>\n                </div>\n            );\n        }\n\n        let productsList = null;\n        if (this.state.product && this.state.product.data)\n        {\n            productsList = this.state.product.data.map((product) =>\n                <div key={product.id} className='product-card'>\n                    <ProductCard product={product}/>\n                </div>\n            );\n        }\n\n        let content = null;\n        if (this.state.item.description)\n        {\n            content = this.state.item.description.replace(/<img([^>]*)\\ssrc=['\"]([^\"\\s]+)['\"]([^>]*)>/g, \"<img width=\\\"100%\\\" src='$2'/>\");\n        }\n\n\n        return (\n            <div className=\"App\">\n                <Head>\n                    <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\" />\n                </Head>\n                <header className=\"App-header\">\n                    <div onClick={() => Router.push('/loginPage')}>\n                        ShowMine\n                    </div>\n                </header>\n                <div className='App-body'>\n                    <div className='content'>\n                        {this.state.item.images ?\n                            ( <div key={this.state.item.id}>\n                                    <Swipe image={this.state.item.images}/>\n                                </div>\n                            )\n                            :\n                            null}\n                        <div className='product-info'>\n                            <div className='day-count'>\n                            </div>\n                            <div className='visit-times'>\n                                访问次数<br/>{this.state.item.visit_times}\n                            </div>\n                        </div>\n                        <div className='details'>\n                            <h3>{this.state.item.title}</h3>\n                            <div\n                                className=\"content\"\n                                dangerouslySetInnerHTML={{__html: content}}\n                            />\n                        </div>\n                    </div>\n                    {this.state.isLogin ?\n                        (this.state.isInJielong && this.state.isInJielong.currentUserJieLong && this.state.isInJielong.currentUserJieLong.voucher && this.state.isInJielong.currentUserJieLong.voucher.refnum ?\n                            (\n                                <Cells>\n                                    <Cell href={this.state.isInJielong.currentUserJieLong.voucher.img_url} access>\n                                        <CellBody>\n                                            <div className='isInJielong-row'>\n                                                <div><span className='tag-icon'>参加成功</span> 您的回执码：<span className='Ref-num'>{this.state.isInJielong.currentUserJieLong.voucher.refnum}</span></div>\n                                            </div>\n                                        </CellBody>\n                                        <CellFooter/>\n                                    </Cell>\n                                </Cells>\n                            )\n                            :\n                            null)\n                        :\n                        null\n                    }\n                    {listItems}\n                    {this.state.item.company ?\n                        (\n                            <div>\n                                <div className='company-info'>\n                                    <div className='company-img'>\n                                        <img height={100} src={this.state.item.company.logo_img.url} role=\"presentation\" />\n                                    </div>\n                                    <div className='company-content'>\n                                        <div className='company-title'>{this.state.item.company.name}</div>\n                                        <div className='company-followers'>关注量：{this.state.item.company.followers}</div>\n                                    </div>\n                                </div>\n                                <div className='divider'/>\n                            </div>)\n                        :\n                        null}\n\n                    <div className='related-product'>\n                        {productsList}\n                    </div>\n                    <Footer/>\n                    <div className='button-area'>\n                        {this.state.isLogin ?\n                            (this.state.isInJielong && this.state.isInJielong.currentUserJieLong && this.state.isInJielong.currentUserJieLong.voucher && this.state.isInJielong.currentUserJieLong.voucher.refnum ?\n                                (\n                                    <div style={{color:'black'}}>\n                                        <Button type=\"primary\" onClick={e=>this.setState({ios_show: true})}>修改订单</Button>\n                                        <ActionSheet\n                                            menus={[{\n                                                label: '修改团购',\n                                                onClick: ()=> {this.updateJielong();}\n                                            }, {\n                                                label: '取消团购',\n                                                onClick: ()=> {this.cancelJielong();}\n                                            }]}\n                                            actions={this.state.actions}\n                                            show={this.state.ios_show}\n                                            type=\"ios\"\n                                            onRequestClose={e=>this.setState({ios_show: false})}\n                                        />\n                                        <Toast icon=\"loading\" show={this.state.showLoading}>Loading...</Toast>\n                                    </div>\n                                )\n                                :\n                                <Button type=\"primary\" className='button' onClick={()=>{this.checkLoginStatus();}}>马上下单</Button>)\n                            :\n                            <Button type=\"primary\" className='button' onClick={()=>{this.checkLoginStatus();}}>马上下单</Button>\n                        }\n\n                    </div>\n                </div>\n\n            </div>\n\n        );\n    }\n}\n\nexport default App;\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}