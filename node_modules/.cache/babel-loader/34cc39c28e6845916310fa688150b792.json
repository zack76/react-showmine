{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from 'react';\nimport ItemService from \"../../../service/ItemService\";\nimport ConsultationListItem from \"../ConsultationList/ConsultationListItem\";\nimport Colors from '../../../constants/Colors';\nimport Lang from '../../../lang/Lang';\nimport { Button, LoadMore } from 'react-weui';\n\nvar ConsultationList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ConsultationList, _React$Component);\n\n  function ConsultationList(props) {\n    var _this;\n\n    _classCallCheck(this, ConsultationList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ConsultationList).call(this, props));\n    _this.state = {\n      companyId: _this.props.companyId,\n      showDivider: !!_this.props.showDivider,\n      params: {\n        'page': 1,\n        'page-size': 4\n      }\n    };\n    return _this;\n  }\n\n  _createClass(ConsultationList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getConsultations();\n    }\n  }, {\n    key: \"getConsultations\",\n    value: function getConsultations() {\n      var _this2 = this;\n\n      var loadingMore = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var params = this.state.params;\n      this.setState({\n        loading: true,\n        loadingMore: loadingMore\n      });\n      ItemService.getCompanyConsultationList(this.state.companyId, params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        if (_this2.state.params.page !== 1) {\n          var previousData = _this2.state.consultationList.data;\n          responseJson.data = previousData.concat(responseJson.data);\n        }\n\n        _this2.setState({\n          consultationList: responseJson,\n          params: {\n            'page': _parseInt(responseJson.current_page) + 1,\n            'page-size': 4\n          },\n          hasMore: responseJson.current_page < responseJson.last_page\n        });\n      }).catch(function (error) {\n        console.error(error);\n      }).finally(function () {\n        _this2.setState({\n          loading: false,\n          loadingMore: false\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var consultationList = this.state.consultationList ? this.state.consultationList : undefined;\n      var title = Lang.translate('COMPANY.CONSULTATION.TITLE');\n      var showDivider = this.state.showDivider;\n      var hasMore = this.state.hasMore;\n      var loading = this.state.loading;\n      var loadingMore = this.state.loadingMore;\n\n      if (consultationList) {\n        return React.createElement(\"div\", {\n          style: styles.listWrapper\n        }, React.createElement(\"div\", {\n          style: styles.listTitle\n        }, title), consultationList.data.map(function (item, index) {\n          return React.createElement(ConsultationListItem, {\n            item: item,\n            key: index\n          });\n        }), hasMore ? loadingMore ? React.createElement(LoadMore, {\n          loading: true\n        }, \"Loading\") : React.createElement(Button, {\n          type: \"primary\",\n          plain: true,\n          style: styles.buttonGap,\n          onClick: function onClick() {\n            _this3.getConsultations(true);\n          }\n        }, Lang.translate('COMPANY.CONSULTATION.SHOW_MORE')) : null, showDivider ? React.createElement(\"div\", {\n          style: Colors.style.bottomDivider\n        }, \" \") : null);\n      } else return null;\n    }\n  }]);\n\n  return ConsultationList;\n}(React.Component);\n\nvar styles = {\n  listWrapper: {\n    width: '100%'\n  },\n  listTitle: {\n    padding: '10px',\n    fontSize: '18px',\n    fontWeight: 'bold',\n    color: Colors.fontColor\n  },\n  buttonGap: {\n    marginBottom: '10px'\n  }\n};\nexport default ConsultationList;","map":null,"metadata":{},"sourceType":"module"}