{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/index.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Cells, Cell, CellBody, CellFooter, Gallery } from 'react-weui';\nimport ItemService from '../service/ItemService';\nimport JielongService from '../service/JielongService';\nimport AuthService from \"../service/AuthService\";\nimport Router from 'next/router';\nimport SiteHeader from '../components/Common/SiteHeader';\nimport Link from 'next/link'; //import styles\n\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css'; //import component\n\nimport Head from \"../components/head\";\nimport ProductCardGrid from \"../components/ProductCards/ProductCardGrid\";\nimport ChildrenList from '../components/JieLongDetails/ChildrenList';\nimport JielongContent from '../components/JieLongDetails/JieLongContent';\nimport Footer from \"../components/Footer\";\nimport Lang from '../lang/Lang';\nimport { Config } from \"../Config\";\nimport JieLongBanner from \"../components/JieLongDetails/JieLongBanner\";\nimport JieLongButtonArea from \"../components/JieLongDetails/JieLongButtonArea\";\nimport JieLongPopUpMenu from \"../components/JieLongDetails/JieLongPopUpMenu\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      item: _this.props.item,\n      productList: undefined,\n      showLoading: false,\n      userJieLongInfo: '',\n      isLogin: false,\n      iosShow: false,\n      showVoucher: false\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"showHideMenu\",\n    value: function showHideMenu() {\n      this.setState({\n        iosShow: !this.state.iosShow\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        isLogin: localStorage.getItem('isLogIn')\n      });\n      this.getIsInCurrentJieLong();\n\n      if (this.state.item.multi_participations) {\n        this.getAllJielong();\n      }\n\n      this.getRelatedProducts();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(object, nextProps) {\n      this.setState({\n        item: object.item\n      });\n    }\n  }, {\n    key: \"getRelatedProducts\",\n    value: function getRelatedProducts() {\n      var _this2 = this;\n\n      var params = {\n        is_draft: '0',\n        is_sync_to_market: '1',\n        page: '1',\n        'page-size': '6'\n      };\n      var companyId = this.state.item.company_id;\n      ItemService.getRelatedProducts(companyId, params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this2.setState({\n          productList: responseJson\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return this.state !== nextProps;\n    }\n  }, {\n    key: \"getIsInCurrentJieLong\",\n    value: function getIsInCurrentJieLong() {\n      var _this3 = this;\n\n      var id = this.state.item.id;\n      var isLogIn = localStorage.getItem('isLogIn');\n\n      if (isLogIn) {\n        JielongService.getIsInCurrentJieLong(id).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          _this3.setState({\n            userJieLongInfo: responseJson,\n            processInJieLong: true\n          });\n        }).catch(function (error) {\n          console.error(error);\n        });\n      }\n    }\n  }, {\n    key: \"getAllJielong\",\n    value: function getAllJielong() {\n      var _this4 = this;\n\n      var id = this.state.item.id;\n      var isLogIn = localStorage.getItem('isLogIn');\n\n      if (isLogIn) {\n        JielongService.getAllJielong(id).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          _this4.setState({\n            allJielongInfo: responseJson,\n            processAllJieLong: true\n          });\n        }).catch(function (error) {\n          console.error(error);\n        });\n      }\n    }\n  }, {\n    key: \"cancelJielong\",\n    value: function cancelJielong() {\n      var _this5 = this;\n\n      this.hide();\n      this.setState({\n        showLoading: true\n      });\n      var id = this.state.userJieLongInfo.currentUserJieLong.id;\n      var url = \"https://www.showmine66.com/ma/i/\" + this.state.item.id;\n      var params = {};\n      JielongService.cancelJielong(id, url, params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this5.setState({\n          showLoading: false\n        });\n\n        window.location.reload();\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"updateJielong\",\n    value: function updateJielong() {\n      var itemId = {\n        itemId: this.state.item.id,\n        is_update: true,\n        jielongId: this.state.userJieLongInfo.currentUserJieLong.id\n      };\n      Router.push({\n        pathname: '/checkoutPage',\n        query: itemId\n      });\n    }\n  }, {\n    key: \"checkLoginStatus\",\n    value: function checkLoginStatus() {\n      var itemId = {\n        itemId: this.state.item.id\n      };\n      var isLogIn = localStorage.getItem('isLogIn');\n\n      if (isLogIn) {\n        Router.push({\n          pathname: '/checkoutPage',\n          query: itemId\n        });\n      } else {\n        this.weChatLogin();\n      }\n    }\n  }, {\n    key: \"weChatLogin\",\n    value: function weChatLogin() {\n      var origUrl = this.state.item.id; // let authUrl = \"http://localhost:3000/AuthPage\";\n\n      var authUrl = Config.webAddress + \"AuthPage\";\n      var params = {};\n      AuthService.wechatLogin(origUrl, authUrl, params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        window.open(responseJson.auth_url, \"_self\");\n      }).catch(function (error) {\n        console.error(error);\n        alert(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var userJieLongInfo = this.state.userJieLongInfo;\n      var productList = this.state.productList && this.state.productList.data ? this.state.productList.data : undefined;\n      var item = this.state.item ? this.state.item : undefined;\n      var allJielongInfo = this.state.allJielongInfo ? this.state.allJielongInfo : undefined;\n      var isLogin = this.state.isLogIn;\n      var showLoading = this.state.showLoading;\n      var loadingJieLong = this.state.processAllJieLong !== this.state.processInJieLong;\n      var iosShow = this.state.iosShow;\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(SiteHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"App-body\",\n        key: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(JieLongBanner, {\n        images: item.images,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), React.createElement(JielongContent, {\n        jieLongDetail: item ? item : undefined,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }), isLogin && userJieLongInfo && userJieLongInfo.currentUserJieLong && userJieLongInfo.currentUserJieLong.voucher && userJieLongInfo.currentUserJieLong.voucher.refnum && !item.multi_participations ? React.createElement(Cells, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(Cell, {\n        href: userJieLongInfo.currentUserJieLong.voucher.img_url,\n        access: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(CellBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"isInJielong-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"tag-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"\\u53C2\\u52A0\\u6210\\u529F\"), \" \\u56DE\\u6267\\u7801\\uFF1A\", React.createElement(\"span\", {\n        className: \"Ref-num\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, userJieLongInfo.currentUserJieLong.voucher.refnum)))), React.createElement(CellFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }))) : null, React.createElement(Cells, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, isLogin && allJielongInfo ? allJielongInfo.map(function (jieLong) {\n        return React.createElement(\"div\", {\n          key: jieLong.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229\n          },\n          __self: this\n        }, React.createElement(Cell, {\n          href: undefined,\n          onClick: function onClick(e) {\n            return _this6.setState({\n              showVoucher: true\n            });\n          },\n          access: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231\n          },\n          __self: this\n        }, jieLong && jieLong.is_paid && jieLong.voucher && jieLong.voucher.receipt && jieLong.voucher.receipt.amount && jieLong.voucher.refnum ? React.createElement(\"div\", {\n          className: \"allJielongInfo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"paidAmount-icon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }, \"\\u5DF2\\u652F\\u4ED8\\uFF1A$\", jieLong.voucher.receipt.amount), \" \\u56DE\\u6267\\u7801\\uFF1A\", React.createElement(\"span\", {\n          className: \"Ref-num\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }, jieLong.voucher.refnum))) : React.createElement(\"div\", {\n          className: \"isInJielong-row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238\n          },\n          __self: this\n        }, jieLong.voucher && jieLong.voucher.refnum ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"tag-icon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }, \"\\u53C2\\u52A0\\u6210\\u529F\"), \" \\u56DE\\u6267\\u7801\\uFF1A\", React.createElement(\"span\", {\n          className: \"Ref-num\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }, jieLong.voucher.refnum)) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243\n          },\n          __self: this\n        }, \"\\u63D0\\u793A\\uFF1A\\u60A8\\u6709\\u8BA2\\u5355\\u672A\\u5B8C\\u6210\\uFF0C\\u8BF7\\u572830\\u5206\\u949F\\u5185\\u5B8C\\u6210\\u652F\\u4ED8\\u3002\"))), React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 248\n          },\n          __self: this\n        })), React.createElement(Gallery, {\n          src: jieLong.voucher && jieLong.voucher.img_url ? jieLong.voucher.img_url : undefined,\n          show: _this6.state.showVoucher,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: styles.galleryButton,\n          onClick: function onClick(e) {\n            return _this6.setState({\n              showVoucher: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 251\n          },\n          __self: this\n        }, \"Cancel\")));\n      }) : null), React.createElement(ChildrenList, {\n        children: item.children ? item.children : undefined,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }), item.company ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(Link, {\n        href: {\n          pathname: '/companyDetails',\n          query: {\n            companyId: item.company.id\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"company-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"company-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        height: 100,\n        src: item.company.logo_img.url,\n        role: \"presentation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"company-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"company-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, item.company.name), React.createElement(\"div\", {\n        className: \"company-followers\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, \"\\u5173\\u6CE8\\u91CF\\uFF1A\", item.company.followers))))), React.createElement(\"div\", {\n        className: \"divider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      })) : null, React.createElement(\"div\", {\n        style: styles.relatedProductWrapper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(ProductCardGrid, {\n        productList: productList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      })), React.createElement(JieLongButtonArea, {\n        isLogin: isLogin,\n        userJieLongInfo: userJieLongInfo,\n        checkLoginStatus: function checkLoginStatus() {\n          _this6.checkLoginStatus();\n        },\n        loadingJieLong: loadingJieLong,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      })), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }), React.createElement(JieLongPopUpMenu, {\n        updateJieLong: function updateJieLong() {\n          _this6.updateJielong();\n        },\n        cancelJieLong: function cancelJieLong() {\n          _this6.cancelJielong();\n        },\n        showLoading: showLoading,\n        iosShow: iosShow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\n_defineProperty(App, \"getInitialProps\",\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(_ref) {\n    var req, query, res, json;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            req = _ref.req, query = _ref.query;\n            res = '';\n\n            if (!query.itemId) {\n              _context.next = 8;\n              break;\n            }\n\n            _context.next = 5;\n            return ItemService.getItemDetail(query.itemId);\n\n          case 5:\n            res = _context.sent;\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.next = 10;\n            return ItemService.getItemDetail('0f95b4d63b1afa75c3a9e2b3fae27cdf');\n\n          case 10:\n            res = _context.sent;\n\n          case 11:\n            _context.next = 13;\n            return res.json();\n\n          case 13:\n            json = _context.sent;\n            return _context.abrupt(\"return\", {\n              item: json\n            });\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\nvar styles = {\n  galleryButton: {\n    color: 'white',\n    fontWeight: 'bold',\n    padding: '0'\n  },\n  relatedProductWrapper: {\n    backgroundColor: '#fff',\n    padding: '5vmin'\n  },\n  buttonGroupContainer: {\n    position: 'fixed',\n    left: 0,\n    bottom: 0,\n    width: '100%',\n    backgroundColor: '#fff',\n    color: '#fff',\n    textAlign: 'center'\n  }\n};\nexport default App;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/index.js"],"names":["React","Component","Cells","Cell","CellBody","CellFooter","Gallery","ItemService","JielongService","AuthService","Router","SiteHeader","Link","Head","ProductCardGrid","ChildrenList","JielongContent","Footer","Lang","Config","JieLongBanner","JieLongButtonArea","JieLongPopUpMenu","App","props","state","item","productList","undefined","showLoading","userJieLongInfo","isLogin","iosShow","showVoucher","setState","localStorage","getItem","getIsInCurrentJieLong","multi_participations","getAllJielong","getRelatedProducts","object","nextProps","params","is_draft","is_sync_to_market","page","companyId","company_id","then","response","json","responseJson","catch","error","console","id","isLogIn","processInJieLong","allJielongInfo","processAllJieLong","hide","currentUserJieLong","url","cancelJielong","window","location","reload","itemId","is_update","jielongId","push","pathname","query","weChatLogin","origUrl","authUrl","webAddress","wechatLogin","open","auth_url","alert","data","loadingJieLong","images","voucher","refnum","img_url","map","jieLong","e","is_paid","receipt","amount","styles","galleryButton","children","company","logo_img","name","followers","relatedProductWrapper","checkLoginStatus","updateJielong","req","res","getItemDetail","color","fontWeight","padding","backgroundColor","buttonGroupContainer","position","left","bottom","width","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport {Cells, Cell, CellBody, CellFooter, Gallery} from 'react-weui';\nimport ItemService from '../service/ItemService';\nimport JielongService from '../service/JielongService';\nimport AuthService from \"../service/AuthService\";\nimport Router from 'next/router';\nimport SiteHeader from '../components/Common/SiteHeader';\nimport Link from 'next/link';\n\n//import styles\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css';\n\n//import component\nimport Head from \"../components/head\";\nimport ProductCardGrid from \"../components/ProductCards/ProductCardGrid\";\nimport ChildrenList from '../components/JieLongDetails/ChildrenList';\nimport JielongContent from '../components/JieLongDetails/JieLongContent';\nimport Footer from \"../components/Footer\";\nimport Lang from '../lang/Lang';\nimport {Config} from \"../Config\";\nimport JieLongBanner from \"../components/JieLongDetails/JieLongBanner\";\nimport JieLongButtonArea from \"../components/JieLongDetails/JieLongButtonArea\";\nimport JieLongPopUpMenu from \"../components/JieLongDetails/JieLongPopUpMenu\";\n\n\nclass App extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            item: this.props.item,\n            productList: undefined,\n            showLoading: false,\n            userJieLongInfo: '',\n            isLogin: false,\n            iosShow: false,\n            showVoucher: false,\n        };\n    }\n\n    showHideMenu(){\n        this.setState({\n            iosShow: !this.state.iosShow,\n        });\n    }\n\n    static getInitialProps = async({ req, query }) => {\n        let res = '';\n        if (query.itemId) {\n            res = await ItemService.getItemDetail(query.itemId);\n        }\n        else {\n            res = await ItemService.getItemDetail('0f95b4d63b1afa75c3a9e2b3fae27cdf');\n        }\n        const json = await res.json();\n        return { item: json };\n    };\n\n\n    componentDidMount() {\n        this.setState({\n            isLogin: localStorage.getItem('isLogIn'),\n        });\n        this.getIsInCurrentJieLong();\n        if (this.state.item.multi_participations) {\n            this.getAllJielong();\n        }\n        this.getRelatedProducts();\n    }\n\n    componentWillReceiveProps(object, nextProps) {\n        this.setState({\n            item: object.item\n        })\n    }\n\n    getRelatedProducts() {\n        let params = {\n            is_draft: '0',\n            is_sync_to_market: '1',\n            page: '1',\n            'page-size': '6'\n        };\n        let companyId = this.state.item.company_id;\n        ItemService.getRelatedProducts(companyId, params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    productList: responseJson\n                });\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    shouldComponentUpdate(nextProps) {\n        return this.state !== nextProps;\n    }\n\n    getIsInCurrentJieLong() {\n        let id = this.state.item.id;\n        const isLogIn = localStorage.getItem('isLogIn');\n        if (isLogIn) {\n            JielongService.getIsInCurrentJieLong(id)\n                .then((response) => response.json())\n                .then((responseJson) => {\n                    this.setState({\n                        userJieLongInfo: responseJson,\n                        processInJieLong: true,\n                    });\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        }\n    }\n\n    getAllJielong() {\n        let id = this.state.item.id;\n        const isLogIn = localStorage.getItem('isLogIn');\n        if (isLogIn) {\n            JielongService.getAllJielong(id)\n                .then((response) => response.json())\n                .then((responseJson) => {\n                    this.setState({\n                        allJielongInfo: responseJson,\n                        processAllJieLong: true,\n                    });\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        }\n    }\n\n    cancelJielong() {\n        this.hide();\n        this.setState({showLoading: true});\n        let id = this.state.userJieLongInfo.currentUserJieLong.id;\n        let url = \"https://www.showmine66.com/ma/i/\" + this.state.item.id;\n        let params ={};\n        JielongService.cancelJielong(id, url, params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({showLoading: false});\n                window.location.reload();\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    updateJielong() {\n        let itemId = { itemId: this.state.item.id, is_update: true, jielongId: this.state.userJieLongInfo.currentUserJieLong.id};\n        Router.push({\n            pathname: '/checkoutPage',\n            query: itemId,\n        });\n    }\n\n    checkLoginStatus() {\n        let itemId = { itemId: this.state.item.id};\n        let isLogIn = localStorage.getItem('isLogIn');\n        if (isLogIn) {\n            Router.push({\n                pathname: '/checkoutPage',\n                query: itemId,\n            });\n        }\n        else {\n            this.weChatLogin();\n        }\n    }\n\n    weChatLogin() {\n        let origUrl = this.state.item.id;\n        // let authUrl = \"http://localhost:3000/AuthPage\";\n        let authUrl = Config.webAddress + \"AuthPage\";\n        let params ={};\n        AuthService.wechatLogin(origUrl, authUrl, params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                window.open(responseJson.auth_url, \"_self\");\n            })\n            .catch((error) => {\n                console.error(error);\n                alert(error);\n            });\n    }\n\n    render() {\n        const userJieLongInfo = this.state.userJieLongInfo;\n        const productList = this.state.productList && this.state.productList.data ? this.state.productList.data : undefined;\n        const item = this.state.item ? this.state.item : undefined;\n        const allJielongInfo = this.state.allJielongInfo ? this.state.allJielongInfo : undefined;\n        const isLogin = this.state.isLogIn;\n        const showLoading = this.state.showLoading;\n        const loadingJieLong = this.state.processAllJieLong !== this.state.processInJieLong;\n        const iosShow = this.state.iosShow;\n\n        return (\n            <div className=\"App\">\n                <SiteHeader/>\n                <div className='App-body' key={item.id}>\n                    <JieLongBanner images={item.images}/>\n                    <JielongContent jieLongDetail={item ? item : undefined}/>\n                    {\n                        isLogin && userJieLongInfo && userJieLongInfo.currentUserJieLong && userJieLongInfo.currentUserJieLong.voucher && userJieLongInfo.currentUserJieLong.voucher.refnum && !item.multi_participations ?\n                            (\n                                <Cells>\n                                    <Cell href={userJieLongInfo.currentUserJieLong.voucher.img_url} access>\n                                        <CellBody>\n                                            <div className='isInJielong-row'>\n                                                <div><span className='tag-icon'>参加成功</span> 回执码：<span className='Ref-num'>{userJieLongInfo.currentUserJieLong.voucher.refnum}</span></div>\n                                            </div>\n                                        </CellBody>\n                                        <CellFooter/>\n                                    </Cell>\n                                </Cells>\n                            )\n                            : null\n                    }\n                    <Cells>\n                        {\n                            isLogin && allJielongInfo ?\n                                allJielongInfo.map((jieLong) =>\n                                    <div key={jieLong.id}>\n                                        <Cell href={undefined} onClick={e=>this.setState({ showVoucher: true})} access>\n                                            <CellBody>\n                                                {\n                                                    jieLong && jieLong.is_paid && jieLong.voucher && jieLong.voucher.receipt && jieLong.voucher.receipt.amount && jieLong.voucher.refnum ?\n                                                        <div className='allJielongInfo'>\n                                                            <div><span className='paidAmount-icon'>已支付：${jieLong.voucher.receipt.amount}</span> 回执码：<span className='Ref-num'>{jieLong.voucher.refnum}</span></div>\n                                                        </div>\n                                                        :\n                                                        <div className='isInJielong-row'>\n                                                            {\n                                                                jieLong.voucher && jieLong.voucher.refnum ?\n                                                                    <div><span className='tag-icon'>参加成功</span> 回执码：<span className='Ref-num'>{jieLong.voucher.refnum}</span></div>\n                                                                    :\n                                                                    <div>提示：您有订单未完成，请在30分钟内完成支付。</div>\n                                                            }\n                                                        </div>\n                                                }\n                                            </CellBody>\n                                            <CellFooter/>\n                                        </Cell>\n                                        <Gallery src={jieLong.voucher && jieLong.voucher.img_url ? jieLong.voucher.img_url : undefined} show={this.state.showVoucher}>\n                                            <div\n                                                style={styles.galleryButton}\n                                                onClick={e=>this.setState({ showVoucher: false})}\n                                            >\n                                                Cancel\n                                            </div>\n                                        </Gallery>\n                                    </div>\n\n                                )\n                                :\n                                null\n                        }\n                    </Cells>\n\n                    <ChildrenList children={item.children ? item.children : undefined}/>\n                    {item.company ?\n                        (\n                            <div>\n                                <Link href={{ pathname: '/companyDetails', query: { companyId: item.company.id} }}>\n                                    <a>\n                                        <div className='company-info'>\n                                            <div className='company-img'>\n                                                <img height={100} src={item.company.logo_img.url} role=\"presentation\" />\n                                            </div>\n                                            <div className='company-content'>\n                                                <div className='company-title'>{item.company.name}</div>\n                                                <div className='company-followers'>关注量：{item.company.followers}</div>\n                                            </div>\n                                        </div>\n                                    </a>\n                                </Link>\n                                <div className='divider'/>\n                            </div>)\n                        :\n                        null\n                    }\n                    <div style={styles.relatedProductWrapper}>\n                        <ProductCardGrid productList={productList}/>\n                    </div>\n\n                    <JieLongButtonArea\n                        isLogin={isLogin}\n                        userJieLongInfo={userJieLongInfo}\n                        checkLoginStatus={()=>{this.checkLoginStatus()}}\n                        loadingJieLong={loadingJieLong}\n                    />\n                </div>\n                <Footer/>\n                <JieLongPopUpMenu\n                    updateJieLong={()=>{this.updateJielong()}}\n                    cancelJieLong={()=>{this.cancelJielong()}}\n                    showLoading={showLoading}\n                    iosShow={iosShow}\n                />\n            </div>\n        );\n    }\n}\n\nconst styles = {\n    galleryButton: {\n        color: 'white',\n        fontWeight:'bold',\n        padding: '0',\n    },\n    relatedProductWrapper: {\n        backgroundColor: '#fff',\n        padding: '5vmin'\n    },\n    buttonGroupContainer: {\n        position: 'fixed',\n        left: 0,\n        bottom: 0,\n        width: '100%',\n        backgroundColor: '#fff',\n        color: '#fff',\n        textAlign: 'center',\n    }\n};\n\nexport default App;\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}