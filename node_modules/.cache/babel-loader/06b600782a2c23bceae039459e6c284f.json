{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM/react/shm-react/my-app/pages/itemDetails.js\",\n    _sticky;\n\nimport React, { Component } from 'react';\nimport './App.css';\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css';\nimport ItemService from '../service/ItemService';\nimport SiteHeader from '../components/Common/SiteHeader';\nimport SiteFooter from \"../components/Common/SiteFooter\";\nimport JieLongDetailComponent from \"../components/ItemDetails/JieLongDetails/JieLongDetailComponent\";\nimport ProductDetailComponent from \"../components/ItemDetails/ProductDetails/ProductDetailComponent\";\nimport ArticleDetailComponent from \"../components/ItemDetails/ArticleDetails/ArticleDetailComponent\";\nimport RegistrationDetailComponent from \"../components/ItemDetails/RegistrationDetails/RegistrationDetailComponent\";\nimport WeChatService from '../service/WeChatService';\nimport CompanyService from '../service/CompanyService';\nimport UtilsService from \"../service/UtilsService\";\nimport { Row, Col, Container } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nvar itemDetails =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(itemDetails, _Component);\n\n  function itemDetails(props) {\n    var _this;\n\n    _classCallCheck(this, itemDetails);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(itemDetails).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"weChatShare\", function () {\n      var item = _this.state.item;\n      var currentUrl = _this.state.currentUrl;\n      var imageSize = 'SMALL';\n      var descWithoutHtml = UtilsService.stripHtmlTags(item.description);\n      WeChatService.runWhenWXReady(function () {\n        wx.onMenuShareAppMessage({\n          title: item.title,\n          desc: descWithoutHtml,\n          link: currentUrl,\n          imgUrl: UtilsService.getItemImgUrlWithSize(item, imageSize)\n        });\n        wx.onMenuShareTimeline({\n          title: item.title,\n          link: currentUrl,\n          imgUrl: UtilsService.getItemImgUrlWithSize(item, imageSize)\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getCompanyQrCode\", function (item) {\n      var params = {\n        itemId: item.id\n      };\n      CompanyService.getCompanyQrCode(item.company.id, params).then(function (response) {\n        return response.text();\n      }).then(function (response) {\n        _this.setState({\n          qrUrl: response\n        });\n      });\n    });\n\n    _this.state = {\n      item: _this.props.item,\n      isLogin: false,\n      itemType: _this.props.item.id === 'eab78ee2a24d469dbd09f46dd68e804f' || _this.props.item.id === 'e01a8e15fa5234f20cda8a672047bb76' ? 'REGISTRATION' : _this.props.item.predefinedTags['1']\n    };\n    return _this;\n  }\n\n  _createClass(itemDetails, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.getCompanyQrCode(this.state.item);\n      this.setState({\n        isLogin: localStorage.getItem('isLogIn'),\n        currentUrl: window.location.href\n      }, function () {\n        setTimeout(function () {\n          _this2.weChatShare();\n        }, 300);\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(object, nextProps) {\n      var _this3 = this;\n\n      this.setState({\n        item: object.item,\n        currentUrl: window.location.href,\n        itemType: object.item.predefinedTags['1']\n      }, function () {\n        setTimeout(function () {\n          _this3.weChatShare();\n        }, 500);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var item = this.state.item ? this.state.item : undefined;\n      var isLogin = this.state.isLogin;\n\n      if (item) {\n        var itemView = function itemView() {\n          switch (_this4.state.itemType) {\n            case 'JIE LONG':\n              return React.createElement(JieLongDetailComponent, {\n                isLogin: isLogin,\n                item: item,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 99\n                },\n                __self: this\n              });\n\n            case 'product':\n              return React.createElement(ProductDetailComponent, {\n                isLogin: isLogin,\n                item: item,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 102\n                },\n                __self: this\n              });\n\n            case 'CONSULTATION':\n              return React.createElement(ArticleDetailComponent, {\n                isLogin: isLogin,\n                item: item,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 105\n                },\n                __self: this\n              });\n\n            case 'REGISTRATION':\n              return React.createElement(RegistrationDetailComponent, {\n                isLogin: isLogin,\n                item: item,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 108\n                },\n                __self: this\n              });\n\n            default:\n              return React.createElement(ProductDetailComponent, {\n                isLogin: isLogin,\n                item: item,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 111\n                },\n                __self: this\n              });\n          }\n        };\n\n        return React.createElement(\"div\", {\n          className: \"App\",\n          key: item.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, React.createElement(Container, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, React.createElement(Col, {\n          sm: \"12\",\n          lg: {\n            span: 8,\n            offset: 2\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, React.createElement(SiteHeader, {\n          show: this.state.itemType !== 'CONSULTATION',\n          company: item.company ? item.company : undefined,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }), itemView(), React.createElement(SiteFooter, {\n          show: this.state.itemType !== 'CONSULTATION',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        })), React.createElement(Col, {\n          sm: \"12\",\n          lg: \"2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: styles.sticky,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, \"hello\"), React.createElement(\"img\", {\n          style: styles.qrcode,\n          src: this.state.qrUrl,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }))))));\n      } else return null;\n    }\n  }]);\n\n  return itemDetails;\n}(Component);\n\n_defineProperty(itemDetails, \"getInitialProps\",\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(_ref) {\n    var req, query, res, json;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            req = _ref.req, query = _ref.query;\n\n            if (!query.itemId) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 4;\n            return ItemService.getItemDetail(query.itemId);\n\n          case 4:\n            _context.t0 = _context.sent;\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.next = 9;\n            return ItemService.getItemDetail('26aeddb5e3bb4985102e232b35c97bfd');\n\n          case 9:\n            _context.t0 = _context.sent;\n\n          case 10:\n            res = _context.t0;\n            _context.next = 13;\n            return res.json();\n\n          case 13:\n            json = _context.sent;\n            return _context.abrupt(\"return\", {\n              item: json\n            });\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\nvar styles = {\n  qrcode: {\n    width: '100%'\n  },\n  sticky: (_sticky = {\n    position: '-webkit-sticky'\n  }, _defineProperty(_sticky, \"position\", 'sticky'), _defineProperty(_sticky, \"top\", 50), _sticky)\n};\nexport default itemDetails;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM/react/shm-react/my-app/pages/itemDetails.js"],"names":["React","Component","ItemService","SiteHeader","SiteFooter","JieLongDetailComponent","ProductDetailComponent","ArticleDetailComponent","RegistrationDetailComponent","WeChatService","CompanyService","UtilsService","Row","Col","Container","itemDetails","props","item","state","currentUrl","imageSize","descWithoutHtml","stripHtmlTags","description","runWhenWXReady","wx","onMenuShareAppMessage","title","desc","link","imgUrl","getItemImgUrlWithSize","onMenuShareTimeline","params","itemId","id","getCompanyQrCode","company","then","response","text","setState","qrUrl","isLogin","itemType","predefinedTags","localStorage","getItem","window","location","href","setTimeout","weChatShare","object","nextProps","undefined","itemView","span","offset","styles","sticky","qrcode","req","query","getItemDetail","res","json","width","position"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css';\nimport ItemService from '../service/ItemService';\nimport SiteHeader from '../components/Common/SiteHeader';\nimport SiteFooter from \"../components/Common/SiteFooter\";\nimport JieLongDetailComponent from \"../components/ItemDetails/JieLongDetails/JieLongDetailComponent\";\nimport ProductDetailComponent from \"../components/ItemDetails/ProductDetails/ProductDetailComponent\";\nimport ArticleDetailComponent from \"../components/ItemDetails/ArticleDetails/ArticleDetailComponent\";\nimport RegistrationDetailComponent from \"../components/ItemDetails/RegistrationDetails/RegistrationDetailComponent\";\nimport WeChatService from '../service/WeChatService';\nimport CompanyService from '../service/CompanyService';\nimport UtilsService from \"../service/UtilsService\";\nimport { Row, Col, Container } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n\n\nclass itemDetails extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            item: this.props.item,\n            isLogin: false,\n            itemType: (this.props.item.id === 'eab78ee2a24d469dbd09f46dd68e804f') || (this.props.item.id === 'e01a8e15fa5234f20cda8a672047bb76') ? 'REGISTRATION' : this.props.item.predefinedTags['1']\n        };\n    }\n\n    static getInitialProps = async({ req, query }) => {\n        let res = query.itemId ?\n            await ItemService.getItemDetail(query.itemId) :\n            await ItemService.getItemDetail('26aeddb5e3bb4985102e232b35c97bfd'); // a3067bcbd7521b4965ef8b43394aa011\n        const json = await res.json();\n        return {item: json};\n    };\n\n    componentDidMount() {\n        this.getCompanyQrCode(this.state.item);\n        this.setState({\n            isLogin: localStorage.getItem('isLogIn'),\n            currentUrl: window.location.href\n        }, () => { setTimeout(()=>{\n            this.weChatShare()\n        }, 300);\n        });\n    }\n\n    componentWillReceiveProps(object, nextProps) {\n        this.setState({\n            item: object.item,\n            currentUrl: window.location.href,\n            itemType: object.item.predefinedTags['1']\n        }, () => { setTimeout(()=>{\n            this.weChatShare()\n        }, 500);\n        });\n    }\n\n    weChatShare = () => {\n        let item = this.state.item;\n        let currentUrl = this.state.currentUrl;\n        let imageSize = 'SMALL';\n        let descWithoutHtml = UtilsService.stripHtmlTags(item.description);\n        WeChatService.runWhenWXReady(function () {\n            wx.onMenuShareAppMessage({\n                title: item.title,\n                desc: descWithoutHtml,\n                link: currentUrl,\n                imgUrl: UtilsService.getItemImgUrlWithSize(item, imageSize)\n            });\n            wx.onMenuShareTimeline({\n                title: item.title,\n                link: currentUrl,\n                imgUrl: UtilsService.getItemImgUrlWithSize(item, imageSize)\n            });\n        });\n    };\n    getCompanyQrCode =  item => {\n        let params = {\n            itemId: item.id\n        };\n        CompanyService.getCompanyQrCode(item.company.id, params)\n            .then(response => response.text())\n            .then(response => {\n                this.setState({\n                    qrUrl: response\n                })\n            })\n    }\n\n    render() {\n        const item = this.state.item ? this.state.item : undefined;\n        const isLogin = this.state.isLogin;\n        if (item) {\n            const itemView = () => {\n                switch(this.state.itemType) {\n                    case 'JIE LONG':\n                        return <JieLongDetailComponent isLogin={isLogin} item={item} />;\n\n                    case 'product':\n                        return <ProductDetailComponent isLogin={isLogin} item={item} />;\n\n                    case 'CONSULTATION':\n                        return <ArticleDetailComponent isLogin={isLogin} item={item} />;\n\n                    case 'REGISTRATION':\n                        return <RegistrationDetailComponent isLogin={isLogin} item={item} />;\n\n                    default:\n                        return <ProductDetailComponent isLogin={isLogin} item={item} />;\n                }\n            };\n\n            return (\n                <div className=\"App\" key={item.id}>\n                    <Container>\n                        <Row>\n                            {/*<Col sm=\"12\" lg={{ span: 8, offset: 2 }}>*/}\n                            {/*    <SiteHeader show={this.state.itemType !== 'CONSULTATION'} company={item.company ? item.company : undefined}/>*/}\n                            {/*    { itemView() }*/}\n                            {/*    <SiteFooter show={this.state.itemType !== 'CONSULTATION'}/>*/}\n                            {/*</Col>*/}\n                            <Col sm=\"12\" lg={{ span: 8, offset: 2 }}>\n                                <SiteHeader show={this.state.itemType !== 'CONSULTATION'} company={item.company ? item.company : undefined}/>\n                                { itemView() }\n                                <SiteFooter show={this.state.itemType !== 'CONSULTATION'}/>\n                            </Col>\n                            <Col sm=\"12\" lg=\"2\">\n                                <div style={styles.sticky}>\n                                    <div>hello</div>\n                                    <img style={styles.qrcode} src={this.state.qrUrl}/>\n                                </div>\n                            </Col>\n                        </Row>\n                    </Container>\n                </div>\n\n            );\n        }\n        else return null;\n    }\n}\n\nconst styles = {\n    qrcode: {\n        width: '100%',\n    },\n    sticky: {\n        position: '-webkit-sticky',\n        position: 'sticky',\n        top: 50\n    }\n};\n\nexport default itemDetails;\n"]},"metadata":{},"sourceType":"module"}