{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/index.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Button, Cells, Cell, CellBody, CellFooter, ActionSheet, Toast, Gallery } from 'react-weui';\nimport ItemService from '../service/ItemService';\nimport JielongService from '../service/JielongService';\nimport AuthService from \"../service/AuthService\";\nimport Router from 'next/router';\nimport SiteHeader from '../components/Common/SiteHeader';\nimport Link from 'next/link'; //import styles\n\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css'; //import component\n\nimport Swipe from '../components/Swipe';\nimport Head from \"../components/head\";\nimport ProductCardGrid from \"../components/ProductCards/ProductCardGrid\";\nimport ChildrenList from '../components/JieLongDetails/ChildrenList';\nimport JielongContent from '../components/JieLongDetails/JieLongContent';\nimport Footer from \"../components/Footer\";\nimport Lang from '../lang/Lang';\nimport { Config } from \"../Config\";\nimport JieLongBanner from \"../components/JieLongDetails/JieLongBanner\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      item: _this.props.item,\n      productList: undefined,\n      showLoading: false,\n      userJieLongInfo: '',\n      isLogin: false,\n      iosShow: false,\n      showVoucher: false,\n      actions: [{\n        label: '取消',\n        onClick: _this.hide.bind(_assertThisInitialized(_this))\n      }]\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"hide\",\n    value: function hide() {\n      this.setState({\n        iosShow: false\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getIsInCurrentJieLong();\n\n      if (this.state.item.multi_participations) {\n        this.getAllJielong();\n      }\n\n      this.getRelatedProducts();\n      this.setState({\n        isLogin: localStorage.getItem('isLogIn')\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(object, nextProps) {\n      this.setState({\n        item: object.item\n      });\n    }\n  }, {\n    key: \"getRelatedProducts\",\n    value: function getRelatedProducts() {\n      var _this2 = this;\n\n      var params = this.state.item.company_id + '?is_draft=0&is_sync_to_market=1&page=1&page-size=6';\n      ItemService.getRelatedProducts(params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this2.setState({\n          productList: responseJson\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return this.state !== nextProps;\n    }\n  }, {\n    key: \"getIsInCurrentJieLong\",\n    value: function getIsInCurrentJieLong() {\n      var _this3 = this;\n\n      var id = this.state.item.id;\n      JielongService.getIsInCurrentJieLong(id).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this3.setState({\n          userJieLongInfo: responseJson\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"getAllJielong\",\n    value: function getAllJielong() {\n      var _this4 = this;\n\n      var id = this.state.item.id;\n      var isLogIn = localStorage.getItem('isLogIn');\n\n      if (isLogIn) {\n        JielongService.getAllJielong(id).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          _this4.setState({\n            allJielongInfo: responseJson\n          });\n        }).catch(function (error) {\n          console.error(error);\n        });\n      }\n    }\n  }, {\n    key: \"cancelJielong\",\n    value: function cancelJielong() {\n      var _this5 = this;\n\n      this.hide();\n      this.setState({\n        showLoading: true\n      });\n      var id = this.state.userJieLongInfo.currentUserJieLong.id;\n      var url = \"https://www.showmine66.com/ma/i/\" + this.state.item.id;\n      var params = {};\n      JielongService.cancelJielong(id, url, params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this5.setState({\n          showLoading: false\n        });\n\n        window.location.reload();\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"updateJielong\",\n    value: function updateJielong() {\n      var itemId = {\n        itemId: this.state.item.id,\n        is_update: true,\n        jielongId: this.state.userJieLongInfo.currentUserJieLong.id\n      };\n      Router.push({\n        pathname: '/checkoutPage',\n        query: itemId\n      });\n    }\n  }, {\n    key: \"checkLoginStatus\",\n    value: function checkLoginStatus() {\n      var itemId = {\n        itemId: this.state.item.id\n      };\n      var isLogIn = localStorage.getItem('isLogIn');\n\n      if (isLogIn) {\n        Router.push({\n          pathname: '/checkoutPage',\n          query: itemId\n        });\n      } else {\n        this.weChatLogin();\n      }\n    }\n  }, {\n    key: \"weChatLogin\",\n    value: function weChatLogin() {\n      var origUrl = this.state.item.id; // let authUrl = \"http://localhost:3000/AuthPage\";\n\n      var authUrl = Config.webAddress + \"AuthPage\";\n      var params = {};\n      AuthService.wechatLogin(origUrl, authUrl, params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        window.open(responseJson.auth_url, \"_self\");\n      }).catch(function (error) {\n        console.error(error);\n        alert(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var userJieLongInfo = this.state.userJieLongInfo;\n      var productList = this.state.productList && this.state.productList.data ? this.state.productList.data : undefined;\n      var item = this.state.item ? this.state.item : undefined;\n      var allJielongInfo = this.state.allJielongInfo ? this.state.allJielongInfo : undefined;\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(SiteHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"App-body\",\n        key: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(JieLongBanner, {\n        images: item.images,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }), React.createElement(JielongContent, {\n        jieLongDetail: item ? item : undefined,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), this.state.isLogin && userJieLongInfo && userJieLongInfo.currentUserJieLong && userJieLongInfo.currentUserJieLong.voucher && userJieLongInfo.currentUserJieLong.voucher.refnum && !item.multi_participations ? React.createElement(Cells, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(Cell, {\n        href: userJieLongInfo.currentUserJieLong.voucher.img_url,\n        access: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(CellBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"isInJielong-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"tag-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"\\u53C2\\u52A0\\u6210\\u529F\"), \" \\u56DE\\u6267\\u7801\\uFF1A\", React.createElement(\"span\", {\n        className: \"Ref-num\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, userJieLongInfo.currentUserJieLong.voucher.refnum)))), React.createElement(CellFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }))) : null, React.createElement(Cells, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, this.state.isLogin && allJielongInfo ? allJielongInfo.map(function (jieLong) {\n        return React.createElement(\"div\", {\n          key: jieLong.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223\n          },\n          __self: this\n        }, React.createElement(Cell, {\n          href: undefined,\n          onClick: function onClick(e) {\n            return _this6.setState({\n              showVoucher: true\n            });\n          },\n          access: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225\n          },\n          __self: this\n        }, jieLong && jieLong.is_paid && jieLong.voucher && jieLong.voucher.receipt && jieLong.voucher.receipt.amount && jieLong.voucher.refnum ? React.createElement(\"div\", {\n          className: \"allJielongInfo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"paidAmount-icon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229\n          },\n          __self: this\n        }, \"\\u5DF2\\u652F\\u4ED8\\uFF1A$\", jieLong.voucher.receipt.amount), \" \\u56DE\\u6267\\u7801\\uFF1A\", React.createElement(\"span\", {\n          className: \"Ref-num\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229\n          },\n          __self: this\n        }, jieLong.voucher.refnum))) : React.createElement(\"div\", {\n          className: \"isInJielong-row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232\n          },\n          __self: this\n        }, jieLong.voucher && jieLong.voucher.refnum ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"tag-icon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }, \"\\u53C2\\u52A0\\u6210\\u529F\"), \" \\u56DE\\u6267\\u7801\\uFF1A\", React.createElement(\"span\", {\n          className: \"Ref-num\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }, jieLong.voucher.refnum)) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        }, \"\\u63D0\\u793A\\uFF1A\\u8BF7\\u572830\\u5206\\u949F\\u5185\\u5B8C\\u6210\\u652F\\u4ED8\\uFF0C\\u5426\\u5219\\u8BA2\\u5355\\u4F1A\\u64A4\\u9500\"))), React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242\n          },\n          __self: this\n        })), React.createElement(Gallery, {\n          src: jieLong.voucher && jieLong.voucher.img_url ? jieLong.voucher.img_url : undefined,\n          show: _this6.state.showVoucher,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 244\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: styles.galleryButton,\n          onClick: function onClick(e) {\n            return _this6.setState({\n              showVoucher: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245\n          },\n          __self: this\n        }, \"Cancel\")));\n      }) : null), React.createElement(ChildrenList, {\n        children: item.children ? item.children : undefined,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }), item.company ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(Link, {\n        href: {\n          pathname: '/companyDetails',\n          query: {\n            companyId: item.company.id\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"company-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"company-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        height: 100,\n        src: item.company.logo_img.url,\n        role: \"presentation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"company-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"company-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, item.company.name), React.createElement(\"div\", {\n        className: \"company-followers\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, \"\\u5173\\u6CE8\\u91CF\\uFF1A\", item.company.followers))))), React.createElement(\"div\", {\n        className: \"divider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      })) : null, React.createElement(\"div\", {\n        className: \"related-product\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, React.createElement(ProductCardGrid, {\n        productList: productList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      })), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"button-area\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, this.state.isLogin && userJieLongInfo && userJieLongInfo.currentUserJieLong && !userJieLongInfo.currentUserJieLong.is_paid ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        onClick: function onClick(e) {\n          return _this6.setState({\n            iosShow: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, \"\\u4FEE\\u6539\\u8BA2\\u5355\"), React.createElement(ActionSheet, {\n        menus: [{\n          label: '修改团购',\n          onClick: function onClick() {\n            _this6.updateJielong();\n          }\n        }, {\n          label: '取消团购',\n          onClick: function onClick() {\n            _this6.cancelJielong();\n          }\n        }],\n        actions: this.state.actions,\n        show: this.state.iosShow,\n        type: \"ios\",\n        onRequestClose: function onRequestClose(e) {\n          return _this6.setState({\n            iosShow: false\n          });\n        },\n        style: {\n          color: 'black'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }), React.createElement(Toast, {\n        icon: \"loading\",\n        show: this.state.showLoading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, \"Loading...\")) : React.createElement(Button, {\n        type: \"primary\",\n        className: \"button\",\n        onClick: function onClick() {\n          _this6.checkLoginStatus();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, \"\\u9A6C\\u4E0A\\u4E0B\\u5355\"))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\n_defineProperty(App, \"getInitialProps\",\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(_ref) {\n    var req, query, res, json;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            req = _ref.req, query = _ref.query;\n            res = '';\n\n            if (!query.itemId) {\n              _context.next = 8;\n              break;\n            }\n\n            _context.next = 5;\n            return ItemService.getItemDetail(query.itemId);\n\n          case 5:\n            res = _context.sent;\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.next = 10;\n            return ItemService.getItemDetail('a3067bcbd7521b4965ef8b43394aa011');\n\n          case 10:\n            res = _context.sent;\n\n          case 11:\n            _context.next = 13;\n            return res.json();\n\n          case 13:\n            json = _context.sent;\n            return _context.abrupt(\"return\", {\n              item: json\n            });\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\nvar styles = {\n  galleryButton: {\n    color: 'white',\n    fontWeight: 'bold',\n    padding: '0'\n  }\n};\nexport default App;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/index.js"],"names":["React","Component","Button","Cells","Cell","CellBody","CellFooter","ActionSheet","Toast","Gallery","ItemService","JielongService","AuthService","Router","SiteHeader","Link","Swipe","Head","ProductCardGrid","ChildrenList","JielongContent","Footer","Lang","Config","JieLongBanner","App","props","state","item","productList","undefined","showLoading","userJieLongInfo","isLogin","iosShow","showVoucher","actions","label","onClick","hide","bind","setState","getIsInCurrentJieLong","multi_participations","getAllJielong","getRelatedProducts","localStorage","getItem","object","nextProps","params","company_id","then","response","json","responseJson","catch","error","console","id","isLogIn","allJielongInfo","currentUserJieLong","url","cancelJielong","window","location","reload","itemId","is_update","jielongId","push","pathname","query","weChatLogin","origUrl","authUrl","webAddress","wechatLogin","open","auth_url","alert","data","images","voucher","refnum","img_url","map","jieLong","e","is_paid","receipt","amount","styles","galleryButton","children","company","companyId","logo_img","name","followers","updateJielong","color","checkLoginStatus","req","res","getItemDetail","fontWeight","padding"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport {Button, Cells, Cell, CellBody, CellFooter, ActionSheet, Toast, Gallery} from 'react-weui';\nimport ItemService from '../service/ItemService';\nimport JielongService from '../service/JielongService';\nimport AuthService from \"../service/AuthService\";\nimport Router from 'next/router';\nimport SiteHeader from '../components/Common/SiteHeader';\nimport Link from 'next/link';\n\n\n//import styles\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css';\n\n\n//import component\nimport Swipe from '../components/Swipe';\nimport Head from \"../components/head\";\nimport ProductCardGrid from \"../components/ProductCards/ProductCardGrid\";\nimport ChildrenList from '../components/JieLongDetails/ChildrenList';\nimport JielongContent from '../components/JieLongDetails/JieLongContent';\nimport Footer from \"../components/Footer\";\nimport Lang from '../lang/Lang';\nimport {Config} from \"../Config\";\nimport JieLongBanner from \"../components/JieLongDetails/JieLongBanner\";\n\n\n\nclass App extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            item: this.props.item,\n            productList: undefined,\n            showLoading: false,\n            userJieLongInfo: '',\n            isLogin: false,\n            iosShow: false,\n            showVoucher: false,\n            actions: [\n                {\n                    label: '取消',\n                    onClick: this.hide.bind(this)\n                }\n            ],\n        };\n    }\n\n    hide(){\n        this.setState({\n            iosShow: false,\n        });\n    }\n\n    static getInitialProps = async({ req, query }) => {\n        let res = '';\n        if (query.itemId) {\n            res = await ItemService.getItemDetail(query.itemId);\n        }\n        else {\n            res = await ItemService.getItemDetail('a3067bcbd7521b4965ef8b43394aa011');\n            // res = await ItemService.getItemDetail('0f95b4d63b1afa75c3a9e2b3fae27cdf');\n        }\n        const json = await res.json();\n        return { item: json };\n    };\n\n\n    componentDidMount() {\n        this.getIsInCurrentJieLong();\n        if (this.state.item.multi_participations) {\n            this.getAllJielong();\n        }\n        this.getRelatedProducts();\n        this.setState({\n            isLogin: localStorage.getItem('isLogIn'),\n        });\n    }\n\n    componentWillReceiveProps(object, nextProps) {\n        this.setState({\n            item: object.item\n        })\n    }\n\n    getRelatedProducts() {\n        let params = this.state.item.company_id + '?is_draft=0&is_sync_to_market=1&page=1&page-size=6';\n        ItemService.getRelatedProducts(params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    productList: responseJson\n                });\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    shouldComponentUpdate(nextProps) {\n        return this.state !== nextProps;\n    }\n\n    getIsInCurrentJieLong() {\n        let id = this.state.item.id;\n        JielongService.getIsInCurrentJieLong(id)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    userJieLongInfo: responseJson,\n                });\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    getAllJielong() {\n        let id = this.state.item.id;\n        const isLogIn = localStorage.getItem('isLogIn');\n        if (isLogIn) {\n            JielongService.getAllJielong(id)\n                .then((response) => response.json())\n                .then((responseJson) => {\n                    this.setState({\n                        allJielongInfo: responseJson,\n                    });\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        }\n    }\n\n    cancelJielong() {\n        this.hide();\n        this.setState({showLoading: true});\n        let id = this.state.userJieLongInfo.currentUserJieLong.id;\n        let url = \"https://www.showmine66.com/ma/i/\" + this.state.item.id;\n        let params ={};\n        JielongService.cancelJielong(id, url, params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({showLoading: false});\n                window.location.reload();\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    updateJielong() {\n        let itemId = { itemId: this.state.item.id, is_update: true, jielongId: this.state.userJieLongInfo.currentUserJieLong.id};\n        Router.push({\n            pathname: '/checkoutPage',\n            query: itemId,\n        });\n    }\n\n    checkLoginStatus() {\n        let itemId = { itemId: this.state.item.id};\n        let isLogIn = localStorage.getItem('isLogIn');\n        if (isLogIn) {\n            Router.push({\n                pathname: '/checkoutPage',\n                query: itemId,\n            });\n        }\n        else {\n            this.weChatLogin();\n        }\n    }\n\n    weChatLogin() {\n        let origUrl = this.state.item.id;\n        // let authUrl = \"http://localhost:3000/AuthPage\";\n        let authUrl = Config.webAddress + \"AuthPage\";\n        let params ={};\n        AuthService.wechatLogin(origUrl, authUrl, params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                window.open(responseJson.auth_url, \"_self\");\n            })\n            .catch((error) => {\n                console.error(error);\n                alert(error);\n            });\n    }\n\n    render() {\n        const userJieLongInfo = this.state.userJieLongInfo;\n        const productList = this.state.productList && this.state.productList.data ? this.state.productList.data : undefined;\n        const item = this.state.item ? this.state.item : undefined;\n        const allJielongInfo = this.state.allJielongInfo ? this.state.allJielongInfo : undefined;\n\n        return (\n            <div className=\"App\">\n                <SiteHeader/>\n                <div className='App-body' key={item.id}>\n                    <JieLongBanner images={item.images}/>\n                    <JielongContent jieLongDetail={item ? item : undefined}/>\n                    {\n                        this.state.isLogin && userJieLongInfo && userJieLongInfo.currentUserJieLong && userJieLongInfo.currentUserJieLong.voucher && userJieLongInfo.currentUserJieLong.voucher.refnum && !item.multi_participations ?\n                            (\n                                <Cells>\n                                    <Cell href={userJieLongInfo.currentUserJieLong.voucher.img_url} access>\n                                        <CellBody>\n                                            <div className='isInJielong-row'>\n                                                <div><span className='tag-icon'>参加成功</span> 回执码：<span className='Ref-num'>{userJieLongInfo.currentUserJieLong.voucher.refnum}</span></div>\n                                            </div>\n                                        </CellBody>\n                                        <CellFooter/>\n                                    </Cell>\n                                </Cells>\n                            )\n                            : null\n                    }\n                    <Cells>\n                        {\n                            this.state.isLogin && allJielongInfo ?\n                                allJielongInfo.map((jieLong) =>\n                                    <div key={jieLong.id}>\n                                        <Cell href={undefined} onClick={e=>this.setState({ showVoucher: true})} access>\n                                            <CellBody>\n                                                {\n                                                    jieLong && jieLong.is_paid && jieLong.voucher && jieLong.voucher.receipt && jieLong.voucher.receipt.amount && jieLong.voucher.refnum ?\n                                                        <div className='allJielongInfo'>\n                                                            <div><span className='paidAmount-icon'>已支付：${jieLong.voucher.receipt.amount}</span> 回执码：<span className='Ref-num'>{jieLong.voucher.refnum}</span></div>\n                                                        </div>\n                                                        :\n                                                        <div className='isInJielong-row'>\n                                                            {\n                                                                jieLong.voucher && jieLong.voucher.refnum ?\n                                                                    <div><span className='tag-icon'>参加成功</span> 回执码：<span className='Ref-num'>{jieLong.voucher.refnum}</span></div>\n                                                                    :\n                                                                    <div>提示：请在30分钟内完成支付，否则订单会撤销</div>\n                                                            }\n                                                        </div>\n                                                }\n                                            </CellBody>\n                                            <CellFooter/>\n                                        </Cell>\n                                        <Gallery src={jieLong.voucher && jieLong.voucher.img_url ? jieLong.voucher.img_url : undefined} show={this.state.showVoucher}>\n                                            <div\n                                                style={styles.galleryButton}\n                                                onClick={e=>this.setState({ showVoucher: false})}\n                                            >\n                                                Cancel\n                                            </div>\n                                        </Gallery>\n                                    </div>\n\n                                )\n                                :\n                                null\n                        }\n                    </Cells>\n\n                    <ChildrenList children={item.children ? item.children : undefined}/>\n                    {item.company ?\n                        (\n                            <div>\n                                <Link href={{ pathname: '/companyDetails', query: { companyId: item.company.id} }}>\n                                    <a>\n                                        <div className='company-info'>\n                                            <div className='company-img'>\n                                                <img height={100} src={item.company.logo_img.url} role=\"presentation\" />\n                                            </div>\n                                            <div className='company-content'>\n                                                <div className='company-title'>{item.company.name}</div>\n                                                <div className='company-followers'>关注量：{item.company.followers}</div>\n                                            </div>\n                                        </div>\n                                    </a>\n                                </Link>\n                                <div className='divider'/>\n                            </div>)\n                        :\n                        null\n                    }\n                    <div className='related-product'>\n                        <ProductCardGrid productList={productList}/>\n                    </div>\n                    <Footer/>\n                    <div className='button-area'>\n                        {this.state.isLogin && userJieLongInfo && userJieLongInfo.currentUserJieLong && !userJieLongInfo.currentUserJieLong.is_paid ?\n                            (\n                                <div>\n                                    <Button type=\"primary\" onClick={e=>this.setState({iosShow: true})}>修改订单</Button>\n                                    <ActionSheet\n                                        menus={[{\n                                            label: '修改团购',\n                                            onClick: ()=> {this.updateJielong();}\n                                        }, {\n                                            label: '取消团购',\n                                            onClick: ()=> {this.cancelJielong();}\n                                        }]}\n                                        actions={this.state.actions}\n                                        show={this.state.iosShow}\n                                        type=\"ios\"\n                                        onRequestClose={e=>this.setState({iosShow: false})}\n                                        style={{color:'black'}}\n                                    />\n                                    <Toast icon=\"loading\" show={this.state.showLoading}>Loading...</Toast>\n                                </div>\n                            )\n                            :\n                            <Button type=\"primary\" className='button' onClick={()=>{this.checkLoginStatus();}}>马上下单</Button>\n                        }\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst styles = {\n    galleryButton: {\n        color: 'white',\n        fontWeight:'bold',\n        padding: '0',\n    }\n}\n\nexport default App;\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}