{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport Colors from \"../../../constants/Colors\";\nimport RegistrationFields from \"./RegistrationFields\";\nimport RegistrationButtonArea from \"./RegistrationButtonArea\";\nimport RegistrationVoucherComponent from \"./RegistrationVoucherComponent\";\nimport ItemBanner from \"../ItemBanner\";\nimport ItemContent from \"../ItemContent\";\nimport AuthService from \"../../../service/AuthService\";\nimport { Config } from \"../../../Config\";\n\nvar RegistrationDetailComponent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RegistrationDetailComponent, _Component);\n\n  function RegistrationDetailComponent(props) {\n    var _this;\n\n    _classCallCheck(this, RegistrationDetailComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RegistrationDetailComponent).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"updateFormValues\", function (formValues, isValidForm) {\n      _this.setState({\n        formValues: formValues,\n        isValidForm: isValidForm\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateIsParticipatedInfo\", function (isParticipated, registrationObj) {\n      _this.setState({\n        isParticipated: isParticipated,\n        registrationId: registrationObj && registrationObj.id ? registrationObj.id : undefined,\n        registrationObj: registrationObj\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateIsEditing\", function () {\n      _this.setState(function (prevState) {\n        return {\n          isEditing: !prevState.isEditing\n        };\n      });\n    });\n\n    _this.state = {\n      isLogin: _this.props.isLogin,\n      item: _this.props.item,\n      isParticipated: false,\n      isEditing: false,\n      registrationObj: undefined,\n      registrationId: undefined,\n      formValues: {},\n      isValidForm: false\n    };\n    return _this;\n  }\n\n  _createClass(RegistrationDetailComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.setState({\n        isLogin: localStorage.getItem('isLogIn')\n      }, function () {\n        if (!_this2.state.isLogin) {\n          _this2.weChatLogin();\n        }\n      });\n    }\n  }, {\n    key: \"weChatLogin\",\n    value: function weChatLogin() {\n      var origUrl = window.location.href;\n      var authUrl = Config.webAddress + 'AuthPage';\n      AuthService.wechatLogin(origUrl, authUrl, {}).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        window.open(responseJson.auth_url, \"_self\");\n      }).catch(function (error) {\n        alert(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          item = _this$state.item,\n          isLogin = _this$state.isLogin,\n          isParticipated = _this$state.isParticipated,\n          registrationId = _this$state.registrationId,\n          registrationObj = _this$state.registrationObj,\n          isValidForm = _this$state.isValidForm,\n          isEditing = _this$state.isEditing;\n      return React.createElement(\"div\", {\n        className: \"App-body\",\n        key: item.id,\n        style: styles.pageBackground\n      }, React.createElement(ItemBanner, {\n        item: item\n      }), React.createElement(RegistrationVoucherComponent, {\n        item: item,\n        isLogin: isLogin,\n        callbackUpdateIsParticipated: this.updateIsParticipatedInfo\n      }), React.createElement(ItemContent, {\n        itemDetail: item ? item : undefined,\n        showDivider: false\n      }), React.createElement(RegistrationFields, {\n        item: item,\n        callbackUpdateForm: this.updateFormValues,\n        isParticipated: isParticipated,\n        isEditing: isEditing,\n        registrationObj: registrationObj\n      }), React.createElement(RegistrationButtonArea, {\n        item: item,\n        isLogin: isLogin,\n        formValues: this.state.formValues,\n        isParticipated: isParticipated,\n        registrationId: registrationId,\n        isValidForm: isValidForm,\n        callbackUpdateIsEditing: this.updateIsEditing,\n        isEditing: isEditing\n      }));\n    }\n  }]);\n\n  return RegistrationDetailComponent;\n}(Component);\n\nvar styles = {\n  pageBackground: {\n    backgroundColor: Colors.formBackground\n  }\n};\nexport default RegistrationDetailComponent;","map":null,"metadata":{},"sourceType":"module"}