{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM_React/shm-react/my-app/components/Company/ConsultationList/ConsultationList.js\";\nimport React from 'react';\nimport ItemService from \"../../../service/ItemService\";\nimport ConsultationListItem from \"../ConsultationList/ConsultationListItem\";\nimport Colors from '../../../constants/Colors';\nimport Lang from '../../../lang/Lang';\nimport { Button, LoadMore } from 'react-weui';\n\nvar ConsultationList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ConsultationList, _React$Component);\n\n  function ConsultationList(props) {\n    var _this;\n\n    _classCallCheck(this, ConsultationList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ConsultationList).call(this, props));\n    _this.state = {\n      companyId: _this.props.companyId,\n      showDivider: !!_this.props.showDivider,\n      params: {\n        'page': 1,\n        'page-size': 4\n      }\n    };\n    return _this;\n  }\n\n  _createClass(ConsultationList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getConsultations();\n    }\n  }, {\n    key: \"getConsultations\",\n    value: function getConsultations() {\n      var _this2 = this;\n\n      var loadingMore = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var params = this.state.params;\n      this.setState({\n        loading: true,\n        loadingMore: loadingMore\n      });\n      ItemService.getCompanyConsultationList(this.state.companyId, params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        if (_this2.state.params.page !== 1) {\n          var previousData = _this2.state.consultationList.data;\n          responseJson.data = previousData.concat(responseJson.data);\n        }\n\n        _this2.setState({\n          consultationList: responseJson,\n          params: {\n            'page': _parseInt(responseJson.current_page) + 1,\n            'page-size': 4\n          },\n          hasMore: responseJson.current_page < responseJson.last_page\n        });\n      }).catch(function (error) {\n        console.error(error);\n      }).finally(function () {\n        _this2.setState({\n          loading: false,\n          loadingMore: false\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var consultationList = this.state.consultationList ? this.state.consultationList : undefined;\n      var title = Lang.translate('COMPANY.CONSULTATION.TITLE');\n      var showDivider = this.state.showDivider;\n      var hasMore = this.state.hasMore;\n      var loading = this.state.loading;\n      var loadingMore = this.state.loadingMore;\n\n      if (consultationList) {\n        return React.createElement(\"div\", {\n          style: styles.listWrapper,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: styles.listTitle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, title), consultationList.data.map(function (item, index) {\n          return React.createElement(ConsultationListItem, {\n            item: item,\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 66\n            },\n            __self: this\n          });\n        }), hasMore ? loadingMore ? React.createElement(LoadMore, {\n          loading: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, \"Loading\") : React.createElement(Button, {\n          type: \"primary\",\n          plain: true,\n          style: styles.buttonGap,\n          onClick: function onClick() {\n            _this3.getConsultations(true);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, Lang.translate('COMPANY.CONSULTATION.SHOW_MORE')) : null, showDivider ? React.createElement(\"div\", {\n          style: styles.bottomDivider,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, \" \") : null);\n      } else return null;\n    }\n  }]);\n\n  return ConsultationList;\n}(React.Component);\n\nvar styles = {\n  listWrapper: {\n    width: '100%'\n  },\n  listTitle: {\n    padding: '10px',\n    fontSize: '18px',\n    fontWeight: 'bold',\n    color: Colors.fontColor\n  },\n  bottomDivider: {\n    clear: 'both',\n    padding: '3px 0',\n    backgroundColor: Colors.borderColor,\n    display: 'block'\n  },\n  buttonGap: {\n    marginBottom: '10px'\n  }\n};\nexport default ConsultationList;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM_React/shm-react/my-app/components/Company/ConsultationList/ConsultationList.js"],"names":["React","ItemService","ConsultationListItem","Colors","Lang","Button","LoadMore","ConsultationList","props","state","companyId","showDivider","params","getConsultations","loadingMore","setState","loading","getCompanyConsultationList","then","response","json","responseJson","page","previousData","consultationList","data","concat","current_page","hasMore","last_page","catch","error","console","finally","undefined","title","translate","styles","listWrapper","listTitle","map","item","index","buttonGap","bottomDivider","Component","width","padding","fontSize","fontWeight","color","fontColor","clear","backgroundColor","borderColor","display","marginBottom"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ItemService from \"../../../service/ItemService\";\nimport ConsultationListItem from \"../ConsultationList/ConsultationListItem\";\nimport Colors from '../../../constants/Colors';\nimport Lang from '../../../lang/Lang';\nimport {Button, LoadMore} from 'react-weui';\n\n\nclass ConsultationList extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            companyId: this.props.companyId,\n            showDivider: !!this.props.showDivider,\n            params: {'page': 1, 'page-size': 4}\n        };\n    }\n\n    componentDidMount() {\n        this.getConsultations();\n    }\n\n    getConsultations(loadingMore = false) {\n        let params = this.state.params;\n        this.setState({\n            loading: true,\n            loadingMore: loadingMore\n        });\n        ItemService.getCompanyConsultationList(this.state.companyId, params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                if (this.state.params.page !== 1) {\n                    let previousData = this.state.consultationList.data;\n                    responseJson.data = previousData.concat(responseJson.data);\n                }\n                this.setState({\n                    consultationList: responseJson,\n                    params: {'page': parseInt(responseJson.current_page) + 1, 'page-size': 4},\n                    hasMore: responseJson.current_page < responseJson.last_page\n                });\n            })\n            .catch((error) => {\n                console.error(error);\n            })\n            .finally(() => {\n                this.setState({\n                    loading: false,\n                    loadingMore: false\n                })\n            });\n    };\n\n    render(){\n        const consultationList = this.state.consultationList ? this.state.consultationList : undefined;\n        const title = Lang.translate('COMPANY.CONSULTATION.TITLE');\n        const showDivider = this.state.showDivider;\n        const hasMore = this.state.hasMore;\n        let loading = this.state.loading;\n        let loadingMore = this.state.loadingMore;\n        if (consultationList) {\n            return (\n                <div style={styles.listWrapper}>\n                    <div style={styles.listTitle}>{title}</div>\n                    {\n                        consultationList.data.map(function(item,index){\n                        return (<ConsultationListItem item={item} key={index}/>)})\n                    }\n                    {\n                        hasMore ?\n                        (\n                            loadingMore ?\n                                <LoadMore loading>Loading</LoadMore>\n                            :\n                                (<Button type=\"primary\" plain style={styles.buttonGap} onClick={()=>{this.getConsultations(true)}}>\n                                {Lang.translate('COMPANY.CONSULTATION.SHOW_MORE')}</Button>))\n                        :\n                            null\n                    }\n                    {showDivider ? <div style={styles.bottomDivider}> </div> : null}\n                </div>\n            );\n        }\n        else return null;\n    }\n}\n\nconst styles = {\n    listWrapper: {\n        width: '100%'\n    },\n    listTitle: {\n        padding: '10px',\n        fontSize: '18px',\n        fontWeight: 'bold',\n        color: Colors.fontColor\n    },\n    bottomDivider: {\n        clear: 'both',\n        padding: '3px 0',\n        backgroundColor: Colors.borderColor,\n        display: 'block'\n    },\n    buttonGap: {\n        marginBottom: '10px'\n    }\n};\n\nexport default ConsultationList;\n"]},"metadata":{},"sourceType":"module"}