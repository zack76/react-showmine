{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/checkoutPage.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Button, TextArea, ActionSheet, Switch, Radio, Cells, CellsTitle, Cell, CellHeader, CellBody, CellFooter, Form, FormCell, Input, Label, LoadMore, Toast, Gallery } from 'react-weui';\nimport ItemService from '../service/ItemService';\nimport JielongService from '../service/JielongService';\nimport PaymentService from '../service/PaymentService'; //import styles\n\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css'; //import component\n\nimport Head from \"../components/head\";\nimport { Config } from \"../Config\";\n\nvar checkoutPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(checkoutPage, _Component);\n\n  function checkoutPage(props) {\n    var _this;\n\n    _classCallCheck(this, checkoutPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(checkoutPage).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"addJielong\", function () {\n      _this.setState({\n        showLoading: true\n      });\n\n      var id = _this.state.itemId;\n      var configObj = {};\n      var params = {\n        comments: _this.state.notes,\n        config: _JSON$stringify(configObj),\n        item_url: \"https://www.showmine66.com/ma/i/\" + _this.state.item.id,\n        location: _this.state.item.company.pickup_locations[_this.state.locationId].id,\n        is_private: _this.state.hideAvatar,\n        quantity: [],\n        state_redirect_obj: {\n          url: Config.webAddress // url: \"http://localhost:3000\",\n\n        },\n        voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n        wechat_auth_url: \"https://www.showmine66.com/a/wu?domain=https%253A%252F%252Fwww.showmine66.com&origurl=https%253A%252F%252Fwww.showmine66.com%252Fma%252Fi%252Fdbfcefa936b4cd6d5709953b5ea12673%2523app-top\"\n      };\n\n      for (var index = 0; index <= _this.state.quantityOfChildren.length; index++) {\n        if (_this.state.quantityOfChildren[index] !== null && _this.state.quantityOfChildren[index] !== undefined) {\n          params.quantity.push({\n            item_id: _this.state.item.children[index].id,\n            quantity: _this.state.quantityOfChildren[index],\n            price: _this.state.priceOfChildren[index].toString()\n          });\n        }\n      }\n\n      if (_this.state.is_update) {\n        JielongService.updateJielong(params, id).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          _this.setState({\n            jielong: responseJson\n          });\n\n          if (_this.state.payment_method == \"NoPayment\") {\n            _this.generateVoucher();\n          } else {\n            _this.processPayment();\n          }\n        }).catch(function (error) {\n          console.error(error);\n        });\n      } else {\n        JielongService.addJielong(params, id).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          _this.setState({\n            jielong: responseJson\n          });\n\n          if (_this.state.payment_method == \"NoPayment\") {\n            _this.generateVoucher();\n          } else {\n            _this.processPayment();\n          }\n        }).catch(function (error) {\n          console.error(error);\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"processPayment\", function () {\n      // \"redirectUrl\": Config.webAddress + \"index?itemId=\" + this.state.jielong.item_id\n      var configObj = {\n        \"source\": \"jielong_payment\",\n        \"item_comment_id\": _this.state.jielong.id,\n        \"item_id\": _this.state.jielong.item_id,\n        \"redirectUrl\": Config.webAddress + \"index?itemId=\" + _this.state.jielong.item_id\n      };\n      var params = {\n        config: _JSON$stringify(configObj),\n        item_comment_id: _this.state.jielong.id,\n        payment_method: _this.state.payment_method\n      };\n      PaymentService.getToPay(params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this.setState({\n          payment: responseJson\n        });\n\n        window.open(responseJson.pay_url, \"_self\");\n\n        _this.setState({\n          showLoading: false\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    });\n\n    _this.state = {\n      jielong: 'none',\n      payment: 'none',\n      processPayment: false,\n      showLocation: false,\n      ios_show: false,\n      actions: [{\n        label: '取消',\n        onClick: _this.hide.bind(_assertThisInitialized(_this))\n      }],\n      quantity: 0,\n      itemId: '',\n      name: '',\n      contact_number: '',\n      address: '',\n      notes: '',\n      hideAvatar: true,\n      payment_method: null,\n      pickup_location: '',\n      quantityOfChildren: [],\n      priceOfChildren: [],\n      totalPrice: 0,\n      showLoading: false,\n      loadingTimer: null,\n      is_update: false,\n      showVoucher: false\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.switch = _this.switch.bind(_assertThisInitialized(_this));\n    _this.handlePayment = _this.handlePayment.bind(_assertThisInitialized(_this));\n    _this.handleQuantity = _this.handleQuantity.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(checkoutPage, [{\n    key: \"placeOrder\",\n    value: function placeOrder() {\n      this.setState({\n        processPayment: true\n      });\n    }\n  }, {\n    key: \"generateVoucher\",\n    value: function generateVoucher() {\n      var _this2 = this;\n\n      var id = this.state.jielong.id;\n      var params = {\n        is_update: this.state.is_update,\n        item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n        voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\"\n      };\n      JielongService.generateVoucher(params, id).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this2.setState({\n          voucher: responseJson\n        }); // window.open(responseJson.url,\"_self\");\n\n\n        _this2.setState({\n          showLoading: false\n        });\n\n        return React.createElement(Gallery, {\n          src: responseJson && responseJson.url ? responseJson.url : undefined,\n          show: _this2.state.showVoucher,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: styles.galleryButton,\n          onClick: function onClick(e) {\n            return _this2.setState({\n              showVoucher: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, \"Cancel\"));\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState(_defineProperty({}, event.target.name, event.target.value));\n    }\n  }, {\n    key: \"handleTotalPrice\",\n    value: function handleTotalPrice() {\n      this.state.totalPrice = 0;\n\n      for (var index = 0; index <= this.state.priceOfChildren.length; index++) {\n        if (this.state.priceOfChildren[index]) {\n          this.state.totalPrice = this.state.totalPrice + this.state.priceOfChildren[index];\n        }\n      }\n\n      this.setState({\n        totalPrice: this.state.totalPrice\n      });\n    }\n  }, {\n    key: \"handleQuantity\",\n    value: function handleQuantity(event) {\n      this.state.quantityOfChildren[event.target.name] = Number(event.target.value);\n      this.state.priceOfChildren[event.target.name] = this.state.quantityOfChildren[event.target.name] * this.state.item.children[event.target.name].price;\n      this.setState({\n        quantityOfChildren: this.state.quantityOfChildren,\n        priceOfChildren: this.state.priceOfChildren\n      });\n      this.handleTotalPrice();\n    }\n  }, {\n    key: \"minus\",\n    value: function minus(index) {\n      if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index] === null || this.state.quantityOfChildren[index] === undefined || this.state.quantityOfChildren[index] === 0) {\n        console.log('Cannot minus');\n      } else {\n        this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] - 1;\n        this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n        this.setState({\n          quantityOfChildren: this.state.quantityOfChildren,\n          priceOfChildren: this.state.priceOfChildren\n        });\n        this.handleTotalPrice();\n      }\n    }\n  }, {\n    key: \"plus\",\n    value: function plus(index) {\n      if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index] === null || this.state.quantityOfChildren[index] === undefined) {\n        this.state.quantityOfChildren[index] = 0;\n      }\n\n      this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] + 1;\n      this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n      this.setState({\n        quantityOfChildren: this.state.quantityOfChildren,\n        priceOfChildren: this.state.priceOfChildren\n      });\n      this.handleTotalPrice();\n    }\n  }, {\n    key: \"handlePayment\",\n    value: function handlePayment(event) {\n      this.setState({\n        payment_method: event.target.value\n      });\n    }\n  }, {\n    key: \"switch\",\n    value: function _switch() {\n      this.setState({\n        hideAvatar: !this.state.hideAvatar\n      });\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.setState({\n        ios_show: false\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var params = this.props.url.query.itemId;\n\n      if (this.props.url.query.is_update) {\n        this.setState({\n          is_update: this.props.url.query.is_update\n        });\n      }\n\n      ItemService.getItemDetail(params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this3.setState({\n          item: responseJson,\n          itemId: responseJson.id\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.state.loadingTimer && clearTimeout(this.state.loadingTimer);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      /**\n       * Display the pickup locations list\n       */\n      var locationsList = null;\n\n      if (this.state.item) {\n        locationsList = this.state.item.company.pickup_locations.map(function (location, index) {\n          return React.createElement(ActionSheet, {\n            key: location.id,\n            menus: [{\n              label: location.title,\n              onClick: function onClick() {\n                _this4.setState({\n                  locationId: index,\n                  showLocation: true\n                });\n\n                _this4.hide();\n              }\n            }],\n            actions: _this4.state.actions,\n            show: _this4.state.ios_show,\n            type: \"ios\",\n            onRequestClose: function onRequestClose(e) {\n              return _this4.setState({\n                ios_show: false\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 288\n            },\n            __self: this\n          });\n        });\n      }\n      /**\n       * Display children & handle the quantity for each one\n       */\n\n\n      var listItems = null;\n\n      if (this.state.item) {\n        listItems = this.state.item.children.map(function (item, index) {\n          return React.createElement(\"div\", {\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 318\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"checkout-info\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 319\n            },\n            __self: this\n          }, item.images[0] ? React.createElement(\"div\", {\n            className: \"checkout-img\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 321\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            height: 150,\n            width: 150,\n            src: item.images[0].url,\n            role: \"presentation\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 322\n            },\n            __self: this\n          })) : null, React.createElement(\"div\", {\n            className: \"checkout-content\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 327\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"checkout-subtitle\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 328\n            },\n            __self: this\n          }, item.title), React.createElement(\"div\", {\n            className: \"checkout-price\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 329\n            },\n            __self: this\n          }, \"$\", item.price), React.createElement(\"div\", {\n            className: \"Number-Picker\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 332\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            className: \"picker-button\",\n            onClick: function onClick() {\n              _this4.minus(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 333\n            },\n            __self: this\n          }, \" - \"), React.createElement(\"input\", {\n            className: \"picker\",\n            type: \"number\",\n            min: \"0\",\n            max: \"1000\",\n            name: index,\n            value: _this4.state.quantityOfChildren[index] ? _this4.state.quantityOfChildren[index] : 0,\n            onChange: _this4.handleQuantity,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 334\n            },\n            __self: this\n          }), React.createElement(\"button\", {\n            className: \"picker-button\",\n            onClick: function onClick() {\n              _this4.plus(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 337\n            },\n            __self: this\n          }, \" + \")))), React.createElement(\"div\", {\n            className: \"location-tag\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 341\n            },\n            __self: this\n          }, item.locations[0].title), React.createElement(\"div\", {\n            className: \"divider\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 342\n            },\n            __self: this\n          }));\n        });\n      }\n      /**\n       * Display children & quantity for the checkout\n       */\n\n\n      var checkoutLists = null;\n\n      if (this.state.item) {\n        checkoutLists = this.state.item.children.map(function (item, index) {\n          return React.createElement(\"div\", {\n            key: item.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 355\n            },\n            __self: this\n          }, _this4.state.quantityOfChildren[index] && _this4.state.quantityOfChildren[index] !== 0 ? React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 357\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 358\n            },\n            __self: this\n          }, item.title, \" \\xD7 \", _this4.state.quantityOfChildren[index]), React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 359\n            },\n            __self: this\n          }, \"\\u5546\\u54C1\\u603B\\u989D\\uFF1A$\", _this4.state.priceOfChildren[index])) : null);\n        });\n      }\n      /**\n       * The page content\n       */\n\n\n      if (this.state.item) {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 374\n          },\n          __self: this\n        }, React.createElement(Head, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 375\n          },\n          __self: this\n        }, React.createElement(\"meta\", {\n          name: \"viewport\",\n          content: \"initial-scale=1.0, width=device-width\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 376\n          },\n          __self: this\n        })), React.createElement(\"header\", {\n          className: \"App-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 378\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 379\n          },\n          __self: this\n        }, \"ShowMine\")), this.state.processPayment ? React.createElement(\"div\", {\n          className: \"App-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 384\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 385\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 386\n          },\n          __self: this\n        }, \"\\u652F\\u4ED8\\u91D1\\u989D\", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 387\n          },\n          __self: this\n        }, \"\\u603B\\u8BA1\\uFF1A$\", this.state.totalPrice)), React.createElement(\"div\", {\n          className: \"payment-block-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 389\n          },\n          __self: this\n        }, checkoutLists, React.createElement(\"div\", {\n          style: {\n            fontSize: 24\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 391\n          },\n          __self: this\n        }, \"\\u603B\\u8BA1:\", React.createElement(\"span\", {\n          style: {\n            color: 'red'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 391\n          },\n          __self: this\n        }, \" $\", this.state.totalPrice)))), React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 395\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 396\n          },\n          __self: this\n        }, \"\\u8BF7\\u9009\\u62E9\\u652F\\u4ED8\\u65B9\\u5F0F:\"), React.createElement(Form, {\n          style: {\n            fontSize: 16\n          },\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 397\n          },\n          __self: this\n        }, this.state.item && this.state.item.online_payment == true ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 400\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 401\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 402\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio1\",\n          value: \"OMIPAY_WECHAT\",\n          onChange: this.handlePayment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 403\n          },\n          __self: this\n        })), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 405\n          },\n          __self: this\n        }, \"\\u5FAE\\u4FE1\\u652F\\u4ED8\")), React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 407\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 408\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio1\",\n          value: \"\\u94F6\\u884C\\u5361\\u652F\\u4ED8\",\n          onChange: this.handlePayment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 409\n          },\n          __self: this\n        })), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 411\n          },\n          __self: this\n        }, \"\\u94F6\\u884C\\u5361\\u652F\\u4ED8\")), React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 413\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 414\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio1\",\n          value: \"PayPal\\u652F\\u4ED8\",\n          onChange: this.handlePayment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 415\n          },\n          __self: this\n        })), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 417\n          },\n          __self: this\n        }, \"PayPal\\u652F\\u4ED8\"))) : React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 421\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 422\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio1\",\n          value: \"NoPayment\",\n          onChange: this.handlePayment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 423\n          },\n          __self: this\n        })), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 426\n          },\n          __self: this\n        }, \"\\u5230\\u5E97\\u652F\\u4ED8\")), React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 429\n          },\n          __self: this\n        }, this.state.payment_method == \"NoPayment\" ? React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 431\n          },\n          __self: this\n        }, \"\\u8BA2\\u5355\\u5DF2\\u786E\\u8BA4\\uFF0C\\u8BF7\\u5230\\u5E97\\u652F\\u4ED8\\u3002\") : React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 433\n          },\n          __self: this\n        }, \"\\u4F7F\\u7528\", this.state.payment_method, \"\\u5B8C\\u6210\\u4EA4\\u6613\\u3002\\uFF08\\u63D0\\u793A\\uFF1A\\u8BF7\\u572830\\u5206\\u949F\\u5185\\u5B8C\\u6210\\u652F\\u4ED8\\uFF0C\\u5426\\u5219\\u8BA2\\u5355\\u4F1A\\u64A4\\u9500\\uFF09\")))), this.state.showLocation ? React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 439\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 440\n          },\n          __self: this\n        }, \"\\u53D6\\u8D27\\u5730\\u70B9\"), React.createElement(Form, {\n          style: {\n            fontSize: 16\n          },\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 441\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 442\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 443\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio2\",\n          defaultChecked: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 444\n          },\n          __self: this\n        })), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 446\n          },\n          __self: this\n        }, this.state.item.children[0].locations[this.state.locationId].title)))) : null, this.state.notes ? React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 455\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 456\n          },\n          __self: this\n        }, \"\\u5907\\u6CE8\"), React.createElement(\"div\", {\n          className: \"payment-block-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 457\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 458\n          },\n          __self: this\n        }, this.state.notes))) : null, React.createElement(\"div\", {\n          className: \"checkout-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 464\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"primary\",\n          onClick: function onClick() {\n            _this4.addJielong();\n          },\n          disabled: this.state.payment_method && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 465\n          },\n          __self: this\n        }, \"\\u786E\\u8BA4\\u8BA2\\u5355\"), React.createElement(Toast, {\n          icon: \"loading\",\n          show: this.state.showLoading,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 471\n          },\n          __self: this\n        }, \"Loading...\"))) : React.createElement(\"div\", {\n          className: \"App-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 474\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"checkout-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 475\n          },\n          __self: this\n        }, this.state.item.title), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 476\n          },\n          __self: this\n        }, React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 477\n          },\n          __self: this\n        }, \"\\u9009\\u62E9\\u4EA7\\u54C1\"), listItems, React.createElement(\"div\", {\n          className: \"total-price\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 479\n          },\n          __self: this\n        }, \"\\u603B\\u8BA1\\uFF1A\", React.createElement(\"span\", {\n          className: \"price-number\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 479\n          },\n          __self: this\n        }, \"$\", this.state.totalPrice))), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 481\n          },\n          __self: this\n        }, React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 482\n          },\n          __self: this\n        }, \"\\u53D6\\u8D27\\u5730\\u70B9* \"), React.createElement(Cells, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 483\n          },\n          __self: this\n        }, React.createElement(Cell, {\n          href: \"javascript:;\",\n          access: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 484\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          onClick: function onClick(e) {\n            return _this4.setState({\n              ios_show: true\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 485\n          },\n          __self: this\n        }, \"\\u5F53\\u524D\\u9009\\u62E9:\"), locationsList, React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 489\n          },\n          __self: this\n        })), this.state.showLocation ? React.createElement(\"div\", {\n          className: \"location\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 493\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"location-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 494\n          },\n          __self: this\n        }, \"\\u540D\\u79F0\\uFF1A\", this.state.item.company.pickup_locations[this.state.locationId].title), React.createElement(\"div\", {\n          className: \"location-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 496\n          },\n          __self: this\n        }, \"\\u4F4D\\u7F6E\\uFF1A\", this.state.item.company.pickup_locations[this.state.locationId].address.street), React.createElement(\"div\", {\n          className: \"location-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 498\n          },\n          __self: this\n        }, \"\\u63CF\\u8FF0\\uFF1A\", this.state.item.company.pickup_locations[this.state.locationId].description)) : null), React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 505\n          },\n          __self: this\n        }, \"\\u8054\\u7CFB\\u65B9\\u5F0F* \"), React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 506\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 507\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 508\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 509\n          },\n          __self: this\n        }, \"\\u59D3\\u540D\")), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 511\n          },\n          __self: this\n        }, React.createElement(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u59D3\\u540D\",\n          name: \"name\",\n          value: this.state.name,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 512\n          },\n          __self: this\n        }))), React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 516\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 517\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 518\n          },\n          __self: this\n        }, \"\\u8054\\u7CFB\\u65B9\\u5F0F\")), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 520\n          },\n          __self: this\n        }, React.createElement(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\",\n          name: \"contact_number\",\n          value: this.state.contact_number,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 521\n          },\n          __self: this\n        }))), React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 525\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 526\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 527\n          },\n          __self: this\n        }, \"\\u5730\\u5740\")), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 529\n          },\n          __self: this\n        }, React.createElement(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u5730\\u5740\",\n          name: \"address\",\n          value: this.state.address,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 530\n          },\n          __self: this\n        })))), React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 535\n          },\n          __self: this\n        }, \"\\u5907\\u6CE8\"), React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 536\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 537\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 538\n          },\n          __self: this\n        }, React.createElement(TextArea, {\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u6587\\u672C\",\n          rows: \"5\",\n          name: \"notes\",\n          value: this.state.notes,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 539\n          },\n          __self: this\n        })))), React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 544\n          },\n          __self: this\n        }, \"\\u79C1\\u5BC6\\u53C2\\u52A0\"), React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 545\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 546\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 547\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          switch: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 548\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 549\n          },\n          __self: this\n        }, \"\\u5F00\\u542F\\u540E\\u5C06\\u9690\\u85CF\\u60A8\\u7684\\u5934\\u50CF\"), React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 550\n          },\n          __self: this\n        }, React.createElement(Switch, {\n          onClick: this.switch,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 551\n          },\n          __self: this\n        })))))), React.createElement(\"div\", {\n          className: \"checkout-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 557\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"primary\",\n          onClick: function onClick() {\n            _this4.placeOrder();\n          },\n          disabled: this.state.totalPrice !== 0 && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 558\n          },\n          __self: this\n        }, \"\\u6211\\u8981\\u4E0B\\u5355\")))));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 571\n          },\n          __self: this\n        }, React.createElement(Head, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 572\n          },\n          __self: this\n        }, React.createElement(\"meta\", {\n          name: \"viewport\",\n          content: \"initial-scale=1.0, width=device-width\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 573\n          },\n          __self: this\n        })), React.createElement(\"header\", {\n          className: \"App-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 575\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 576\n          },\n          __self: this\n        }, \"ShowMine\")), React.createElement(LoadMore, {\n          loading: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 580\n          },\n          __self: this\n        }));\n      }\n    }\n  }]);\n\n  return checkoutPage;\n}(Component);\n\nvar styles = {\n  galleryButton: {\n    color: 'white',\n    fontWeight: 'bold',\n    padding: '0'\n  }\n};\nexport default checkoutPage;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/checkoutPage.js"],"names":["React","Component","Button","TextArea","ActionSheet","Switch","Radio","Cells","CellsTitle","Cell","CellHeader","CellBody","CellFooter","Form","FormCell","Input","Label","LoadMore","Toast","Gallery","ItemService","JielongService","PaymentService","Head","Config","checkoutPage","props","setState","showLoading","id","state","itemId","configObj","params","comments","notes","config","item_url","item","location","company","pickup_locations","locationId","is_private","hideAvatar","quantity","state_redirect_obj","url","webAddress","voucher_base_url","wechat_auth_url","index","quantityOfChildren","length","undefined","push","item_id","children","price","priceOfChildren","toString","is_update","updateJielong","then","response","json","responseJson","jielong","payment_method","generateVoucher","processPayment","catch","error","console","addJielong","item_comment_id","getToPay","payment","window","open","pay_url","showLocation","ios_show","actions","label","onClick","hide","bind","name","contact_number","address","pickup_location","totalPrice","loadingTimer","showVoucher","handleChange","switch","handlePayment","handleQuantity","voucher","styles","galleryButton","e","event","target","value","Number","handleTotalPrice","log","query","getItemDetail","clearTimeout","locationsList","map","title","listItems","images","minus","plus","locations","checkoutLists","fontSize","color","online_payment","street","description","placeOrder","fontWeight","padding"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport {Button, TextArea, ActionSheet, Switch, Radio, Cells, CellsTitle, Cell, CellHeader, CellBody, CellFooter, Form, FormCell, Input, Label, LoadMore, Toast, Gallery} from 'react-weui';\nimport ItemService from '../service/ItemService';\nimport JielongService from '../service/JielongService';\nimport PaymentService from '../service/PaymentService'\n\n\n//import styles\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css';\n\n\n//import component\nimport Head from \"../components/head\";\nimport {Config} from \"../Config\";\n\n\n\nclass checkoutPage extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            jielong: 'none',\n            payment: 'none',\n            processPayment: false,\n            showLocation: false,\n            ios_show: false,\n            actions: [\n                {\n                    label: '取消',\n                    onClick: this.hide.bind(this)\n                }\n            ],\n            quantity: 0,\n            itemId: '',\n            name:'',\n            contact_number: '',\n            address: '',\n            notes: '',\n            hideAvatar: true,\n            payment_method: null,\n            pickup_location: '',\n            quantityOfChildren: [],\n            priceOfChildren: [],\n            totalPrice: 0,\n            showLoading: false,\n            loadingTimer: null,\n            is_update: false,\n            showVoucher: false,\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.switch = this.switch.bind(this);\n        this.handlePayment = this.handlePayment.bind(this);\n        this.handleQuantity = this.handleQuantity.bind(this);\n    }\n\n    placeOrder() {\n        this.setState({\n            processPayment: true,\n        });\n    }\n\n    addJielong = () => {\n        this.setState({showLoading: true});\n        let id  = this.state.itemId;\n        let configObj = {};\n        let params = {\n            comments:this.state.notes,\n            config: JSON.stringify(configObj),\n            item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n            location: this.state.item.company.pickup_locations[this.state.locationId].id,\n            is_private: this.state.hideAvatar,\n            quantity: [\n            ],\n            state_redirect_obj: {\n                url: Config.webAddress,\n                // url: \"http://localhost:3000\",\n            },\n            voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n            wechat_auth_url: \"https://www.showmine66.com/a/wu?domain=https%253A%252F%252Fwww.showmine66.com&origurl=https%253A%252F%252Fwww.showmine66.com%252Fma%252Fi%252Fdbfcefa936b4cd6d5709953b5ea12673%2523app-top\"\n        };\n        for (let index = 0; index <= this.state.quantityOfChildren.length; index++) {\n            if (this.state.quantityOfChildren[index]!==null && this.state.quantityOfChildren[index]!== undefined) {\n                params.quantity.push({\n                    item_id: this.state.item.children[index].id,\n                    quantity: this.state.quantityOfChildren[index],\n                    price: this.state.priceOfChildren[index].toString(),\n                });\n            }\n        }\n        if (this.state.is_update) {\n            JielongService.updateJielong(params, id)\n                .then((response) => response.json())\n                .then((responseJson) => {\n                    this.setState({\n                        jielong: responseJson,\n                    });\n                    if(this.state.payment_method == \"NoPayment\") {\n                        this.generateVoucher();\n                    }\n                    else {\n                        this.processPayment();\n                    }\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        }\n        else {\n            JielongService.addJielong(params, id)\n                .then((response) => response.json())\n                .then((responseJson) => {\n                    this.setState({\n                        jielong: responseJson,\n                    });\n                    if(this.state.payment_method == \"NoPayment\") {\n                        this.generateVoucher();\n                    }\n                    else {\n                        this.processPayment();\n                    }\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        }\n    };\n\n    processPayment= () => {\n        // \"redirectUrl\": Config.webAddress + \"index?itemId=\" + this.state.jielong.item_id\n        let configObj = {\"source\":\"jielong_payment\", \"item_comment_id\": this.state.jielong.id, \"item_id\": this.state.jielong.item_id, \"redirectUrl\": Config.webAddress + \"index?itemId=\" + this.state.jielong.item_id};\n        let params = {\n            config: JSON.stringify(configObj),\n            item_comment_id: this.state.jielong.id,\n            payment_method: this.state.payment_method,\n        };\n        PaymentService.getToPay(params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    payment: responseJson,\n                });\n                window.open(responseJson.pay_url,\"_self\");\n                this.setState({showLoading: false});\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    };\n\n    generateVoucher() {\n        let id = this.state.jielong.id;\n        let params = {\n            is_update: this.state.is_update,\n            item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n            voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n        };\n        JielongService.generateVoucher(params, id)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    voucher: responseJson,\n                });\n                // window.open(responseJson.url,\"_self\");\n                this.setState({showLoading: false});\n                return(\n                    <Gallery src={responseJson && responseJson.url ? responseJson.url : undefined} show={this.state.showVoucher}>\n                        <div\n                            style={styles.galleryButton}\n                            onClick={e=>this.setState({ showVoucher: false})}\n                        >\n                            Cancel\n                        </div>\n                    </Gallery>\n                );\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    handleChange(event) {\n        this.setState({[event.target.name]: event.target.value});\n    }\n\n    handleTotalPrice() {\n        this.state.totalPrice = 0;\n        for(var index = 0; index <= this.state.priceOfChildren.length; index++) {\n            if (this.state.priceOfChildren[index]) {\n                this.state.totalPrice = this.state.totalPrice + this.state.priceOfChildren[index];\n            }\n        }\n        this.setState({\n            totalPrice: this.state.totalPrice,\n        })\n    }\n\n    handleQuantity(event) {\n        this.state.quantityOfChildren[event.target.name] = Number(event.target.value);\n        this.state.priceOfChildren[event.target.name] = this.state.quantityOfChildren[event.target.name] * this.state.item.children[event.target.name].price;\n        this.setState({\n            quantityOfChildren: this.state.quantityOfChildren,\n            priceOfChildren: this.state.priceOfChildren,\n        })\n        this.handleTotalPrice();\n\n    }\n\n    minus(index) {\n        if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index]===null || this.state.quantityOfChildren[index]===undefined || this.state.quantityOfChildren[index]===0 )\n        {\n            console.log('Cannot minus');\n        } else {\n            this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] - 1;\n            this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n            this.setState({\n                quantityOfChildren: this.state.quantityOfChildren,\n                priceOfChildren: this.state.priceOfChildren,\n            })\n            this.handleTotalPrice();\n\n        }\n    }\n\n    plus(index) {\n        if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index]===null || this.state.quantityOfChildren[index]===undefined)\n        {\n            this.state.quantityOfChildren[index] = 0;\n        }\n        this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] + 1;\n        this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n        this.setState({\n            quantityOfChildren: this.state.quantityOfChildren,\n            priceOfChildren: this.state.priceOfChildren,\n        })\n        this.handleTotalPrice();\n\n    }\n\n    handlePayment(event) {\n        this.setState({\n            payment_method: event.target.value\n        })\n    }\n\n    switch(){\n        this.setState({hideAvatar: !this.state.hideAvatar});\n    }\n\n    hide(){\n        this.setState({\n            ios_show: false,\n        });\n    }\n\n    componentDidMount() {\n        let params = this.props.url.query.itemId;\n        if (this.props.url.query.is_update) {\n            this.setState({\n                is_update: this.props.url.query.is_update,\n            });\n        }\n        ItemService.getItemDetail(params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    item: responseJson,\n                    itemId: responseJson.id,\n                });\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    componentWillUnmount() {\n        this.state.loadingTimer && clearTimeout(this.state.loadingTimer);\n    }\n\n    render() {\n        /**\n         * Display the pickup locations list\n         */\n        let locationsList = null;\n        if (this.state.item) {\n            locationsList = this.state.item.company.pickup_locations.map((location, index) =>\n                <ActionSheet\n                    key={location.id}\n                    menus={\n                        [{\n                            label: location.title,\n                            onClick: ()=> {\n                                this.setState({\n                                        locationId: index,\n                                        showLocation: true,\n                                    }\n                                );\n                                this.hide();\n                            }\n                        },]\n                    }\n                    actions={this.state.actions}\n                    show={this.state.ios_show}\n                    type=\"ios\"\n                    onRequestClose={e=>this.setState({ios_show: false})}\n                />\n            );\n        }\n\n        /**\n         * Display children & handle the quantity for each one\n         */\n        let listItems = null;\n        if (this.state.item)\n        {\n            listItems = this.state.item.children.map((item, index) =>\n                <div key={index}>\n                    <div className='checkout-info'>\n                        {item.images[0] ?\n                            ( <div className='checkout-img'>\n                                <img height={150} width={150} src={item.images[0].url} role=\"presentation\"/>\n                            </div>)\n                            :\n                            null}\n\n                        <div className='checkout-content'>\n                            <div className='checkout-subtitle'>{item.title}</div>\n                            <div\n                                className='checkout-price'>${item.price}</div>\n\n                            <div className=\"Number-Picker\">\n                                <button className=\"picker-button\" onClick={() => {this.minus(index);}}> - </button>\n                                <input className='picker' type=\"number\" min=\"0\" max=\"1000\" name={index}\n                                       value={this.state.quantityOfChildren[index]?this.state.quantityOfChildren[index]:0}\n                                       onChange={this.handleQuantity}/>\n                                <button className=\"picker-button\" onClick={() => {this.plus(index);}}> + </button>\n                            </div>\n                        </div>\n                    </div>\n                    <div className='location-tag'>{item.locations[0].title}</div>\n                    <div className='divider'/>\n                </div>\n\n            );\n        }\n\n        /**\n         * Display children & quantity for the checkout\n         */\n        let checkoutLists = null;\n        if (this.state.item)\n        {\n            checkoutLists = this.state.item.children.map((item, index) =>\n                <div key={item.id}>\n                    {this.state.quantityOfChildren[index] && this.state.quantityOfChildren[index] !== 0 ?\n                        <div>\n                            <div>{item.title} × {this.state.quantityOfChildren[index]}</div>\n                            <div>商品总额：${this.state.priceOfChildren[index]}</div>\n                        </div>\n                        :\n                        null\n                    }\n\n                </div>\n            );\n        }\n\n        /**\n         * The page content\n         */\n        if (this.state.item) {\n            return (\n                <div className=\"App\">\n                    <Head>\n                        <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\"/>\n                    </Head>\n                    <header className=\"App-header\">\n                        <div>\n                            ShowMine\n                        </div>\n                    </header>\n                    {this.state.processPayment ?\n                        <div className='App-body'>\n                            <div className='payment-block'>\n                                <div\n                                    className='payment-block-title'>支付金额<span>总计：${this.state.totalPrice}</span>\n                                </div>\n                                <div className='payment-block-content'>\n                                    {checkoutLists}\n                                    <div style={{fontSize: 24}}>总计:<span style={{color: 'red'}}> ${this.state.totalPrice}</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className='payment-block'>\n                                <div className='payment-block-title'>请选择支付方式:</div>\n                                <Form style={{fontSize: 16}} radio>\n\n                                    {this.state.item && this.state.item.online_payment == true ?\n                                        (<div>\n                                            <FormCell radio>\n                                                <CellHeader>\n                                                    <Radio name=\"radio1\" value=\"OMIPAY_WECHAT\"  onChange={this.handlePayment}/>\n                                                </CellHeader>\n                                                <CellBody>微信支付</CellBody>\n                                            </FormCell>\n                                            <FormCell radio>\n                                                <CellHeader>\n                                                    <Radio name=\"radio1\" value=\"银行卡支付\" onChange={this.handlePayment}/>\n                                                </CellHeader>\n                                                <CellBody>银行卡支付</CellBody>\n                                            </FormCell>\n                                            <FormCell radio>\n                                                <CellHeader>\n                                                    <Radio name=\"radio1\" value=\"PayPal支付\" onChange={this.handlePayment}/>\n                                                </CellHeader>\n                                                <CellBody>PayPal支付</CellBody>\n                                            </FormCell>\n                                        </div>)\n                                        :\n                                        <FormCell radio>\n                                            <CellHeader>\n                                                <Radio name=\"radio1\" value=\"NoPayment\"\n                                                       onChange={this.handlePayment}/>\n                                            </CellHeader>\n                                            <CellBody>到店支付</CellBody>\n                                        </FormCell>\n                                    }\n                                    <FormCell>\n                                        {this.state.payment_method == \"NoPayment\"?\n                                            <CellBody>订单已确认，请到店支付。</CellBody>\n                                            :\n                                            <CellBody>使用{this.state.payment_method}完成交易。（提示：请在30分钟内完成支付，否则订单会撤销）</CellBody>\n                                        }\n                                    </FormCell>\n                                </Form>\n                            </div>\n                            {this.state.showLocation ?\n                                <div className='payment-block'>\n                                    <div className='payment-block-title'>取货地点</div>\n                                    <Form style={{fontSize: 16}} radio>\n                                        <FormCell radio>\n                                            <CellHeader>\n                                                <Radio name=\"radio2\" defaultChecked/>\n                                            </CellHeader>\n                                            <CellBody>{this.state.item.children[0].locations[this.state.locationId].title}</CellBody>\n\n                                        </FormCell>\n                                    </Form>\n                                </div>\n                                :\n                                null\n                            }\n                            {this.state.notes ?\n                                <div className='payment-block'>\n                                    <div className='payment-block-title'>备注</div>\n                                    <div className='payment-block-content'>\n                                        <p>{this.state.notes}</p>\n                                    </div>\n                                </div>\n                                :\n                                null\n                            }\n                            <div className='checkout-button'>\n                                <Button type=\"primary\" onClick={() => {\n                                    this.addJielong();\n                                }}\n                                        disabled={this.state.payment_method && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true}>\n                                    确认订单\n                                </Button>\n                                <Toast icon=\"loading\" show={this.state.showLoading}>Loading...</Toast>\n                            </div>\n                        </div> :\n                        <div className='App-body'>\n                            <div className='checkout-title'>{this.state.item.title}</div>\n                            <div>\n                                <CellsTitle>选择产品</CellsTitle>\n                                {listItems}\n                                <div className='total-price'>总计：<span className='price-number'>${this.state.totalPrice}</span></div>\n                            </div>\n                            <div>\n                                <CellsTitle>取货地点* </CellsTitle>\n                                <Cells>\n                                    <Cell href=\"javascript:;\" access>\n                                        <CellBody onClick={e => this.setState({ios_show: true})}>\n                                            当前选择:\n                                        </CellBody>\n                                        {locationsList}\n                                        <CellFooter/>\n                                    </Cell>\n                                    {\n                                        this.state.showLocation ?\n                                            <div className='location'>\n                                                <div\n                                                    className='location-label'>名称：{this.state.item.company.pickup_locations[this.state.locationId].title}</div>\n                                                <div\n                                                    className='location-label'>位置：{this.state.item.company.pickup_locations[this.state.locationId].address.street}</div>\n                                                <div\n                                                    className='location-label'>描述：{this.state.item.company.pickup_locations[this.state.locationId].description}</div>\n                                            </div>\n                                            :\n                                            null\n                                    }\n                                </Cells>\n                                <CellsTitle>联系方式* </CellsTitle>\n                                <Form>\n                                    <FormCell>\n                                        <CellHeader>\n                                            <Label>姓名</Label>\n                                        </CellHeader>\n                                        <CellBody>\n                                            <Input type=\"text\" placeholder=\"请输入姓名\" name='name' value={this.state.name}\n                                                   onChange={this.handleChange}/>\n                                        </CellBody>\n                                    </FormCell>\n                                    <FormCell>\n                                        <CellHeader>\n                                            <Label>联系方式</Label>\n                                        </CellHeader>\n                                        <CellBody>\n                                            <Input type=\"text\" placeholder=\"请输入手机号\" name='contact_number'\n                                                   value={this.state.contact_number} onChange={this.handleChange}/>\n                                        </CellBody>\n                                    </FormCell>\n                                    <FormCell>\n                                        <CellHeader>\n                                            <Label>地址</Label>\n                                        </CellHeader>\n                                        <CellBody>\n                                            <Input type=\"text\" placeholder=\"请输入地址\" name='address'\n                                                   value={this.state.address} onChange={this.handleChange}/>\n                                        </CellBody>\n                                    </FormCell>\n                                </Form>\n                                <CellsTitle>备注</CellsTitle>\n                                <Form>\n                                    <FormCell>\n                                        <CellBody>\n                                            <TextArea placeholder=\"请输入文本\" rows=\"5\" name='notes' value={this.state.notes}\n                                                      onChange={this.handleChange}></TextArea>\n                                        </CellBody>\n                                    </FormCell>\n                                </Form>\n                                <CellsTitle>私密参加</CellsTitle>\n                                <Form>\n                                    <FormCell>\n                                        <CellBody>\n                                            <FormCell switch>\n                                                <CellBody>开启后将隐藏您的头像</CellBody>\n                                                <CellFooter>\n                                                    <Switch onClick={this.switch}/>\n                                                </CellFooter>\n                                            </FormCell>\n                                        </CellBody>\n                                    </FormCell>\n                                </Form>\n                                <div className='checkout-button'>\n                                    <Button type=\"primary\" onClick={() => {this.placeOrder();}}\n                                            disabled={this.state.totalPrice !== 0 && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true}>\n                                        我要下单\n                                    </Button>\n                                </div>\n                            </div>\n                        </div>\n                    }\n                </div>\n            );\n        }\n        else {\n            return (\n                <div className=\"App\">\n                    <Head>\n                        <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\"/>\n                    </Head>\n                    <header className=\"App-header\">\n                        <div>\n                            ShowMine\n                        </div>\n                    </header>\n                    <LoadMore loading></LoadMore>\n                </div>\n            );\n        }\n    }\n}\n\nconst styles = {\n    galleryButton: {\n        color: 'white',\n        fontWeight:'bold',\n        padding: '0',\n    }\n}\n\nexport default checkoutPage;\n"]},"metadata":{},"sourceType":"module"}