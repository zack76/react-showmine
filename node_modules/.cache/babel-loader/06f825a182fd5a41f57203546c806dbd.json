{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/checkoutPage.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Button, TextArea, ActionSheet, Switch, Radio, Cells, CellsTitle, Cell, CellHeader, CellBody, CellFooter, Form, FormCell, Input, Label, LoadMore, Toast } from 'react-weui';\nimport DetailService from '../service/DetailService';\nimport JielongService from '../service/JielongService';\nimport PaymentService from '../service/PaymentService'; //import styles\n\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css'; //import component\n\nimport Head from \"../components/head\";\n\nvar checkoutPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(checkoutPage, _Component);\n\n  function checkoutPage(props) {\n    var _this;\n\n    _classCallCheck(this, checkoutPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(checkoutPage).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"addJielong\", function () {\n      _this.setState({\n        showLoading: true\n      });\n\n      if (_this.state.is_update) {\n        var id = _this.props.url.query.jielongId;\n        var configObj = {};\n        var params = {\n          comments: _this.state.notes,\n          config: _JSON$stringify(configObj),\n          item_url: \"https://www.showmine66.com/ma/i/\" + _this.state.item.id,\n          location: _this.state.item.company.pickup_locations[_this.state.locationId].id,\n          is_private: _this.state.hideAvatar,\n          quantity: [],\n          state_redirect_obj: {\n            url: \"http://localhost:3000\"\n          },\n          voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n          wechat_auth_url: \"https://www.showmine66.com/a/wu?domain=https%253A%252F%252Fwww.showmine66.com&origurl=https%253A%252F%252Fwww.showmine66.com%252Fma%252Fi%252Fdbfcefa936b4cd6d5709953b5ea12673%2523app-top\"\n        };\n\n        for (var index = 0; index <= _this.state.quantityOfChildren.length; index++) {\n          if (_this.state.quantityOfChildren[index] !== null && _this.state.quantityOfChildren[index] !== undefined) {\n            params.quantity.push({\n              item_id: _this.state.item.children[index].id,\n              quantity: _this.state.quantityOfChildren[index],\n              price: _this.state.priceOfChildren[index].toString()\n            });\n          }\n        }\n\n        if (_this.state.payment_method == \"NoPayment\") {\n          JielongService.updateJielong(params, id).then(function (response) {\n            return response.json();\n          }).then(function (responseJson) {\n            _this.setState({\n              jielong: responseJson\n            });\n\n            _this.generateVoucher();\n          }).catch(function (error) {\n            console.error(error);\n          });\n        } else {\n          JielongService.updateJielong(params, id).then(function (response) {\n            return response.json();\n          }).then(function (responseJson) {\n            _this.setState({\n              jielong: responseJson\n            });\n\n            _this.processPayment();\n          }).catch(function (error) {\n            console.error(error);\n          });\n        }\n      } else {\n        var _id = _this.state.itemId;\n        var _configObj = {};\n        var _params = {\n          comments: _this.state.notes,\n          config: _JSON$stringify(_configObj),\n          item_url: \"https://www.showmine66.com/ma/i/\" + _this.state.item.id,\n          location: _this.state.item.company.pickup_locations[_this.state.locationId].id,\n          is_private: _this.state.hideAvatar,\n          quantity: [],\n          state_redirect_obj: {\n            url: \"http://localhost:3000\"\n          },\n          voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n          wechat_auth_url: \"https://www.showmine66.com/a/wu?domain=https%253A%252F%252Fwww.showmine66.com&origurl=https%253A%252F%252Fwww.showmine66.com%252Fma%252Fi%252Fdbfcefa936b4cd6d5709953b5ea12673%2523app-top\"\n        };\n\n        for (var _index = 0; _index <= _this.state.quantityOfChildren.length; _index++) {\n          if (_this.state.quantityOfChildren[_index] !== null && _this.state.quantityOfChildren[_index] !== undefined) {\n            _params.quantity.push({\n              item_id: _this.state.item.children[_index].id,\n              quantity: _this.state.quantityOfChildren[_index],\n              price: _this.state.priceOfChildren[_index].toString()\n            });\n          }\n        }\n\n        if (_this.state.payment_method == \"NoPayment\") {\n          JielongService.addJielong(_params, _id).then(function (response) {\n            return response.json();\n          }).then(function (responseJson) {\n            _this.setState({\n              jielong: responseJson\n            });\n\n            _this.generateVoucher();\n          }).catch(function (error) {\n            console.error(error);\n          });\n        } else {\n          JielongService.addJielong(_params, _id).then(function (response) {\n            return response.json();\n          }).then(function (responseJson) {\n            _this.setState({\n              jielong: responseJson\n            });\n\n            _this.processPayment();\n          }).catch(function (error) {\n            console.error(error);\n          });\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"processPayment\", function () {\n      var configObj = {\n        \"source\": \"jielong_payment\",\n        \"item_comment_id\": _this.state.jielong.id,\n        \"item_id\": _this.state.jielong.item_id\n      };\n      var params = {\n        config: _JSON$stringify(configObj),\n        item_comment_id: _this.state.jielong.id,\n        payment_method: _this.state.payment_method\n      };\n      PaymentService.getToPay(params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this.setState({\n          payment: responseJson\n        });\n\n        window.open(responseJson.pay_url, \"_self\");\n\n        _this.setState({\n          showLoading: false\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    });\n\n    _this.state = {\n      jielong: 'none',\n      payment: 'none',\n      processPayment: false,\n      showLocation: false,\n      ios_show: false,\n      actions: [{\n        label: '取消',\n        onClick: _this.hide.bind(_assertThisInitialized(_this))\n      }],\n      quantity: 0,\n      itemId: '',\n      name: '',\n      contact_number: '',\n      address: '',\n      notes: '',\n      hideAvatar: true,\n      payment_method: 'NoPayment',\n      pickup_location: '',\n      quantityOfChildren: [],\n      priceOfChildren: [],\n      totalPrice: 0,\n      showLoading: false,\n      loadingTimer: null,\n      is_update: false\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.switch = _this.switch.bind(_assertThisInitialized(_this));\n    _this.handlePayment = _this.handlePayment.bind(_assertThisInitialized(_this));\n    _this.handleQuantity = _this.handleQuantity.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(checkoutPage, [{\n    key: \"placeOrder\",\n    value: function placeOrder() {\n      var userToken = localStorage.getItem('userToken');\n      console.log(userToken);\n      this.setState({\n        processPayment: true\n      });\n    }\n  }, {\n    key: \"generateVoucher\",\n    value: function generateVoucher() {\n      var _this2 = this;\n\n      var id = this.state.jielong.id;\n      var params = {\n        is_update: this.state.is_update,\n        item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n        voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\"\n      };\n      JielongService.generateVoucher(params, id).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this2.setState({\n          voucher: responseJson\n        });\n\n        window.open(responseJson.url, \"_self\");\n\n        _this2.setState({\n          showLoading: false\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState(_defineProperty({}, event.target.name, event.target.value));\n    }\n  }, {\n    key: \"handleTotalPrice\",\n    value: function handleTotalPrice() {\n      this.state.totalPrice = 0;\n\n      for (var index = 0; index <= this.state.priceOfChildren.length; index++) {\n        if (this.state.priceOfChildren[index]) {\n          this.state.totalPrice = this.state.totalPrice + this.state.priceOfChildren[index];\n        }\n      }\n\n      this.setState({\n        totalPrice: this.state.totalPrice\n      });\n    }\n  }, {\n    key: \"handleQuantity\",\n    value: function handleQuantity(event) {\n      this.state.quantityOfChildren[event.target.name] = Number(event.target.value);\n      this.state.priceOfChildren[event.target.name] = this.state.quantityOfChildren[event.target.name] * this.state.item.children[event.target.name].price;\n      this.setState({\n        quantityOfChildren: this.state.quantityOfChildren,\n        priceOfChildren: this.state.priceOfChildren\n      });\n      this.handleTotalPrice();\n    }\n  }, {\n    key: \"minus\",\n    value: function minus(index) {\n      if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index] === null || this.state.quantityOfChildren[index] === undefined || this.state.quantityOfChildren[index] === 0) {\n        console.log('Cannot minus');\n      } else {\n        this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] - 1;\n        this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n        this.setState({\n          quantityOfChildren: this.state.quantityOfChildren,\n          priceOfChildren: this.state.priceOfChildren\n        });\n        this.handleTotalPrice();\n      }\n    }\n  }, {\n    key: \"plus\",\n    value: function plus(index) {\n      if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index] === null || this.state.quantityOfChildren[index] === undefined) {\n        this.state.quantityOfChildren[index] = 0;\n      }\n\n      this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] + 1;\n      this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n      this.setState({\n        quantityOfChildren: this.state.quantityOfChildren,\n        priceOfChildren: this.state.priceOfChildren\n      });\n      this.handleTotalPrice();\n    }\n  }, {\n    key: \"handlePayment\",\n    value: function handlePayment(event) {\n      this.setState({\n        payment_method: event.target.value\n      });\n    }\n  }, {\n    key: \"switch\",\n    value: function _switch() {\n      this.setState({\n        hideAvatar: !this.state.hideAvatar\n      });\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.setState({\n        ios_show: false\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var params = this.props.url.query.itemId;\n\n      if (this.props.url.query.is_update) {\n        this.setState({\n          is_update: this.props.url.query.is_update\n        });\n      }\n\n      DetailService.getDetail(params).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this3.setState({\n          item: responseJson,\n          itemId: responseJson.id\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.state.loadingTimer && clearTimeout(this.state.loadingTimer);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      /**\n       * Display the pickup locations list\n       */\n      var locationsList = null;\n\n      if (this.state.item) {\n        locationsList = this.state.item.company.pickup_locations.map(function (location) {\n          return React.createElement(ActionSheet, {\n            key: location.id,\n            menus: [{\n              label: location.title,\n              onClick: function onClick() {\n                _this4.setState({\n                  locationId: 0,\n                  showLocation: true\n                });\n\n                _this4.hide();\n              }\n            }],\n            actions: _this4.state.actions,\n            show: _this4.state.ios_show,\n            type: \"ios\",\n            onRequestClose: function onRequestClose(e) {\n              return _this4.setState({\n                ios_show: false\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 323\n            },\n            __self: this\n          });\n        });\n      }\n      /**\n       * Display children & handle the quantity for each one\n       */\n\n\n      var listItems = null;\n\n      if (this.state.item) {\n        listItems = this.state.item.children.map(function (item, index) {\n          return React.createElement(\"div\", {\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 353\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"checkout-info\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 354\n            },\n            __self: this\n          }, item.images[0] ? React.createElement(\"div\", {\n            className: \"checkout-img\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 356\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            height: 150,\n            width: 150,\n            src: item.images[0].url,\n            role: \"presentation\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 357\n            },\n            __self: this\n          })) : null, React.createElement(\"div\", {\n            className: \"checkout-content\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 362\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"checkout-subtitle\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 363\n            },\n            __self: this\n          }, item.title), React.createElement(\"div\", {\n            className: \"checkout-price\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 364\n            },\n            __self: this\n          }, \"$\", item.full_price), React.createElement(\"div\", {\n            className: \"Number-Picker\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 367\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            className: \"picker-button\",\n            onClick: function onClick() {\n              _this4.minus(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 368\n            },\n            __self: this\n          }, \" - \"), React.createElement(\"input\", {\n            className: \"picker\",\n            type: \"number\",\n            min: \"0\",\n            max: \"1000\",\n            name: index,\n            value: _this4.state.quantityOfChildren[index] ? _this4.state.quantityOfChildren[index] : 0,\n            onChange: _this4.handleQuantity,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 369\n            },\n            __self: this\n          }), React.createElement(\"button\", {\n            className: \"picker-button\",\n            onClick: function onClick() {\n              _this4.plus(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 372\n            },\n            __self: this\n          }, \" + \")))), React.createElement(\"div\", {\n            className: \"location-tag\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 376\n            },\n            __self: this\n          }, item.locations[0].title), React.createElement(\"div\", {\n            className: \"divider\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 377\n            },\n            __self: this\n          }));\n        });\n      }\n      /**\n       * Display children & quantity for the checkout\n       */\n\n\n      var checkoutLists = null;\n\n      if (this.state.item) {\n        checkoutLists = this.state.item.children.map(function (item, index) {\n          return React.createElement(\"div\", {\n            key: item.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 390\n            },\n            __self: this\n          }, _this4.state.quantityOfChildren[index] && _this4.state.quantityOfChildren[index] !== 0 ? React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 392\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 393\n            },\n            __self: this\n          }, item.title, \" \\xD7 \", _this4.state.quantityOfChildren[index]), React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 394\n            },\n            __self: this\n          }, \"\\u5546\\u54C1\\u603B\\u989D\\uFF1A$\", _this4.state.priceOfChildren[index])) : null);\n        });\n      }\n      /**\n       * The page content\n       */\n\n\n      if (this.state.item) {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 409\n          },\n          __self: this\n        }, React.createElement(Head, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 410\n          },\n          __self: this\n        }, React.createElement(\"meta\", {\n          name: \"viewport\",\n          content: \"initial-scale=1.0, width=device-width\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 411\n          },\n          __self: this\n        })), React.createElement(\"header\", {\n          className: \"App-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 413\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 414\n          },\n          __self: this\n        }, \"ShowMine\")), this.state.processPayment ? React.createElement(\"div\", {\n          className: \"App-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 419\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 420\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 421\n          },\n          __self: this\n        }, \"\\u652F\\u4ED8\\u91D1\\u989D\", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 422\n          },\n          __self: this\n        }, \"\\u603B\\u8BA1\\uFF1A$\", this.state.totalPrice)), React.createElement(\"div\", {\n          className: \"payment-block-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 424\n          },\n          __self: this\n        }, checkoutLists, React.createElement(\"div\", {\n          style: {\n            fontSize: 24\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 426\n          },\n          __self: this\n        }, \"\\u603B\\u8BA1:\", React.createElement(\"span\", {\n          style: {\n            color: 'red'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 426\n          },\n          __self: this\n        }, \" $\", this.state.totalPrice)))), React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 430\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 431\n          },\n          __self: this\n        }, \"\\u8BF7\\u9009\\u62E9\\u652F\\u4ED8\\u65B9\\u5F0F:\"), React.createElement(Form, {\n          style: {\n            fontSize: 16\n          },\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 432\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 433\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 434\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio1\",\n          value: \"NoPayment\",\n          defaultChecked: true,\n          onChange: this.handlePayment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 435\n          },\n          __self: this\n        })), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 438\n          },\n          __self: this\n        }, \"\\u5230\\u5E97\\u652F\\u4ED8\")), React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 440\n          },\n          __self: this\n        }, this.state.payment_method == \"NoPayment\" ? React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 442\n          },\n          __self: this\n        }, \"\\u8BA2\\u5355\\u5DF2\\u786E\\u8BA4\\uFF0C\\u8BF7\\u5230\\u5E97\\u652F\\u4ED8\\u3002\") : React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 444\n          },\n          __self: this\n        }, \"\\u4F7F\\u7528\", this.state.payment_method, \"\\u5B8C\\u6210\\u4EA4\\u6613\\u3002\\uFF08\\u63D0\\u793A\\uFF1A\\u8BF7\\u572830\\u5206\\u949F\\u5185\\u5B8C\\u6210\\u652F\\u4ED8\\uFF0C\\u5426\\u5219\\u8BA2\\u5355\\u4F1A\\u5B9E\\u73B0\\uFF09\")), this.state.item && this.state.item.online_payment == true ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 448\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 449\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 450\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio1\",\n          value: \"OMIPAY_WECHAT\",\n          onChange: this.handlePayment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 451\n          },\n          __self: this\n        })), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 454\n          },\n          __self: this\n        }, \"\\u5FAE\\u4FE1\\u652F\\u4ED8\")), React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 456\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 457\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio1\",\n          value: \"\\u94F6\\u884C\\u5361\\u652F\\u4ED8\",\n          onChange: this.handlePayment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 458\n          },\n          __self: this\n        })), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 460\n          },\n          __self: this\n        }, \"\\u94F6\\u884C\\u5361\\u652F\\u4ED8\")), React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 462\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 463\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio1\",\n          value: \"PayPal\\u652F\\u4ED8\",\n          onChange: this.handlePayment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 464\n          },\n          __self: this\n        })), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 466\n          },\n          __self: this\n        }, \"PayPal\\u652F\\u4ED8\"))) : null)), this.state.showLocation ? React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 475\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 476\n          },\n          __self: this\n        }, \"\\u53D6\\u8D27\\u5730\\u70B9\"), React.createElement(Form, {\n          style: {\n            fontSize: 16\n          },\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 477\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          radio: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 478\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 479\n          },\n          __self: this\n        }, React.createElement(Radio, {\n          name: \"radio2\",\n          defaultChecked: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 480\n          },\n          __self: this\n        })), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 482\n          },\n          __self: this\n        }, this.state.item.children[0].locations[0].title)))) : null, this.state.notes ? React.createElement(\"div\", {\n          className: \"payment-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 490\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"payment-block-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 491\n          },\n          __self: this\n        }, \"\\u5907\\u6CE8\"), React.createElement(\"div\", {\n          className: \"payment-block-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 492\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 493\n          },\n          __self: this\n        }, this.state.notes))) : null, React.createElement(\"div\", {\n          className: \"checkout-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 499\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"primary\",\n          onClick: function onClick() {\n            _this4.addJielong();\n          },\n          disabled: this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 500\n          },\n          __self: this\n        }, \"\\u786E\\u8BA4\\u8BA2\\u5355\"), React.createElement(Toast, {\n          icon: \"loading\",\n          show: this.state.showLoading,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 506\n          },\n          __self: this\n        }, \"Loading...\"))) : React.createElement(\"div\", {\n          className: \"App-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 509\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"checkout-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 510\n          },\n          __self: this\n        }, this.state.item.title), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 511\n          },\n          __self: this\n        }, React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 512\n          },\n          __self: this\n        }, \"\\u9009\\u62E9\\u4EA7\\u54C1\"), listItems, React.createElement(\"div\", {\n          className: \"total-price\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 514\n          },\n          __self: this\n        }, \"\\u603B\\u8BA1\\uFF1A\", React.createElement(\"span\", {\n          className: \"price-number\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 514\n          },\n          __self: this\n        }, \"$\", this.state.totalPrice))), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 516\n          },\n          __self: this\n        }, React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 517\n          },\n          __self: this\n        }, \"\\u53D6\\u8D27\\u5730\\u70B9* \"), React.createElement(Cells, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 518\n          },\n          __self: this\n        }, React.createElement(Cell, {\n          href: \"javascript:;\",\n          access: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 519\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          onClick: function onClick(e) {\n            return _this4.setState({\n              ios_show: true\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 520\n          },\n          __self: this\n        }, \"\\u5F53\\u524D\\u9009\\u62E9:\"), locationsList, React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 524\n          },\n          __self: this\n        })), this.state.showLocation ? React.createElement(\"div\", {\n          className: \"location\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 528\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"location-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 529\n          },\n          __self: this\n        }, \"\\u540D\\u79F0\\uFF1A\", this.state.item.company.pickup_locations[this.state.locationId].title), React.createElement(\"div\", {\n          className: \"location-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 531\n          },\n          __self: this\n        }, \"\\u4F4D\\u7F6E\\uFF1A\", this.state.item.company.pickup_locations[this.state.locationId].address.street), React.createElement(\"div\", {\n          className: \"location-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 533\n          },\n          __self: this\n        }, \"\\u63CF\\u8FF0\\uFF1A\", this.state.item.company.pickup_locations[this.state.locationId].description)) : null), React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 540\n          },\n          __self: this\n        }, \"\\u8054\\u7CFB\\u65B9\\u5F0F* \"), React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 541\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 542\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 543\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 544\n          },\n          __self: this\n        }, \"\\u59D3\\u540D\")), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 546\n          },\n          __self: this\n        }, React.createElement(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u59D3\\u540D\",\n          name: \"name\",\n          value: this.state.name,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 547\n          },\n          __self: this\n        }))), React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 551\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 552\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 553\n          },\n          __self: this\n        }, \"\\u8054\\u7CFB\\u65B9\\u5F0F\")), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 555\n          },\n          __self: this\n        }, React.createElement(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\",\n          name: \"contact_number\",\n          value: this.state.contact_number,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 556\n          },\n          __self: this\n        }))), React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 560\n          },\n          __self: this\n        }, React.createElement(CellHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 561\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 562\n          },\n          __self: this\n        }, \"\\u5730\\u5740\")), React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 564\n          },\n          __self: this\n        }, React.createElement(Input, {\n          type: \"text\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u5730\\u5740\",\n          name: \"address\",\n          value: this.state.address,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 565\n          },\n          __self: this\n        })))), React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 570\n          },\n          __self: this\n        }, \"\\u5907\\u6CE8\"), React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 571\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 572\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 573\n          },\n          __self: this\n        }, React.createElement(TextArea, {\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u6587\\u672C\",\n          rows: \"5\",\n          name: \"notes\",\n          value: this.state.notes,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 574\n          },\n          __self: this\n        })))), React.createElement(CellsTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 579\n          },\n          __self: this\n        }, \"\\u79C1\\u5BC6\\u53C2\\u52A0\"), React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 580\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 581\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 582\n          },\n          __self: this\n        }, React.createElement(FormCell, {\n          switch: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 583\n          },\n          __self: this\n        }, React.createElement(CellBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 584\n          },\n          __self: this\n        }, \"\\u5F00\\u542F\\u540E\\u5C06\\u9690\\u85CF\\u60A8\\u7684\\u5934\\u50CF\"), React.createElement(CellFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 585\n          },\n          __self: this\n        }, React.createElement(Switch, {\n          onClick: this.switch,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 586\n          },\n          __self: this\n        })))))), React.createElement(\"div\", {\n          className: \"checkout-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 592\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"primary\",\n          onClick: function onClick() {\n            _this4.placeOrder();\n          },\n          disabled: this.state.totalPrice !== 0 && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 593\n          },\n          __self: this\n        }, \"\\u6211\\u8981\\u4E0B\\u5355\")))));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 606\n          },\n          __self: this\n        }, React.createElement(Head, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 607\n          },\n          __self: this\n        }, React.createElement(\"meta\", {\n          name: \"viewport\",\n          content: \"initial-scale=1.0, width=device-width\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 608\n          },\n          __self: this\n        })), React.createElement(\"header\", {\n          className: \"App-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 610\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 611\n          },\n          __self: this\n        }, \"ShowMine\")), React.createElement(LoadMore, {\n          loading: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 615\n          },\n          __self: this\n        }));\n      }\n    }\n  }]);\n\n  return checkoutPage;\n}(Component);\n\nexport default checkoutPage;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/checkoutPage.js"],"names":["React","Component","Button","TextArea","ActionSheet","Switch","Radio","Cells","CellsTitle","Cell","CellHeader","CellBody","CellFooter","Form","FormCell","Input","Label","LoadMore","Toast","DetailService","JielongService","PaymentService","Head","checkoutPage","props","setState","showLoading","state","is_update","id","url","query","jielongId","configObj","params","comments","notes","config","item_url","item","location","company","pickup_locations","locationId","is_private","hideAvatar","quantity","state_redirect_obj","voucher_base_url","wechat_auth_url","index","quantityOfChildren","length","undefined","push","item_id","children","price","priceOfChildren","toString","payment_method","updateJielong","then","response","json","responseJson","jielong","generateVoucher","catch","error","console","processPayment","itemId","addJielong","item_comment_id","getToPay","payment","window","open","pay_url","showLocation","ios_show","actions","label","onClick","hide","bind","name","contact_number","address","pickup_location","totalPrice","loadingTimer","handleChange","switch","handlePayment","handleQuantity","userToken","localStorage","getItem","log","voucher","event","target","value","Number","handleTotalPrice","getDetail","clearTimeout","locationsList","map","title","e","listItems","images","full_price","minus","plus","locations","checkoutLists","fontSize","color","online_payment","street","description","placeOrder"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport { Button, TextArea, ActionSheet, Switch, Radio, Cells, CellsTitle, Cell, CellHeader, CellBody, CellFooter, Form, FormCell, Input, Label, LoadMore, Toast} from'react-weui';\nimport DetailService from '../service/DetailService';\nimport JielongService from '../service/JielongService';\nimport PaymentService from '../service/PaymentService'\n\n\n//import styles\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css';\n\n\n//import component\nimport Head from \"../components/head\";\n\n\n\nclass checkoutPage extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            jielong: 'none',\n            payment: 'none',\n            processPayment: false,\n            showLocation: false,\n            ios_show: false,\n            actions: [\n                {\n                    label: '取消',\n                    onClick: this.hide.bind(this)\n                }\n            ],\n            quantity: 0,\n            itemId: '',\n            name:'',\n            contact_number: '',\n            address: '',\n            notes: '',\n            hideAvatar: true,\n            payment_method: 'NoPayment',\n            pickup_location: '',\n            quantityOfChildren: [],\n            priceOfChildren: [],\n            totalPrice: 0,\n            showLoading: false,\n            loadingTimer: null,\n            is_update: false,\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.switch = this.switch.bind(this);\n        this.handlePayment = this.handlePayment.bind(this);\n        this.handleQuantity = this.handleQuantity.bind(this);\n    }\n\n    placeOrder() {\n        const userToken = localStorage.getItem('userToken');\n    console.log(userToken);\n        this.setState({\n            processPayment: true,\n        });\n    }\n\n    addJielong = () => {\n        this.setState({showLoading: true});\n        if (this.state.is_update) {\n            let id  = this.props.url.query.jielongId;\n            let configObj = {};\n            let params = {\n                comments:this.state.notes,\n                config: JSON.stringify(configObj),\n                item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n                location: this.state.item.company.pickup_locations[this.state.locationId].id,\n                is_private: this.state.hideAvatar,\n                quantity: [\n                ],\n                state_redirect_obj: {\n                    url: \"http://localhost:3000\",\n                },\n                voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n                wechat_auth_url: \"https://www.showmine66.com/a/wu?domain=https%253A%252F%252Fwww.showmine66.com&origurl=https%253A%252F%252Fwww.showmine66.com%252Fma%252Fi%252Fdbfcefa936b4cd6d5709953b5ea12673%2523app-top\"\n            };\n            for (let index = 0; index <= this.state.quantityOfChildren.length; index++) {\n                if (this.state.quantityOfChildren[index]!==null && this.state.quantityOfChildren[index]!== undefined) {\n                    params.quantity.push({\n                        item_id: this.state.item.children[index].id,\n                        quantity: this.state.quantityOfChildren[index],\n                        price: this.state.priceOfChildren[index].toString(),\n                    });\n                }\n\n            }\n            if (this.state.payment_method == \"NoPayment\") {\n                JielongService.updateJielong(params, id)\n                    .then((response) => response.json())\n                    .then((responseJson) => {\n                        this.setState({\n                            jielong: responseJson,\n                        });\n                        this.generateVoucher();\n                    })\n                    .catch((error) => {\n                        console.error(error);\n                    });\n            }\n            else {\n                JielongService.updateJielong(params, id)\n                    .then((response) => response.json())\n                    .then((responseJson) => {\n                        this.setState({\n                            jielong: responseJson,\n                        });\n                        this.processPayment();\n                    })\n                    .catch((error) => {\n                        console.error(error);\n                    });\n            }\n        }\n        else {\n            let id  = this.state.itemId;\n            let configObj = {};\n            let params = {\n                comments:this.state.notes,\n                config: JSON.stringify(configObj),\n                item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n                location: this.state.item.company.pickup_locations[this.state.locationId].id,\n                is_private: this.state.hideAvatar,\n                quantity: [\n                ],\n                state_redirect_obj: {\n                    url: \"http://localhost:3000\",\n                },\n                voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n                wechat_auth_url: \"https://www.showmine66.com/a/wu?domain=https%253A%252F%252Fwww.showmine66.com&origurl=https%253A%252F%252Fwww.showmine66.com%252Fma%252Fi%252Fdbfcefa936b4cd6d5709953b5ea12673%2523app-top\"\n            };\n            for (let index = 0; index <= this.state.quantityOfChildren.length; index++) {\n                if (this.state.quantityOfChildren[index]!==null && this.state.quantityOfChildren[index]!== undefined) {\n                    params.quantity.push({\n                        item_id: this.state.item.children[index].id,\n                        quantity: this.state.quantityOfChildren[index],\n                        price: this.state.priceOfChildren[index].toString(),\n                    });\n                }\n\n            }\n            if (this.state.payment_method == \"NoPayment\") {\n                JielongService.addJielong(params, id)\n                    .then((response) => response.json())\n                    .then((responseJson) => {\n                        this.setState({\n                            jielong: responseJson,\n                        });\n                        this.generateVoucher();\n                    })\n                    .catch((error) => {\n                        console.error(error);\n                    });\n            }\n            else {\n                JielongService.addJielong(params, id)\n                    .then((response) => response.json())\n                    .then((responseJson) => {\n                        this.setState({\n                            jielong: responseJson,\n                        });\n                        this.processPayment();\n                    })\n                    .catch((error) => {\n                        console.error(error);\n                    });\n            }\n        }\n    };\n\n    processPayment= () => {\n        let configObj = {\"source\":\"jielong_payment\", \"item_comment_id\": this.state.jielong.id, \"item_id\": this.state.jielong.item_id};\n        let params = {\n            config: JSON.stringify(configObj),\n            item_comment_id: this.state.jielong.id,\n            payment_method: this.state.payment_method,\n        };\n        PaymentService.getToPay(params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    payment: responseJson,\n                });\n                window.open(responseJson.pay_url,\"_self\");\n                this.setState({showLoading: false});\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    };\n\n    generateVoucher() {\n        let id = this.state.jielong.id;\n        let params = {\n            is_update: this.state.is_update,\n            item_url: \"https://www.showmine66.com/ma/i/\" + this.state.item.id,\n            voucher_base_url: \"https://www.showmine66.com/ma/jl/vci/VOUCHERID\",\n        };\n        JielongService.generateVoucher(params, id)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    voucher: responseJson,\n                });\n                window.open(responseJson.url,\"_self\");\n                this.setState({showLoading: false});\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    handleChange(event) {\n        this.setState({[event.target.name]: event.target.value});\n    }\n\n    handleTotalPrice() {\n        this.state.totalPrice = 0;\n        for(var index = 0; index <= this.state.priceOfChildren.length; index++) {\n            if (this.state.priceOfChildren[index]) {\n                this.state.totalPrice = this.state.totalPrice + this.state.priceOfChildren[index];\n            }\n        }\n        this.setState({\n            totalPrice: this.state.totalPrice,\n        })\n    }\n\n    handleQuantity(event) {\n        this.state.quantityOfChildren[event.target.name] = Number(event.target.value);\n        this.state.priceOfChildren[event.target.name] = this.state.quantityOfChildren[event.target.name] * this.state.item.children[event.target.name].price;\n        this.setState({\n            quantityOfChildren: this.state.quantityOfChildren,\n            priceOfChildren: this.state.priceOfChildren,\n        })\n        this.handleTotalPrice();\n\n    }\n\n    minus(index) {\n        if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index]===null || this.state.quantityOfChildren[index]===undefined || this.state.quantityOfChildren[index]===0 )\n        {\n            console.log('Cannot minus');\n        } else {\n            this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] - 1;\n            this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n            this.setState({\n                quantityOfChildren: this.state.quantityOfChildren,\n                priceOfChildren: this.state.priceOfChildren,\n            })\n            this.handleTotalPrice();\n\n        }\n    }\n\n    plus(index) {\n        if (!this.state.quantityOfChildren[index] || this.state.quantityOfChildren[index]===null || this.state.quantityOfChildren[index]===undefined)\n        {\n            this.state.quantityOfChildren[index] = 0;\n        }\n        this.state.quantityOfChildren[index] = this.state.quantityOfChildren[index] + 1;\n        this.state.priceOfChildren[index] = this.state.quantityOfChildren[index] * this.state.item.children[index].price;\n        this.setState({\n            quantityOfChildren: this.state.quantityOfChildren,\n            priceOfChildren: this.state.priceOfChildren,\n        })\n        this.handleTotalPrice();\n\n    }\n\n    handlePayment(event) {\n        this.setState({\n            payment_method: event.target.value\n        });\n    }\n\n    switch(){\n        this.setState({hideAvatar: !this.state.hideAvatar});\n    }\n\n    hide(){\n        this.setState({\n            ios_show: false,\n        });\n    }\n\n    componentDidMount() {\n        let params = this.props.url.query.itemId;\n        if (this.props.url.query.is_update) {\n            this.setState({\n                is_update: this.props.url.query.is_update,\n            });\n        }\n        DetailService.getDetail(params)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    item: responseJson,\n                    itemId: responseJson.id,\n                });\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    componentWillUnmount() {\n        this.state.loadingTimer && clearTimeout(this.state.loadingTimer);\n    }\n\n    render() {\n        /**\n         * Display the pickup locations list\n         */\n        let locationsList = null;\n        if (this.state.item) {\n            locationsList = this.state.item.company.pickup_locations.map((location) =>\n                <ActionSheet\n                    key={location.id}\n                    menus={\n                        [{\n                            label: location.title,\n                            onClick: ()=> {\n                                this.setState({\n                                        locationId: 0,\n                                        showLocation: true,\n                                    }\n                                );\n                                this.hide();\n                            }\n                        },]\n                    }\n                    actions={this.state.actions}\n                    show={this.state.ios_show}\n                    type=\"ios\"\n                    onRequestClose={e=>this.setState({ios_show: false})}\n                />\n            );\n        }\n\n        /**\n         * Display children & handle the quantity for each one\n         */\n        let listItems = null;\n        if (this.state.item)\n        {\n            listItems = this.state.item.children.map((item, index) =>\n                <div key={index}>\n                    <div className='checkout-info'>\n                        {item.images[0] ?\n                            ( <div className='checkout-img'>\n                                <img height={150} width={150} src={item.images[0].url} role=\"presentation\"/>\n                            </div>)\n                        :\n                        null}\n\n                        <div className='checkout-content'>\n                            <div className='checkout-subtitle'>{item.title}</div>\n                            <div\n                                className='checkout-price'>${item.full_price}</div>\n\n                            <div className=\"Number-Picker\">\n                                <button className=\"picker-button\" onClick={() => {this.minus(index);}}> - </button>\n                                <input className='picker' type=\"number\" min=\"0\" max=\"1000\" name={index}\n                                       value={this.state.quantityOfChildren[index]?this.state.quantityOfChildren[index]:0}\n                                       onChange={this.handleQuantity}/>\n                                <button className=\"picker-button\" onClick={() => {this.plus(index);}}> + </button>\n                            </div>\n                        </div>\n                    </div>\n                    <div className='location-tag'>{item.locations[0].title}</div>\n                    <div className='divider'/>\n                </div>\n\n            );\n        }\n\n        /**\n         * Display children & quantity for the checkout\n         */\n        let checkoutLists = null;\n        if (this.state.item)\n        {\n            checkoutLists = this.state.item.children.map((item, index) =>\n                <div key={item.id}>\n                    {this.state.quantityOfChildren[index] && this.state.quantityOfChildren[index] !== 0 ?\n                        <div>\n                            <div>{item.title} × {this.state.quantityOfChildren[index]}</div>\n                            <div>商品总额：${this.state.priceOfChildren[index]}</div>\n                        </div>\n                        :\n                        null\n                    }\n\n                </div>\n            );\n        }\n\n        /**\n         * The page content\n         */\n        if (this.state.item) {\n            return (\n                <div className=\"App\">\n                    <Head>\n                        <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\"/>\n                    </Head>\n                    <header className=\"App-header\">\n                        <div>\n                            ShowMine\n                        </div>\n                    </header>\n                    {this.state.processPayment ?\n                        <div className='App-body'>\n                            <div className='payment-block'>\n                                <div\n                                    className='payment-block-title'>支付金额<span>总计：${this.state.totalPrice}</span>\n                                </div>\n                                <div className='payment-block-content'>\n                                    {checkoutLists}\n                                    <div style={{fontSize: 24}}>总计:<span style={{color: 'red'}}> ${this.state.totalPrice}</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className='payment-block'>\n                                <div className='payment-block-title'>请选择支付方式:</div>\n                                <Form style={{fontSize: 16}} radio>\n                                    <FormCell radio>\n                                        <CellHeader>\n                                            <Radio name=\"radio1\" value=\"NoPayment\" defaultChecked\n                                                   onChange={this.handlePayment}/>\n                                        </CellHeader>\n                                        <CellBody>到店支付</CellBody>\n                                    </FormCell>\n                                    <FormCell>\n                                        {this.state.payment_method == \"NoPayment\"?\n                                            <CellBody>订单已确认，请到店支付。</CellBody>\n                                            :\n                                            <CellBody>使用{this.state.payment_method}完成交易。（提示：请在30分钟内完成支付，否则订单会实现）</CellBody>\n                                        }\n                                    </FormCell>\n                                    {this.state.item && this.state.item.online_payment == true ?\n                                        (<div>\n                                            <FormCell radio>\n                                                <CellHeader>\n                                                    <Radio name=\"radio1\" value=\"OMIPAY_WECHAT\"\n                                                           onChange={this.handlePayment}/>\n                                                </CellHeader>\n                                                <CellBody>微信支付</CellBody>\n                                            </FormCell>\n                                            <FormCell radio>\n                                                <CellHeader>\n                                                    <Radio name=\"radio1\" value=\"银行卡支付\" onChange={this.handlePayment}/>\n                                                </CellHeader>\n                                                <CellBody>银行卡支付</CellBody>\n                                            </FormCell>\n                                            <FormCell radio>\n                                                <CellHeader>\n                                                    <Radio name=\"radio1\" value=\"PayPal支付\" onChange={this.handlePayment}/>\n                                                </CellHeader>\n                                                <CellBody>PayPal支付</CellBody>\n                                            </FormCell>\n                                        </div>)\n                                        :\n                                        null\n                                    }\n                                </Form>\n                            </div>\n                            {this.state.showLocation ?\n                                <div className='payment-block'>\n                                    <div className='payment-block-title'>取货地点</div>\n                                    <Form style={{fontSize: 16}} radio>\n                                        <FormCell radio>\n                                            <CellHeader>\n                                                <Radio name=\"radio2\" defaultChecked/>\n                                            </CellHeader>\n                                            <CellBody>{this.state.item.children[0].locations[0].title}</CellBody>\n                                        </FormCell>\n                                    </Form>\n                                </div>\n                                :\n                                null\n                            }\n                            {this.state.notes ?\n                                <div className='payment-block'>\n                                    <div className='payment-block-title'>备注</div>\n                                    <div className='payment-block-content'>\n                                        <p>{this.state.notes}</p>\n                                    </div>\n                                </div>\n                                :\n                                null\n                            }\n                            <div className='checkout-button'>\n                                <Button type=\"primary\" onClick={() => {\n                                    this.addJielong();\n                                }}\n                                        disabled={this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true}>\n                                    确认订单\n                                </Button>\n                                <Toast icon=\"loading\" show={this.state.showLoading}>Loading...</Toast>\n                            </div>\n                        </div> :\n                        <div className='App-body'>\n                            <div className='checkout-title'>{this.state.item.title}</div>\n                            <div>\n                                <CellsTitle>选择产品</CellsTitle>\n                                {listItems}\n                                <div className='total-price'>总计：<span className='price-number'>${this.state.totalPrice}</span></div>\n                            </div>\n                            <div>\n                                <CellsTitle>取货地点* </CellsTitle>\n                                <Cells>\n                                    <Cell href=\"javascript:;\" access>\n                                        <CellBody onClick={e => this.setState({ios_show: true})}>\n                                            当前选择:\n                                        </CellBody>\n                                        {locationsList}\n                                        <CellFooter/>\n                                    </Cell>\n                                    {\n                                        this.state.showLocation ?\n                                            <div className='location'>\n                                                <div\n                                                    className='location-label'>名称：{this.state.item.company.pickup_locations[this.state.locationId].title}</div>\n                                                <div\n                                                    className='location-label'>位置：{this.state.item.company.pickup_locations[this.state.locationId].address.street}</div>\n                                                <div\n                                                    className='location-label'>描述：{this.state.item.company.pickup_locations[this.state.locationId].description}</div>\n                                            </div>\n                                            :\n                                            null\n                                    }\n                                </Cells>\n                                <CellsTitle>联系方式* </CellsTitle>\n                                <Form>\n                                    <FormCell>\n                                        <CellHeader>\n                                            <Label>姓名</Label>\n                                        </CellHeader>\n                                        <CellBody>\n                                            <Input type=\"text\" placeholder=\"请输入姓名\" name='name' value={this.state.name}\n                                                   onChange={this.handleChange}/>\n                                        </CellBody>\n                                    </FormCell>\n                                    <FormCell>\n                                        <CellHeader>\n                                            <Label>联系方式</Label>\n                                        </CellHeader>\n                                        <CellBody>\n                                            <Input type=\"text\" placeholder=\"请输入手机号\" name='contact_number'\n                                                   value={this.state.contact_number} onChange={this.handleChange}/>\n                                        </CellBody>\n                                    </FormCell>\n                                    <FormCell>\n                                        <CellHeader>\n                                            <Label>地址</Label>\n                                        </CellHeader>\n                                        <CellBody>\n                                            <Input type=\"text\" placeholder=\"请输入地址\" name='address'\n                                                   value={this.state.address} onChange={this.handleChange}/>\n                                        </CellBody>\n                                    </FormCell>\n                                </Form>\n                                <CellsTitle>备注</CellsTitle>\n                                <Form>\n                                    <FormCell>\n                                        <CellBody>\n                                            <TextArea placeholder=\"请输入文本\" rows=\"5\" name='notes' value={this.state.notes}\n                                                      onChange={this.handleChange}></TextArea>\n                                        </CellBody>\n                                    </FormCell>\n                                </Form>\n                                <CellsTitle>私密参加</CellsTitle>\n                                <Form>\n                                    <FormCell>\n                                        <CellBody>\n                                            <FormCell switch>\n                                                <CellBody>开启后将隐藏您的头像</CellBody>\n                                                <CellFooter>\n                                                    <Switch onClick={this.switch}/>\n                                                </CellFooter>\n                                            </FormCell>\n                                        </CellBody>\n                                    </FormCell>\n                                </Form>\n                                <div className='checkout-button'>\n                                    <Button type=\"primary\" onClick={() => {this.placeOrder();}}\n                                            disabled={this.state.totalPrice !== 0 && this.state.name && this.state.contact_number && this.state.address && this.state.showLocation ? false : true}>\n                                        我要下单\n                                    </Button>\n                                </div>\n                            </div>\n                        </div>\n                    }\n                </div>\n            );\n        }\n        else {\n            return (\n                <div className=\"App\">\n                    <Head>\n                        <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\"/>\n                    </Head>\n                    <header className=\"App-header\">\n                        <div>\n                            ShowMine\n                        </div>\n                    </header>\n                    <LoadMore loading></LoadMore>\n                </div>\n            );\n        }\n    }\n}\n\nexport default checkoutPage;\n"]},"metadata":{},"sourceType":"module"}