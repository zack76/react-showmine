{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from 'react';\nimport Colors from \"../../../constants/Colors\";\nimport { Cell, CellBody, CellFooter, Cells, Gallery } from \"react-weui\";\nimport JielongService from \"../../../service/JielongService\";\n\nvar RegistrationVoucherComponent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RegistrationVoucherComponent, _Component);\n\n  function RegistrationVoucherComponent(props) {\n    var _this;\n\n    _classCallCheck(this, RegistrationVoucherComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RegistrationVoucherComponent).call(this, props));\n    _this.state = {\n      isLogin: _this.props.isLogin,\n      showVoucher: false,\n      item: _this.props.item,\n      callbackUpdateIsParticipated: _this.props.callbackUpdateIsParticipated\n    };\n    return _this;\n  }\n\n  _createClass(RegistrationVoucherComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getAllJielong();\n    }\n  }, {\n    key: \"getAllJielong\",\n    value: function getAllJielong() {\n      var _this2 = this;\n\n      var id = this.state.item.id;\n      JielongService.getAllJielong(id).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        var currentJielong = responseJson[responseJson.length - 1] && responseJson[responseJson.length - 1].id ? responseJson[responseJson.length - 1] : undefined;\n\n        _this2.setState({\n          allJielongInfo: responseJson,\n          processAllJieLong: true\n        }, function () {\n          _this2.state.callbackUpdateIsParticipated(responseJson && responseJson.length > 0, currentJielong);\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"showHideJieLongMenu\",\n    value: function showHideJieLongMenu() {\n      this.setState(function (prevState) {\n        return {\n          showMenu: !prevState.showMenu\n        };\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var item = this.state.item ? this.state.item : undefined;\n      var allJielongInfo = this.state.allJielongInfo ? this.state.allJielongInfo : undefined;\n      var showDivider = !!this.props.showDivider;\n\n      if (allJielongInfo) {\n        return React.createElement(\"div\", {\n          key: item.id,\n          style: styles.cellWrapper\n        }, allJielongInfo.map(function (jieLong) {\n          return React.createElement(\"div\", {\n            key: jieLong.id\n          }, React.createElement(Cell, {\n            href: undefined,\n            onClick: function onClick(e) {\n              return _this3.setState({\n                showVoucher: true\n              });\n            },\n            access: true\n          }, React.createElement(CellBody, null, jieLong && jieLong.is_paid && jieLong.voucher && jieLong.voucher.receipt && jieLong.voucher.receipt.amount && jieLong.voucher.refnum && jieLong.is_paid ? React.createElement(\"div\", {\n            className: \"allJielongInfo\"\n          }, React.createElement(\"div\", null, React.createElement(\"span\", {\n            className: \"paidAmount-icon\"\n          }, \"\\u5DF2\\u652F\\u4ED8\\uFF1A$\", jieLong.voucher.receipt.amount), \" \\u56DE\\u6267\\u7801\\uFF1A\", React.createElement(\"span\", {\n            className: \"Ref-num\"\n          }, jieLong.voucher.refnum))) : React.createElement(\"div\", {\n            className: \"isInJielong-row\"\n          }, jieLong.voucher && jieLong.voucher.refnum ? React.createElement(\"div\", null, React.createElement(\"span\", {\n            className: \"tag-icon\"\n          }, \"\\u53C2\\u52A0\\u6210\\u529F\"), \" \\u56DE\\u6267\\u7801\\uFF1A\", React.createElement(\"span\", {\n            className: \"Ref-num\"\n          }, jieLong.voucher.refnum)) : React.createElement(\"div\", null, \"\\u63D0\\u793A\\uFF1A\\u60A8\\u6709\\u8BA2\\u5355\\u672A\\u5B8C\\u6210\\uFF0C\\u8BF7\\u572830\\u5206\\u949F\\u5185\\u5B8C\\u6210\\u652F\\u4ED8\\u3002\"))), React.createElement(CellFooter, null)), React.createElement(Gallery, {\n            src: jieLong.voucher && jieLong.voucher.img_url ? jieLong.voucher.img_url : undefined,\n            show: _this3.state.showVoucher\n          }, React.createElement(\"div\", {\n            style: styles.galleryButton,\n            onClick: function onClick(e) {\n              return _this3.setState({\n                showVoucher: false\n              });\n            }\n          }, \"Cancel\")));\n        }), showDivider ? React.createElement(\"div\", {\n          style: Colors.style.bottomDivider\n        }, \" \") : null);\n      } else return null;\n    }\n  }]);\n\n  return RegistrationVoucherComponent;\n}(Component);\n\nvar styles = {\n  cellWrapper: {\n    backgroundColor: '#fff'\n  }\n};\nexport default RegistrationVoucherComponent;","map":null,"metadata":{},"sourceType":"module"}