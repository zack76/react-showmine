{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/index.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Cells, Cell, CellBody, CellFooter, Gallery } from 'react-weui';\nimport ItemService from '../service/ItemService';\nimport JielongService from '../service/JielongService';\nimport SiteHeader from '../components/Common/SiteHeader'; //import styles\n\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css'; //import component\n\nimport JielongContent from '../components/JieLongDetails/JieLongContent';\nimport Footer from \"../components/Footer\";\nimport ChildrenList from \"../components/JieLongDetails/ChildrenList\";\nimport JieLongBanner from \"../components/JieLongDetails/JieLongBanner\";\nimport JieLongButtonArea from \"../components/JieLongDetails/JieLongButtonArea\";\nimport JieLongPopUpMenu from \"../components/JieLongDetails/JieLongPopUpMenu\";\nimport JieLongRelatedProducts from \"../components/JieLongDetails/JieLongRelatedProducts\";\nimport Colors from \"../constants/Colors\";\nimport JieLongCompanyInfo from \"../components/JieLongDetails/JieLongCompanyInfo\";\nimport ProductButtonArea from \"../components/ProductDetails/ProductButtonArea\";\nimport CheckoutView from \"../components/Cart/CheckoutView\";\nimport ProductChildrenList from \"../components/ProductDetails/ProductChildrenList\";\nimport BaseService from \"../service/BaseService\";\nimport { Config } from \"../Config\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"showHideCheckoutView\", function () {\n      _this.setState(function (prevState) {\n        return {\n          isCheckingOut: !prevState.isCheckingOut\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateSelectedItems\", function (selectedList) {\n      _this.setState({\n        selectedList: selectedList && selectedList.length > 0 ? selectedList : false\n      }, function () {\n        console.log(_this.state.selectedList);\n      });\n    });\n\n    _this.state = {\n      item: _this.props.item,\n      isLogin: false,\n      showVoucher: false,\n      itemType: 'product'\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"wechatShare\",\n    value: function wechatShare() {\n      var wx = require('weixin-js-sdk');\n\n      var wechatConfig = BaseService.get2('https://api.showmine.com.au/wechat/js/conf', window.location.href);\n      wx.config(wechatConfig); //判断是否为微信浏览器打开\n\n      var ua = window.navigator.userAgent.toLowerCase();\n      if (ua.indexOf('micromessenger') < 0) return false; // wx.config({\n      //     debug: true,\n      //     appId: '',\n      //     timestamp:'',\n      //     nonceStr: '',\n      //     signature: '',\n      //     jsApiList: [\n      //         'onMenuShareAppMessage',\n      //         'onMenuShareTimeline'\n      //     ]\n      // })\n\n      wx.ready(function () {\n        //分享给朋友\n        wx.onMenuShareAppMessage({\n          title: '',\n          desc: '',\n          link: '',\n          imgUrl: '',\n          success: function success(res) {},\n          cancel: function cancel(res) {}\n        }); //分享到朋友圈\n\n        wx.onMenuShareTimeline({\n          title: '',\n          link: '',\n          imgUrl: '',\n          success: function success(res) {},\n          cancel: function cancel(res) {}\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        isLogin: localStorage.getItem('isLogIn')\n      });\n      this.getAllJielong();\n      console.log('---------------');\n      this.wechatShare();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(object, nextProps) {\n      this.setState({\n        item: object.item\n      });\n    }\n  }, {\n    key: \"getAllJielong\",\n    value: function getAllJielong() {\n      var _this2 = this;\n\n      var id = this.state.item.id;\n      var isLogIn = localStorage.getItem('isLogIn');\n\n      if (isLogIn) {\n        JielongService.getAllJielong(id).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          var currentId = responseJson.length - 1;\n\n          _this2.setState({\n            allJielongInfo: responseJson,\n            processAllJieLong: true,\n            userJieLongInfo: responseJson[currentId]\n          });\n        }).catch(function (error) {\n          console.error(error);\n        });\n      }\n    }\n  }, {\n    key: \"showHideJieLongMenu\",\n    value: function showHideJieLongMenu() {\n      this.setState(function (prevState) {\n        return {\n          iosShow: !prevState.iosShow\n        };\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var item = this.state.item ? this.state.item : undefined;\n      var isLogin = this.state.isLogIn; // Jie Long Related Const\n\n      var allJielongInfo = this.state.allJielongInfo ? this.state.allJielongInfo : undefined;\n      var showLoading = this.state.showLoading ? this.state.showLoading : false;\n      var userJieLongInfo = this.state.userJieLongInfo ? this.state.userJieLongInfo : '';\n      var loadingJieLong = this.state.processAllJieLong;\n      var iosShow = typeof this.state.iosShow !== 'undefined' ? this.state.iosShow : false; // Product Related Const\n\n      var isCheckingOut = typeof this.state.isCheckingOut !== 'undefined' ? this.state.isCheckingOut : false;\n\n      var itemDetailView = function itemDetailView() {\n        return React.createElement(\"div\", {\n          className: \"App-body\",\n          key: item.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, React.createElement(JieLongBanner, {\n          item: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }), React.createElement(JielongContent, {\n          jieLongDetail: item ? item : undefined,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }), React.createElement(ProductChildrenList, {\n          children: item.children ? item.children : undefined,\n          callbackUpdateItem: _this3.updateSelectedItems,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }), React.createElement(JieLongCompanyInfo, {\n          item: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }), React.createElement(JieLongRelatedProducts, {\n          companyId: item.company_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }), _this3.state.itemType === 'product' ? React.createElement(ProductButtonArea, {\n          item: item,\n          isLogin: isLogin,\n          selectedList: _this3.state.selectedList,\n          callbackChangeView: _this3.showHideCheckoutView,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        }, React.createElement(JieLongButtonArea, {\n          item: item,\n          isLogin: isLogin,\n          userJieLongInfo: userJieLongInfo,\n          loadingJieLong: loadingJieLong,\n          showHideJieLongMenu: function showHideJieLongMenu() {\n            return _this3.showHideJieLongMenu();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }), React.createElement(JieLongPopUpMenu, {\n          item: item,\n          showHideJieLongMenu: function showHideJieLongMenu() {\n            _this3.showHideJieLongMenu();\n          },\n          showLoading: showLoading,\n          iosShow: iosShow,\n          userJieLongInfo: userJieLongInfo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        })));\n      };\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(SiteHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }), isCheckingOut ? React.createElement(CheckoutView, {\n        selectedList: this.state.selectedList,\n        parentItem: item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }) : itemDetailView(), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\n_defineProperty(App, \"getInitialProps\",\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(_ref) {\n    var req, query, res, json;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            req = _ref.req, query = _ref.query;\n            res = '';\n\n            if (!query.itemId) {\n              _context.next = 8;\n              break;\n            }\n\n            _context.next = 5;\n            return ItemService.getItemDetail(query.itemId);\n\n          case 5:\n            res = _context.sent;\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.next = 10;\n            return ItemService.getItemDetail('2b33c6d0b45d2170664a23866524a5c8');\n\n          case 10:\n            res = _context.sent;\n\n          case 11:\n            _context.next = 13;\n            return res.json();\n\n          case 13:\n            json = _context.sent;\n            return _context.abrupt(\"return\", {\n              item: json\n            });\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\nvar styles = {\n  bottomDivider: {\n    clear: 'both',\n    padding: '3px 0',\n    backgroundColor: Colors.borderColor,\n    display: 'block'\n  },\n  galleryButton: {\n    color: 'white',\n    fontWeight: 'bold',\n    padding: '0'\n  },\n  relatedProductWrapper: {\n    backgroundColor: '#fff',\n    padding: '5vmin'\n  },\n  buttonGroupContainer: {\n    position: 'fixed',\n    left: 0,\n    bottom: 0,\n    width: '100%',\n    backgroundColor: '#fff',\n    color: '#fff',\n    textAlign: 'center'\n  }\n};\nexport default App;","map":{"version":3,"sources":["/Users/Zac/Sysbox/SHM_React/shm-react/my-app/pages/index.js"],"names":["React","Component","Cells","Cell","CellBody","CellFooter","Gallery","ItemService","JielongService","SiteHeader","JielongContent","Footer","ChildrenList","JieLongBanner","JieLongButtonArea","JieLongPopUpMenu","JieLongRelatedProducts","Colors","JieLongCompanyInfo","ProductButtonArea","CheckoutView","ProductChildrenList","BaseService","Config","App","props","setState","prevState","isCheckingOut","selectedList","length","console","log","state","item","isLogin","showVoucher","itemType","wx","require","wechatConfig","get2","window","location","href","config","ua","navigator","userAgent","toLowerCase","indexOf","ready","onMenuShareAppMessage","title","desc","link","imgUrl","success","res","cancel","onMenuShareTimeline","localStorage","getItem","getAllJielong","wechatShare","object","nextProps","id","isLogIn","then","response","json","responseJson","currentId","allJielongInfo","processAllJieLong","userJieLongInfo","catch","error","iosShow","undefined","showLoading","loadingJieLong","itemDetailView","children","updateSelectedItems","company_id","showHideCheckoutView","showHideJieLongMenu","req","query","itemId","getItemDetail","styles","bottomDivider","clear","padding","backgroundColor","borderColor","display","galleryButton","color","fontWeight","relatedProductWrapper","buttonGroupContainer","position","left","bottom","width","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport {Cells, Cell, CellBody, CellFooter, Gallery} from 'react-weui';\nimport ItemService from '../service/ItemService';\nimport JielongService from '../service/JielongService';\nimport SiteHeader from '../components/Common/SiteHeader';\n\n//import styles\nimport 'weui';\nimport 'react-weui/build/packages/react-weui.css';\n\n//import component\nimport JielongContent from '../components/JieLongDetails/JieLongContent';\nimport Footer from \"../components/Footer\";\nimport ChildrenList from \"../components/JieLongDetails/ChildrenList\";\nimport JieLongBanner from \"../components/JieLongDetails/JieLongBanner\";\nimport JieLongButtonArea from \"../components/JieLongDetails/JieLongButtonArea\";\nimport JieLongPopUpMenu from \"../components/JieLongDetails/JieLongPopUpMenu\";\nimport JieLongRelatedProducts from \"../components/JieLongDetails/JieLongRelatedProducts\";\nimport Colors from \"../constants/Colors\";\nimport JieLongCompanyInfo from \"../components/JieLongDetails/JieLongCompanyInfo\";\nimport ProductButtonArea from \"../components/ProductDetails/ProductButtonArea\";\nimport CheckoutView from \"../components/Cart/CheckoutView\";\nimport ProductChildrenList from \"../components/ProductDetails/ProductChildrenList\";\nimport BaseService from \"../service/BaseService\";\nimport {Config} from \"../Config\";\n\n\n\n\n\nclass App extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            item: this.props.item,\n            isLogin: false,\n            showVoucher: false,\n            itemType: 'product'\n        };\n    }\n\n    static getInitialProps = async({ req, query }) => {\n        let res = '';\n        if (query.itemId) {\n            res = await ItemService.getItemDetail(query.itemId);\n        }\n        else {\n            // res = await ItemService.getItemDetail('a3067bcbd7521b4965ef8b43394aa011');\n            res = await ItemService.getItemDetail('2b33c6d0b45d2170664a23866524a5c8');\n        }\n        const json = await res.json();\n        return {item: json};\n    };\n\n    wechatShare() {\n        var wx = require('weixin-js-sdk');\n\n        var wechatConfig = BaseService.get2( 'https://api.showmine.com.au/wechat/js/conf', window.location.href);\n        wx.config(wechatConfig);\n\n        //判断是否为微信浏览器打开\n        const ua = window.navigator.userAgent.toLowerCase();\n        if (ua.indexOf('micromessenger') < 0) return false;\n\n        // wx.config({\n        //     debug: true,\n        //     appId: '',\n        //     timestamp:'',\n        //     nonceStr: '',\n        //     signature: '',\n        //     jsApiList: [\n        //         'onMenuShareAppMessage',\n        //         'onMenuShareTimeline'\n        //     ]\n        // })\n\n        wx.ready(() => {\n            //分享给朋友\n            wx.onMenuShareAppMessage({\n                title: '',\n                desc: '',\n                link: '',\n                imgUrl: '',\n                success: function (res) {\n\n                },\n                cancel: function (res) {\n\n                }\n            })\n\n            //分享到朋友圈\n            wx.onMenuShareTimeline({\n                title: '',\n                link: '',\n                imgUrl: '',\n                success: function (res) {\n\n                },\n                cancel: function (res) {\n\n                }\n            })\n        })\n\n    }\n\n    componentDidMount() {\n        this.setState({\n            isLogin: localStorage.getItem('isLogIn'),\n        });\n        this.getAllJielong();\n        console.log('---------------');\n        this.wechatShare();\n\n    }\n\n    componentWillReceiveProps(object, nextProps) {\n        this.setState({\n            item: object.item\n        });\n    }\n\n    getAllJielong() {\n        let id = this.state.item.id;\n        const isLogIn = localStorage.getItem('isLogIn');\n        if (isLogIn) {\n            JielongService.getAllJielong(id)\n                .then((response) => response.json())\n                .then((responseJson) => {\n                    let currentId = responseJson.length - 1;\n                    this.setState({\n                        allJielongInfo: responseJson,\n                        processAllJieLong: true,\n                        userJieLongInfo : responseJson[currentId],\n                    });\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        }\n    }\n\n    showHideJieLongMenu() {\n        this.setState((prevState) => ({\n            iosShow: !prevState.iosShow\n        }));\n    };\n\n    showHideCheckoutView = () => {\n        this.setState((prevState) => ({\n            isCheckingOut: !prevState.isCheckingOut\n        }));\n    };\n\n    updateSelectedItems = (selectedList) => {\n        this.setState({\n            selectedList: selectedList && selectedList.length > 0 ? selectedList : false\n        }, () => {\n            console.log(this.state.selectedList);\n        })\n    };\n\n\n    render() {\n        const item = this.state.item ? this.state.item : undefined;\n        const isLogin = this.state.isLogIn;\n\n        // Jie Long Related Const\n        const allJielongInfo = this.state.allJielongInfo ? this.state.allJielongInfo : undefined;\n        const showLoading = this.state.showLoading ? this.state.showLoading : false;\n        const userJieLongInfo = this.state.userJieLongInfo ? this.state.userJieLongInfo : '';\n        const loadingJieLong = this.state.processAllJieLong;\n        const iosShow = typeof this.state.iosShow !== 'undefined' ? this.state.iosShow : false;\n\n        // Product Related Const\n        const isCheckingOut = typeof this.state.isCheckingOut !== 'undefined' ? this.state.isCheckingOut : false;\n\n\n        const itemDetailView = () => ((\n            <div className='App-body' key={item.id}>\n\n                <JieLongBanner item={item}/>\n                <JielongContent jieLongDetail={item ? item : undefined}/>\n\n                {/*<ChildrenList children={item.children ? item.children : undefined}/>*/}\n\n                <ProductChildrenList children={item.children ? item.children : undefined} callbackUpdateItem={this.updateSelectedItems}/>\n\n                <JieLongCompanyInfo item={item}/>\n\n                <JieLongRelatedProducts companyId={item.company_id}/>\n\n                { this.state.itemType === 'product'\n                    ?\n                    <ProductButtonArea item={item} isLogin={isLogin} selectedList={this.state.selectedList} callbackChangeView={this.showHideCheckoutView}  />\n                    :\n                    <div>\n                        <JieLongButtonArea\n                            item={item}\n                            isLogin={isLogin}\n                            userJieLongInfo={userJieLongInfo}\n                            loadingJieLong={loadingJieLong}\n                            showHideJieLongMenu={()=>this.showHideJieLongMenu()}/>\n                        <JieLongPopUpMenu\n                            item={item}\n                            showHideJieLongMenu={()=>{this.showHideJieLongMenu()}}\n                            showLoading={showLoading}\n                            iosShow={iosShow}\n                            userJieLongInfo={userJieLongInfo}/>\n                    </div>\n                }\n            </div>\n        ));\n\n        return (\n            <div className=\"App\">\n                <SiteHeader/>\n                { isCheckingOut ? <CheckoutView selectedList={this.state.selectedList} parentItem={item}/> : itemDetailView()\n                }\n                <Footer/>\n            </div>\n        );\n    }\n}\n\nconst styles = {\n    bottomDivider: {\n        clear: 'both',\n        padding: '3px 0',\n        backgroundColor: Colors.borderColor,\n        display: 'block'\n    },\n    galleryButton: {\n        color: 'white',\n        fontWeight:'bold',\n        padding: '0',\n    },\n    relatedProductWrapper: {\n        backgroundColor: '#fff',\n        padding: '5vmin'\n    },\n    buttonGroupContainer: {\n        position: 'fixed',\n        left: 0,\n        bottom: 0,\n        width: '100%',\n        backgroundColor: '#fff',\n        color: '#fff',\n        textAlign: 'center',\n    }\n};\n\nexport default App;\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}